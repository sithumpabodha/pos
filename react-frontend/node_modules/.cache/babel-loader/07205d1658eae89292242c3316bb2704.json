{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Bar}from\"react-chartjs-2\";import{Chart as ChartJS,CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend}from\"chart.js\";import{Card,NavDropdown}from\"react-bootstrap\";import{getFormattedMessage,placeholderText,currencySymbolHandling}from\"../../shared/sharedMethod\";import{Row}from\"react-bootstrap-v5\";import{connect}from\"react-redux\";import{weekSalePurchases}from\"../../store/action/weeksalePurchaseAction\";import{yearlyTopProduct}from\"../../store/action/yearlyTopProductAction\";import moment from\"moment\";import TopSellingProductChart from\"./TopSellingProductChart\";import LineChart from\"./LineChart\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faBars}from\"@fortawesome/free-solid-svg-icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ThisWeekSalePurchaseChart=props=>{ChartJS.register(CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend);const{frontSetting,weekSalePurchases,weekSalePurchase,yearTopProduct,yearlyTopProduct,allConfigData}=props;const[isLineChart,isSetLineChart]=useState(false);const year=new Date();useEffect(()=>{weekSalePurchases();yearlyTopProduct();},[]);const currency=frontSetting?frontSetting.value&&frontSetting.value.currency_symbol:\"$\";const valueFormatter=tooltipItems=>{const value=tooltipItems.dataset.data[tooltipItems.dataIndex];const label=tooltipItems.dataset.label;const currencySymbol=currency?currency:\"\";return label+\" : \"+currencySymbolHandling(allConfigData,currencySymbol,value,true);};const yFormatter=yValue=>{const value=yValue;const currencySymbol=currency?currency:\"\";return currencySymbolHandling(allConfigData,currencySymbol,value,true);};const options={responsive:true,plugins:{legend:{position:\"top\"},tooltip:{callbacks:{label:tooltipItems=>valueFormatter(tooltipItems)}}},scales:{y:{ticks:{callback:value=>yFormatter(value)},title:{display:true,text:placeholderText(\"expense.input.amount.label\"),align:\"center\"}}}};const labels=weekSalePurchase?weekSalePurchase.dates:\"\";const data={labels,datasets:[{label:placeholderText(\"sales.title\"),data:weekSalePurchase?weekSalePurchase.sales:\"\",backgroundColor:\"#6571FF\"},{label:placeholderText(\"purchases.title\"),data:weekSalePurchase?weekSalePurchase.purchases:\"\",backgroundColor:\"#38c074\"}]};return/*#__PURE__*/_jsxs(Row,{className:\"g-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-xxl-8 col-12\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Card.Header,{className:\"pb-0 px-10\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:getFormattedMessage(\"dashboard.ThisWeekSales&Purchases.title\")}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2 chart-dropdown\",children:/*#__PURE__*/_jsxs(NavDropdown,{title:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faBars}),children:[/*#__PURE__*/_jsx(NavDropdown.Item,{href:\"#/\",className:`${isLineChart===true?\"\":\"text-primary\"} fs-6`,children:getFormattedMessage(\"bar.title\")}),/*#__PURE__*/_jsx(NavDropdown.Item,{href:\"#\",className:`${isLineChart===true?\"text-primary\":\"\"} fs-6`,onClick:()=>isSetLineChart(true),children:getFormattedMessage(\"line.title\")})]})})]}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{children:[data&&currency&&isLineChart===false&&/*#__PURE__*/_jsx(Bar,{options:options,data:data,height:100}),data&&currency&&isLineChart===true&&/*#__PURE__*/_jsx(LineChart,{weekSalePurchase:weekSalePurchase,frontSetting:frontSetting})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xxl-4 col-12\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Card.Header,{className:\"pb-0 px-0 justify-content-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-3 me-1\",children:getFormattedMessage(\"dashboard.TopSellingProducts.title\")}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"(\",moment(year).format(\"YYYY\"),\")\"]})]}),/*#__PURE__*/_jsx(Card.Body,{className:\"p-3\",children:/*#__PURE__*/_jsx(TopSellingProductChart,{yearTopProduct:yearTopProduct,frontSetting:frontSetting})})]})})]});};const mapStateToProps=state=>{const{weekSalePurchase,yearTopProduct,allConfigData}=state;return{weekSalePurchase,yearTopProduct,allConfigData};};export default connect(mapStateToProps,{weekSalePurchases,yearlyTopProduct})(ThisWeekSalePurchaseChart);","map":{"version":3,"names":["React","useEffect","useState","Bar","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","Card","NavDropdown","getFormattedMessage","placeholderText","currencySymbolHandling","Row","connect","weekSalePurchases","yearlyTopProduct","moment","TopSellingProductChart","LineChart","FontAwesomeIcon","faBars","jsx","_jsx","jsxs","_jsxs","ThisWeekSalePurchaseChart","props","register","frontSetting","weekSalePurchase","yearTopProduct","allConfigData","isLineChart","isSetLineChart","year","Date","currency","value","currency_symbol","valueFormatter","tooltipItems","dataset","data","dataIndex","label","currencySymbol","yFormatter","yValue","options","responsive","plugins","legend","position","tooltip","callbacks","scales","y","ticks","callback","title","display","text","align","labels","dates","datasets","sales","backgroundColor","purchases","className","children","Header","icon","Item","href","onClick","Body","height","format","mapStateToProps","state"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/dashboard/ThisWeekSalePurchaseChart.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Bar } from \"react-chartjs-2\";\nimport {\n    Chart as ChartJS,\n    CategoryScale,\n    LinearScale,\n    BarElement,\n    Title,\n    Tooltip,\n    Legend,\n} from \"chart.js\";\nimport { Card, NavDropdown } from \"react-bootstrap\";\nimport {\n    getFormattedMessage,\n    placeholderText,\n    currencySymbolHandling,\n} from \"../../shared/sharedMethod\";\nimport { Row } from \"react-bootstrap-v5\";\nimport { connect } from \"react-redux\";\nimport { weekSalePurchases } from \"../../store/action/weeksalePurchaseAction\";\nimport { yearlyTopProduct } from \"../../store/action/yearlyTopProductAction\";\nimport moment from \"moment\";\nimport TopSellingProductChart from \"./TopSellingProductChart\";\nimport LineChart from \"./LineChart\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faBars } from \"@fortawesome/free-solid-svg-icons\";\n\nconst ThisWeekSalePurchaseChart = (props) => {\n    ChartJS.register(\n        CategoryScale,\n        LinearScale,\n        BarElement,\n        Title,\n        Tooltip,\n        Legend\n    );\n\n    const {\n        frontSetting,\n        weekSalePurchases,\n        weekSalePurchase,\n        yearTopProduct,\n        yearlyTopProduct,\n        allConfigData,\n    } = props;\n\n    const [isLineChart, isSetLineChart] = useState(false);\n    const year = new Date();\n\n    useEffect(() => {\n        weekSalePurchases();\n        yearlyTopProduct();\n    }, []);\n\n    const currency = frontSetting\n        ? frontSetting.value && frontSetting.value.currency_symbol\n        : \"$\";\n\n    const valueFormatter = (tooltipItems) => {\n        const value = tooltipItems.dataset.data[tooltipItems.dataIndex];\n        const label = tooltipItems.dataset.label;\n        const currencySymbol = currency ? currency : \"\";\n        return (\n            label +\n            \" : \" +\n            currencySymbolHandling(allConfigData, currencySymbol, value, true)\n        );\n    };\n\n    const yFormatter = (yValue) => {\n        const value = yValue;\n        const currencySymbol = currency ? currency : \"\";\n        return currencySymbolHandling(\n            allConfigData,\n            currencySymbol,\n            value,\n            true\n        );\n    };\n\n    const options = {\n        responsive: true,\n        plugins: {\n            legend: {\n                position: \"top\",\n            },\n            tooltip: {\n                callbacks: {\n                    label: (tooltipItems) => valueFormatter(tooltipItems),\n                },\n            },\n        },\n        scales: {\n            y: {\n                ticks: {\n                    callback: (value) => yFormatter(value),\n                },\n                title: {\n                    display: true,\n                    text: placeholderText(\"expense.input.amount.label\"),\n                    align: \"center\",\n                },\n            },\n        },\n    };\n\n    const labels = weekSalePurchase ? weekSalePurchase.dates : \"\";\n\n    const data = {\n        labels,\n        datasets: [\n            {\n                label: placeholderText(\"sales.title\"),\n                data: weekSalePurchase ? weekSalePurchase.sales : \"\",\n                backgroundColor: \"#6571FF\",\n            },\n            {\n                label: placeholderText(\"purchases.title\"),\n                data: weekSalePurchase ? weekSalePurchase.purchases : \"\",\n                backgroundColor: \"#38c074\",\n            },\n        ],\n    };\n\n    return (\n        <Row className=\"g-4\">\n            <div className=\"col-xxl-8 col-12\">\n                <Card>\n                    <Card.Header className=\"pb-0 px-10\">\n                        <h5 className=\"mb-0\">\n                            {getFormattedMessage(\n                                \"dashboard.ThisWeekSales&Purchases.title\"\n                            )}\n                        </h5>\n                        <div className=\"mb-2 chart-dropdown\">\n                            <NavDropdown\n                                title={<FontAwesomeIcon icon={faBars} />}\n                            >\n                                <NavDropdown.Item\n                                    href=\"#/\"\n                                    className={`${\n                                        isLineChart === true\n                                            ? \"\"\n                                            : \"text-primary\"\n                                    } fs-6`}\n                                >\n                                    {getFormattedMessage(\"bar.title\")}\n                                </NavDropdown.Item>\n                                <NavDropdown.Item\n                                    href=\"#\"\n                                    className={`${\n                                        isLineChart === true\n                                            ? \"text-primary\"\n                                            : \"\"\n                                    } fs-6`}\n                                    onClick={() => isSetLineChart(true)}\n                                >\n                                    {getFormattedMessage(\"line.title\")}\n                                </NavDropdown.Item>\n                            </NavDropdown>\n                        </div>\n                    </Card.Header>\n                    <Card.Body>\n                        <div>\n                            {data && currency && isLineChart === false && (\n                                <Bar\n                                    options={options}\n                                    data={data}\n                                    height={100}\n                                />\n                            )}\n                            {data && currency && isLineChart === true && (\n                                <LineChart\n                                    weekSalePurchase={weekSalePurchase}\n                                    frontSetting={frontSetting}\n                                />\n                            )}\n                        </div>\n                    </Card.Body>\n                </Card>\n            </div>\n            <div className=\"col-xxl-4 col-12\">\n                <Card>\n                    <Card.Header className=\"pb-0 px-0 justify-content-center\">\n                        <h4 className=\"mb-3 me-1\">\n                            {getFormattedMessage(\n                                \"dashboard.TopSellingProducts.title\"\n                            )}\n                        </h4>\n                        <h4>({moment(year).format(\"YYYY\")})</h4>\n                    </Card.Header>\n                    <Card.Body className=\"p-3\">\n                        {/*<div className='h-75 w-75 align-items-center'>*/}\n                        <TopSellingProductChart\n                            yearTopProduct={yearTopProduct}\n                            frontSetting={frontSetting}\n                        />\n                        {/*</div>*/}\n                    </Card.Body>\n                </Card>\n            </div>\n        </Row>\n    );\n};\n\nconst mapStateToProps = (state) => {\n    const { weekSalePurchase, yearTopProduct, allConfigData } = state;\n    return { weekSalePurchase, yearTopProduct, allConfigData };\n};\n\nexport default connect(mapStateToProps, {\n    weekSalePurchases,\n    yearlyTopProduct,\n})(ThisWeekSalePurchaseChart);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}