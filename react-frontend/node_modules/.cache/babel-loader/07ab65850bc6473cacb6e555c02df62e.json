{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import ReactDataTable from\"../../../shared/table/ReactDataTable\";import{currencySymbolHandling,getFormattedMessage}from\"../../../shared/sharedMethod\";import{fetchSalesReturn}from\"../../../store/action/salesReturnAction\";import{fetchFrontSetting}from\"../../../store/action/frontSettingAction\";import{saleReturnExcelAction}from\"../../../store/action/salesReturnExcelAction\";import{jsx as _jsx}from\"react/jsx-runtime\";const SaleReturnTab=props=>{const{isLoading,totalRecord,fetchSalesReturn,salesReturn,frontSetting,fetchFrontSetting,warehouseValue,saleReturnExcelAction,allConfigData}=props;const currencySymbol=frontSetting&&frontSetting.value&&frontSetting.value.currency_symbol;const[isWarehouseValue,setIsWarehouseValue]=useState(false);useEffect(()=>{if(isWarehouseValue===true){saleReturnExcelAction(warehouseValue.value,setIsWarehouseValue);}},[isWarehouseValue]);useEffect(()=>{fetchFrontSetting();},[warehouseValue]);const columns=[{name:getFormattedMessage(\"dashboard.recentSales.reference.label\"),sortField:\"reference_code\",sortable:false,cell:row=>{return/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-light-danger\",children:/*#__PURE__*/_jsx(\"span\",{children:row.reference_code})});}},{name:getFormattedMessage(\"customer.title\"),selector:row=>row.customer_name,sortField:\"customer_name\",sortable:false},{name:getFormattedMessage(\"warehouse.title\"),selector:row=>row.warehouse_name,sortField:\"warehouse_name\",sortable:false},{name:getFormattedMessage(\"purchase.grant-total.label\"),selector:row=>currencySymbolHandling(allConfigData,row.currency,row.grand_total),sortField:\"grand_total\",sortable:true},{name:getFormattedMessage(\"dashboard.recentSales.paid.label\"),selector:row=>currencySymbolHandling(allConfigData,row.currency,row.paid_amount),sortField:\"paid_amount\",sortable:true},{name:getFormattedMessage(\"dashboard.recentSales.due.label\"),selector:row=>currencySymbolHandling(allConfigData,row.currency,\"0.00\"),sortField:\"due\"// sortable: true,\n},{name:getFormattedMessage(\"purchase.select.status.label\"),sortField:\"status\",sortable:false,cell:row=>{return row.status===1&&/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-light-success\",children:/*#__PURE__*/_jsx(\"span\",{children:getFormattedMessage(\"status.filter.received.label\")})})||row.status===2&&/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-light-primary\",children:/*#__PURE__*/_jsx(\"span\",{children:getFormattedMessage(\"status.filter.pending.label\")})})||row.status===3&&/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-light-warning\",children:/*#__PURE__*/_jsx(\"span\",{children:getFormattedMessage(\"status.filter.ordered.label\")})});}}];const itemsValue=currencySymbol&&salesReturn.length>=0&&salesReturn.map(sale=>({reference_code:sale.attributes.reference_code,customer_name:sale.attributes.customer_name,warehouse_name:sale.attributes.warehouse_name,status:sale.attributes.status,payment_status:sale.attributes.payment_status,grand_total:sale.attributes.grand_total,paid_amount:sale.attributes.paid_amount?sale.attributes.paid_amount:0.0.toFixed(2),id:sale.id,currency:currencySymbol}));const onChange=filter=>{fetchSalesReturn(filter,true);};const onExcelClick=()=>{setIsWarehouseValue(true);};return/*#__PURE__*/_jsx(ReactDataTable,{columns:columns,isEXCEL:true,items:itemsValue,onChange:onChange,isLoading:isLoading,warehouseValue:warehouseValue,totalRows:totalRecord,onExcelClick:onExcelClick,isStatus:true,isShowFilterField:true});};const mapStateToProps=state=>{const{isLoading,totalRecord,salesReturn,frontSetting}=state;return{isLoading,totalRecord,salesReturn,frontSetting};};export default connect(mapStateToProps,{fetchFrontSetting,fetchSalesReturn,saleReturnExcelAction})(SaleReturnTab);","map":{"version":3,"names":["React","useEffect","useState","connect","ReactDataTable","currencySymbolHandling","getFormattedMessage","fetchSalesReturn","fetchFrontSetting","saleReturnExcelAction","jsx","_jsx","SaleReturnTab","props","isLoading","totalRecord","salesReturn","frontSetting","warehouseValue","allConfigData","currencySymbol","value","currency_symbol","isWarehouseValue","setIsWarehouseValue","columns","name","sortField","sortable","cell","row","className","children","reference_code","selector","customer_name","warehouse_name","currency","grand_total","paid_amount","status","itemsValue","length","map","sale","attributes","payment_status","toFixed","id","onChange","filter","onExcelClick","isEXCEL","items","totalRows","isStatus","isShowFilterField","mapStateToProps","state"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/report/warehouseReport/SaleReturnTab.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport ReactDataTable from \"../../../shared/table/ReactDataTable\";\nimport {\n    currencySymbolHandling,\n    getFormattedMessage,\n} from \"../../../shared/sharedMethod\";\nimport { fetchSalesReturn } from \"../../../store/action/salesReturnAction\";\nimport { fetchFrontSetting } from \"../../../store/action/frontSettingAction\";\nimport { saleReturnExcelAction } from \"../../../store/action/salesReturnExcelAction\";\n\nconst SaleReturnTab = (props) => {\n    const {\n        isLoading,\n        totalRecord,\n        fetchSalesReturn,\n        salesReturn,\n        frontSetting,\n        fetchFrontSetting,\n        warehouseValue,\n        saleReturnExcelAction,\n        allConfigData,\n    } = props;\n    const currencySymbol =\n        frontSetting &&\n        frontSetting.value &&\n        frontSetting.value.currency_symbol;\n    const [isWarehouseValue, setIsWarehouseValue] = useState(false);\n\n    useEffect(() => {\n        if (isWarehouseValue === true) {\n            saleReturnExcelAction(warehouseValue.value, setIsWarehouseValue);\n        }\n    }, [isWarehouseValue]);\n\n    useEffect(() => {\n        fetchFrontSetting();\n    }, [warehouseValue]);\n\n    const columns = [\n        {\n            name: getFormattedMessage(\"dashboard.recentSales.reference.label\"),\n            sortField: \"reference_code\",\n            sortable: false,\n            cell: (row) => {\n                return (\n                    <span className=\"badge bg-light-danger\">\n                        <span>{row.reference_code}</span>\n                    </span>\n                );\n            },\n        },\n        {\n            name: getFormattedMessage(\"customer.title\"),\n            selector: (row) => row.customer_name,\n            sortField: \"customer_name\",\n            sortable: false,\n        },\n        {\n            name: getFormattedMessage(\"warehouse.title\"),\n            selector: (row) => row.warehouse_name,\n            sortField: \"warehouse_name\",\n            sortable: false,\n        },\n        {\n            name: getFormattedMessage(\"purchase.grant-total.label\"),\n            selector: (row) =>\n                currencySymbolHandling(\n                    allConfigData,\n                    row.currency,\n                    row.grand_total\n                ),\n            sortField: \"grand_total\",\n            sortable: true,\n        },\n        {\n            name: getFormattedMessage(\"dashboard.recentSales.paid.label\"),\n            selector: (row) =>\n                currencySymbolHandling(\n                    allConfigData,\n                    row.currency,\n                    row.paid_amount\n                ),\n            sortField: \"paid_amount\",\n            sortable: true,\n        },\n        {\n            name: getFormattedMessage(\"dashboard.recentSales.due.label\"),\n            selector: (row) =>\n                currencySymbolHandling(allConfigData, row.currency, \"0.00\"),\n            sortField: \"due\",\n            // sortable: true,\n        },\n        {\n            name: getFormattedMessage(\"purchase.select.status.label\"),\n            sortField: \"status\",\n            sortable: false,\n            cell: (row) => {\n                return (\n                    (row.status === 1 && (\n                        <span className=\"badge bg-light-success\">\n                            <span>\n                                {getFormattedMessage(\n                                    \"status.filter.received.label\"\n                                )}\n                            </span>\n                        </span>\n                    )) ||\n                    (row.status === 2 && (\n                        <span className=\"badge bg-light-primary\">\n                            <span>\n                                {getFormattedMessage(\n                                    \"status.filter.pending.label\"\n                                )}\n                            </span>\n                        </span>\n                    )) ||\n                    (row.status === 3 && (\n                        <span className=\"badge bg-light-warning\">\n                            <span>\n                                {getFormattedMessage(\n                                    \"status.filter.ordered.label\"\n                                )}\n                            </span>\n                        </span>\n                    ))\n                );\n            },\n        },\n    ];\n\n    const itemsValue =\n        currencySymbol &&\n        salesReturn.length >= 0 &&\n        salesReturn.map((sale) => ({\n            reference_code: sale.attributes.reference_code,\n            customer_name: sale.attributes.customer_name,\n            warehouse_name: sale.attributes.warehouse_name,\n            status: sale.attributes.status,\n            payment_status: sale.attributes.payment_status,\n            grand_total: sale.attributes.grand_total,\n            paid_amount: sale.attributes.paid_amount\n                ? sale.attributes.paid_amount\n                : (0.0).toFixed(2),\n            id: sale.id,\n            currency: currencySymbol,\n        }));\n\n    const onChange = (filter) => {\n        fetchSalesReturn(filter, true);\n    };\n\n    const onExcelClick = () => {\n        setIsWarehouseValue(true);\n    };\n\n    return (\n        <ReactDataTable\n            columns={columns}\n            isEXCEL\n            items={itemsValue}\n            onChange={onChange}\n            isLoading={isLoading}\n            warehouseValue={warehouseValue}\n            totalRows={totalRecord}\n            onExcelClick={onExcelClick}\n            isStatus\n            isShowFilterField\n        />\n    );\n};\n\nconst mapStateToProps = (state) => {\n    const { isLoading, totalRecord, salesReturn, frontSetting } = state;\n    return { isLoading, totalRecord, salesReturn, frontSetting };\n};\n\nexport default connect(mapStateToProps, {\n    fetchFrontSetting,\n    fetchSalesReturn,\n    saleReturnExcelAction,\n})(SaleReturnTab);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}