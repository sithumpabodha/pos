{"ast":null,"code":"import React,{useEffect,useState}from'react';import{connect}from'react-redux';import{useParams}from'react-router-dom';import{fetchMainProduct}from'../../store/action/productAction';import ProductForm from'./ProductForm';import HeaderTitle from'../header/HeaderTitle';import MasterLayout from'../MasterLayout';import{productUnitDropdown}from'../../store/action/productUnitAction';import{fetchAllunits}from'../../store/action/unitsAction';import{getFormattedMessage}from'../../shared/sharedMethod';import TopProgressBar from\"../../shared/components/loaders/TopProgressBar\";import{fetchAllBaseUnits}from\"../../store/action/baseUnitsAction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const EditProduct=props=>{var _singleProduct$;const{fetchMainProduct,products,fetchAllBaseUnits,base}=props;const{id}=useParams();const[singleProduct,setSingleProduct]=useState({});useEffect(()=>{fetchAllBaseUnits();fetchMainProduct(id);},[]);useEffect(()=>{if(products.length==1){setSingleProduct(products);}},[products]);const subProduct=singleProduct.length>=1&&((_singleProduct$=singleProduct[0])===null||_singleProduct$===void 0?void 0:_singleProduct$.attributes.products[0]);const getSaleUnit=subProduct&&subProduct.sale_unit_name?{label:subProduct.sale_unit_name.name,value:subProduct.sale_unit_name.id}:'';const getPurchaseUnit=subProduct&&subProduct.purchase_unit_name?{label:subProduct.purchase_unit_name.name,value:subProduct.purchase_unit_name.id}:'';const mainProductItemsValue=singleProduct.length>=1&&singleProduct.map(product=>({name:product===null||product===void 0?void 0:product.attributes.name,code:product===null||product===void 0?void 0:product.attributes.code,product_type:product===null||product===void 0?void 0:product.attributes.product_type,product_category_id:{value:subProduct===null||subProduct===void 0?void 0:subProduct.product_category_id,label:subProduct===null||subProduct===void 0?void 0:subProduct.product_category_name},brand_id:{value:subProduct===null||subProduct===void 0?void 0:subProduct.brand_id,label:subProduct===null||subProduct===void 0?void 0:subProduct.brand_name},barcode_symbol:subProduct===null||subProduct===void 0?void 0:subProduct.barcode_symbol,product_unit:Number(subProduct===null||subProduct===void 0?void 0:subProduct.product_unit),sale_unit:getSaleUnit,purchase_unit:getPurchaseUnit,quantity_limit:subProduct===null||subProduct===void 0?void 0:subProduct.quantity_limit,notes:subProduct===null||subProduct===void 0?void 0:subProduct.notes,images:product===null||product===void 0?void 0:product.attributes.images,status_id:{label:getFormattedMessage(\"status.filter.received.label\"),value:1},isEdit:true,id:product.id}));const getProductUnit=mainProductItemsValue&&base.filter(fill=>{var _mainProductItemsValu;return Number(fill===null||fill===void 0?void 0:fill.id)===Number((_mainProductItemsValu=mainProductItemsValue[0])===null||_mainProductItemsValu===void 0?void 0:_mainProductItemsValu.product_unit);});return/*#__PURE__*/_jsxs(MasterLayout,{children:[/*#__PURE__*/_jsx(TopProgressBar,{}),/*#__PURE__*/_jsx(HeaderTitle,{title:getFormattedMessage('product.edit.title'),to:\"/app/products\"}),mainProductItemsValue.length>=1&&/*#__PURE__*/_jsx(ProductForm,{singleProduct:mainProductItemsValue,productUnit:getProductUnit,baseUnits:base,id:id})]});};const mapStateToProps=state=>{const{products,base}=state;return{products,base};};export default connect(mapStateToProps,{fetchMainProduct,fetchAllBaseUnits,productUnitDropdown,fetchAllunits})(EditProduct);","map":{"version":3,"names":["React","useEffect","useState","connect","useParams","fetchMainProduct","ProductForm","HeaderTitle","MasterLayout","productUnitDropdown","fetchAllunits","getFormattedMessage","TopProgressBar","fetchAllBaseUnits","jsx","_jsx","jsxs","_jsxs","EditProduct","props","_singleProduct$","products","base","id","singleProduct","setSingleProduct","length","subProduct","attributes","getSaleUnit","sale_unit_name","label","name","value","getPurchaseUnit","purchase_unit_name","mainProductItemsValue","map","product","code","product_type","product_category_id","product_category_name","brand_id","brand_name","barcode_symbol","product_unit","Number","sale_unit","purchase_unit","quantity_limit","notes","images","status_id","isEdit","getProductUnit","filter","fill","_mainProductItemsValu","children","title","to","productUnit","baseUnits","mapStateToProps","state"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/product/EditProduct.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { useParams } from 'react-router-dom'\nimport { fetchMainProduct } from '../../store/action/productAction';\nimport ProductForm from './ProductForm';\nimport HeaderTitle from '../header/HeaderTitle';\nimport MasterLayout from '../MasterLayout';\nimport { productUnitDropdown } from '../../store/action/productUnitAction';\nimport { fetchAllunits } from '../../store/action/unitsAction';\nimport { getFormattedMessage } from '../../shared/sharedMethod';\nimport TopProgressBar from \"../../shared/components/loaders/TopProgressBar\";\nimport { fetchAllBaseUnits } from \"../../store/action/baseUnitsAction\";\n\nconst EditProduct = (props) => {\n    const { fetchMainProduct, products, fetchAllBaseUnits, base } = props;\n    const { id } = useParams();\n    const [singleProduct, setSingleProduct] = useState({});\n    useEffect(() => {\n        fetchAllBaseUnits();\n        fetchMainProduct(id);\n    }, []);\n\n    useEffect(() => {\n        if (products.length == 1) {\n            setSingleProduct(products);\n        }\n    }, [products]);\n\n    const subProduct = singleProduct.length >= 1 && singleProduct[0]?.attributes.products[0];\n    const getSaleUnit = subProduct && subProduct.sale_unit_name ? { label: subProduct.sale_unit_name.name, value: subProduct.sale_unit_name.id } : ''\n    const getPurchaseUnit = subProduct && subProduct.purchase_unit_name ? { label: subProduct.purchase_unit_name.name, value: subProduct.purchase_unit_name.id } : ''\n\n    const mainProductItemsValue = singleProduct.length >= 1 && singleProduct.map(product => ({\n        name: product?.attributes.name,\n        code: product?.attributes.code,\n        product_type: product?.attributes.product_type,\n        product_category_id: {\n            value: subProduct?.product_category_id,\n            label: subProduct?.product_category_name\n        },\n        brand_id: {\n            value: subProduct?.brand_id,\n            label: subProduct?.brand_name\n        },\n        barcode_symbol: subProduct?.barcode_symbol,\n        product_unit: Number(subProduct?.product_unit),\n        sale_unit: getSaleUnit,\n        purchase_unit: getPurchaseUnit,\n        quantity_limit: subProduct?.quantity_limit,\n        notes: subProduct?.notes,\n        images: product?.attributes.images,\n        status_id: {\n            label: getFormattedMessage(\"status.filter.received.label\"),\n            value: 1,\n        },\n        isEdit: true,\n        id: product.id,\n    }));\n\n    const getProductUnit = mainProductItemsValue && base.filter((fill) => Number(fill?.id) === Number(mainProductItemsValue[0]?.product_unit))\n\n    return (\n        <MasterLayout>\n            <TopProgressBar />\n            <HeaderTitle title={getFormattedMessage('product.edit.title')} to='/app/products' />\n            {mainProductItemsValue.length >= 1 && <ProductForm singleProduct={mainProductItemsValue} productUnit={getProductUnit} baseUnits={base} id={id} />}\n        </MasterLayout>\n    )\n};\n\nconst mapStateToProps = (state) => {\n    const { products, base } = state;\n    return { products, base }\n};\n\nexport default connect(mapStateToProps, { fetchMainProduct, fetchAllBaseUnits, productUnitDropdown, fetchAllunits })(EditProduct);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}