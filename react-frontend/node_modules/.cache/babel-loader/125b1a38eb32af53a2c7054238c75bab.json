{"ast":null,"code":"import React,{useEffect}from'react';import{connect}from'react-redux';import SaleReturnForm from'./SaleReturnForm';import MasterLayout from'../MasterLayout';import HeaderTitle from'../header/HeaderTitle';import{fetchAllCustomer}from'../../store/action/customerAction';import{fetchAllWarehouses}from'../../store/action/warehouseAction';import{addSaleReturn}from'../../store/action/salesReturnAction';import{getFormattedMessage}from'../../shared/sharedMethod';import{useParams}from\"react-router-dom\";import{fetchSale}from\"../../store/action/salesAction\";import TopProgressBar from\"../../shared/components/loaders/TopProgressBar\";import Spinner from\"../../shared/components/loaders/Spinner\";import saleReturnStatus from\"./saleReturnStatus.json\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CreateSaleReturn=props=>{const{addSaleReturn,customers,sales,isLoading,fetchSale,fetchAllCustomer,warehouses,fetchAllWarehouses}=props;const{id}=useParams();useEffect(()=>{fetchAllCustomer();fetchAllWarehouses();fetchSale(id);},[]);const addSaleData=(formValue,navigate)=>{addSaleReturn(formValue,navigate);};const selectedStatus=sales.attributes&&sales.attributes.status&&saleReturnStatus.filter(item=>item.value===sales.attributes.status);const itemsValue=sales&&sales.attributes&&{date:sales.attributes.date,warehouse_id:{value:sales.attributes.warehouse_id,label:sales.attributes.warehouse_name},customer_id:{value:sales.attributes.customer_id,label:sales.attributes.customer_name},tax_rate:0,tax_amount:0,discount:0,shipping:0,grand_total:0,amount:sales.attributes.amount,sale_items:sales.attributes.sale_items.map(item=>({code:item.product&&item.product.code,name:item.product&&item.product.name,product_unit:item.product.product_unit,product_id:item.product_id,short_name:item.sale_unit&&item.sale_unit.short_name,stock_alert:item.product&&item.product.stock_alert,product_price:item.product_price,fix_net_unit:item.product_price,net_unit_price:item.product_price,tax_type:item.tax_type,tax_value:item.tax_value,tax_amount:item.tax_amount,discount_type:item.discount_type,discount_value:item.discount_value,discount_amount:item.discount_amount,isEdit:true,stock:\"\",sold_quantity:item.quantity,sub_total:item.sub_total,sale_unit:item.sale_unit&&item.sale_unit.id&&item.sale_unit.id,quantity:0,id:item.id,sale_item_id:item.id,newItem:'',isSaleReturn:true})),id:sales.id,sale_id:sales.id,status_id:sales.attributes.status,// status_id: {\n//     label: selectedStatus[0] && selectedStatus[0].label,\n//     value: selectedStatus[0] && selectedStatus[0].value\n// },\nnote:sales.attributes.note,sale_reference:sales.attributes.reference_code,isCreateSaleReturn:true};return/*#__PURE__*/_jsxs(MasterLayout,{children:[/*#__PURE__*/_jsx(TopProgressBar,{}),/*#__PURE__*/_jsx(HeaderTitle,{title:getFormattedMessage('sale-return.create.title'),to:\"/app/sales\"}),isLoading?/*#__PURE__*/_jsx(Spinner,{}):sales&&/*#__PURE__*/_jsx(SaleReturnForm,{addSaleData:addSaleData,singleSale:itemsValue,id:id,customers:customers,warehouses:warehouses})]});};const mapStateToProps=state=>{const{customers,sales,warehouses,totalRecord,isLoading,addSaleReturn}=state;return{customers,sales,warehouses,totalRecord,isLoading,addSaleReturn};};export default connect(mapStateToProps,{addSaleReturn,fetchSale,fetchAllCustomer,fetchAllWarehouses})(CreateSaleReturn);","map":{"version":3,"names":["React","useEffect","connect","SaleReturnForm","MasterLayout","HeaderTitle","fetchAllCustomer","fetchAllWarehouses","addSaleReturn","getFormattedMessage","useParams","fetchSale","TopProgressBar","Spinner","saleReturnStatus","jsx","_jsx","jsxs","_jsxs","CreateSaleReturn","props","customers","sales","isLoading","warehouses","id","addSaleData","formValue","navigate","selectedStatus","attributes","status","filter","item","value","itemsValue","date","warehouse_id","label","warehouse_name","customer_id","customer_name","tax_rate","tax_amount","discount","shipping","grand_total","amount","sale_items","map","code","product","name","product_unit","product_id","short_name","sale_unit","stock_alert","product_price","fix_net_unit","net_unit_price","tax_type","tax_value","discount_type","discount_value","discount_amount","isEdit","stock","sold_quantity","quantity","sub_total","sale_item_id","newItem","isSaleReturn","sale_id","status_id","note","sale_reference","reference_code","isCreateSaleReturn","children","title","to","singleSale","mapStateToProps","state","totalRecord"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/saleReturn/CreateSaleReturn.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport SaleReturnForm from './SaleReturnForm';\nimport MasterLayout from '../MasterLayout';\nimport HeaderTitle from '../header/HeaderTitle';\nimport { fetchAllCustomer } from '../../store/action/customerAction';\nimport { fetchAllWarehouses } from '../../store/action/warehouseAction';\nimport { addSaleReturn } from '../../store/action/salesReturnAction';\nimport { getFormattedMessage } from '../../shared/sharedMethod';\nimport { useParams } from \"react-router-dom\";\nimport { fetchSale } from \"../../store/action/salesAction\";\nimport TopProgressBar from \"../../shared/components/loaders/TopProgressBar\";\nimport Spinner from \"../../shared/components/loaders/Spinner\";\nimport saleReturnStatus from \"./saleReturnStatus.json\";\n\nconst CreateSaleReturn = ( props ) => {\n    const { addSaleReturn, customers, sales, isLoading, fetchSale, fetchAllCustomer, warehouses, fetchAllWarehouses } = props;\n\n    const { id } = useParams()\n\n    useEffect( () => {\n        fetchAllCustomer();\n        fetchAllWarehouses();\n        fetchSale( id )\n    }, [] );\n\n    const addSaleData = ( formValue, navigate ) => {\n        addSaleReturn( formValue, navigate )\n    }\n\n    const selectedStatus = sales.attributes && sales.attributes.status && saleReturnStatus.filter( ( item ) => item.value === sales.attributes.status )\n\n    const itemsValue = sales && sales.attributes && {\n        date: sales.attributes.date,\n        warehouse_id: {\n            value: sales.attributes.warehouse_id,\n            label: sales.attributes.warehouse_name,\n        },\n        customer_id: {\n            value: sales.attributes.customer_id,\n            label: sales.attributes.customer_name,\n        },\n        tax_rate: 0,\n        tax_amount: 0,\n        discount: 0,\n        shipping: 0,\n        grand_total: 0,\n        amount: sales.attributes.amount,\n        sale_items: sales.attributes.sale_items.map( ( item ) => ( {\n            code: item.product && item.product.code,\n            name: item.product && item.product.name,\n            product_unit: item.product.product_unit,\n            product_id: item.product_id,\n            short_name: item.sale_unit && item.sale_unit.short_name,\n            stock_alert: item.product && item.product.stock_alert,\n            product_price: item.product_price,\n            fix_net_unit: item.product_price,\n            net_unit_price: item.product_price,\n            tax_type: item.tax_type,\n            tax_value: item.tax_value,\n            tax_amount: item.tax_amount,\n            discount_type: item.discount_type,\n            discount_value: item.discount_value,\n            discount_amount: item.discount_amount,\n            isEdit: true,\n            stock: \"\",\n            sold_quantity: item.quantity,\n            sub_total: item.sub_total,\n            sale_unit: item.sale_unit && item.sale_unit.id && item.sale_unit.id,\n            quantity: 0,\n            id: item.id,\n            sale_item_id: item.id,\n            newItem: '',\n            isSaleReturn: true,\n        } ) ),\n        id: sales.id,\n        sale_id: sales.id,\n        status_id: sales.attributes.status,\n        // status_id: {\n        //     label: selectedStatus[0] && selectedStatus[0].label,\n        //     value: selectedStatus[0] && selectedStatus[0].value\n        // },\n        note: sales.attributes.note,\n        sale_reference: sales.attributes.reference_code,\n        isCreateSaleReturn: true,\n    };\n\n    return (\n        <MasterLayout>\n            <TopProgressBar />\n            <HeaderTitle title={getFormattedMessage( 'sale-return.create.title' )} to='/app/sales' />\n            {isLoading ? <Spinner /> :\n                sales && <SaleReturnForm addSaleData={addSaleData} singleSale={itemsValue} id={id} customers={customers} warehouses={warehouses} />}\n        </MasterLayout>\n    )\n}\n\nconst mapStateToProps = ( state ) => {\n    const { customers, sales, warehouses, totalRecord, isLoading, addSaleReturn } = state;\n    return { customers, sales, warehouses, totalRecord, isLoading, addSaleReturn }\n};\n\nexport default connect( mapStateToProps, { addSaleReturn, fetchSale, fetchAllCustomer, fetchAllWarehouses } )( CreateSaleReturn );\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}