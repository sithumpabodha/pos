{"ast":null,"code":"import{Tokens,errorMessage}from'../constants';import{environment}from'./environment';export default{setupInterceptors:function(axios){let isToken=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let isFormData=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;axios.interceptors.request.use(config=>{if(isToken){return config;}let isToken=localStorage.getItem(Tokens.ADMIN);if(isToken){config.headers['Authorization']=`Bearer ${isToken}`;}if(!isToken){if(!window.location.href.includes('login')&&!window.location.href.includes('reset-password')&&!window.location.href.includes('forgot-password')){window.location.href=environment.URL+'#/'+'login';}}if(isFormData){config.headers['Content-Type']='multipart/form-data';}return config;},error=>{return Promise.reject(error);});axios.interceptors.response.use(response=>successHandler(response),error=>errorHandler(error));const errorHandler=error=>{if(error.response.status===401||error.response.data.message===errorMessage.TOKEN_NOT_PROVIDED||error.response.data.message===errorMessage.TOKEN_INVALID||error.response.data.message===errorMessage.TOKEN_INVALID_SIGNATURE||error.response.data.message===errorMessage.TOKEN_EXPIRED){localStorage.removeItem(Tokens.ADMIN);localStorage.removeItem(Tokens.USER);localStorage.removeItem(Tokens.GET_PERMISSIONS);window.location.href=environment.URL+'#'+'/login';}else if(error.response.status===403||error.response.status===404){window.location.href=environment.URL+'#'+'/app/dashboard';}else{return Promise.reject({...error});}};const successHandler=response=>{return response;};}};","map":{"version":3,"names":["Tokens","errorMessage","environment","setupInterceptors","axios","isToken","arguments","length","undefined","isFormData","interceptors","request","use","config","localStorage","getItem","ADMIN","headers","window","location","href","includes","URL","error","Promise","reject","response","successHandler","errorHandler","status","data","message","TOKEN_NOT_PROVIDED","TOKEN_INVALID","TOKEN_INVALID_SIGNATURE","TOKEN_EXPIRED","removeItem","USER","GET_PERMISSIONS"],"sources":["C:/Users/Sithu/Music/react-frontend/src/config/axiosInterceptor.js"],"sourcesContent":["import {Tokens, errorMessage} from '../constants';\nimport {environment} from './environment'\n\nexport default {\n    setupInterceptors: (axios, isToken = false, isFormData = false) => {\n        axios.interceptors.request.use((config) => {\n                if (isToken) {\n                    return config;\n                }\n                let isToken = localStorage.getItem(Tokens.ADMIN);\n                if (isToken) {\n                    config.headers['Authorization'] = `Bearer ${isToken}`;\n                }\n                if (!isToken) {\n                    if (!window.location.href.includes('login') && !window.location.href.includes('reset-password') && !window.location.href.includes('forgot-password')) {\n                        window.location.href = environment.URL + '#/' + 'login';\n                    }\n                }\n                if (isFormData) {\n                    config.headers['Content-Type'] = 'multipart/form-data';\n                }\n                return config;\n            },\n            (error) => {\n                return Promise.reject(error);\n            }\n        );\n        axios.interceptors.response.use(\n            response => successHandler(response),\n            error => errorHandler(error)\n        );\n        const errorHandler = (error) => {\n            if (error.response.status === 401\n                || error.response.data.message === errorMessage.TOKEN_NOT_PROVIDED\n                || error.response.data.message === errorMessage.TOKEN_INVALID\n                || error.response.data.message === errorMessage.TOKEN_INVALID_SIGNATURE\n                || error.response.data.message === errorMessage.TOKEN_EXPIRED) {\n                localStorage.removeItem(Tokens.ADMIN);\n                localStorage.removeItem(Tokens.USER);\n                localStorage.removeItem(Tokens.GET_PERMISSIONS);\n                window.location.href = environment.URL + '#' + '/login';\n            }else if(error.response.status === 403 || error.response.status === 404) {\n                window.location.href = environment.URL + '#' + '/app/dashboard';\n            }else {\n                return Promise.reject({...error})\n            }\n        };\n        const successHandler = (response) => {\n            return response;\n        };\n    }\n};\n"],"mappings":"AAAA,OAAQA,MAAM,CAAEC,YAAY,KAAO,cAAc,CACjD,OAAQC,WAAW,KAAO,eAAe,CAEzC,cAAe,CACXC,iBAAiB,CAAE,QAAAA,CAACC,KAAK,CAA0C,IAAxC,CAAAC,OAAO,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,KAAK,IAAE,CAAAG,UAAU,CAAAH,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,KAAK,CAC1DF,KAAK,CAACM,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,EAAK,CACnC,GAAIR,OAAO,CAAE,CACT,MAAO,CAAAQ,MAAM,CACjB,CACA,GAAI,CAAAR,OAAO,CAAGS,YAAY,CAACC,OAAO,CAACf,MAAM,CAACgB,KAAK,CAAC,CAChD,GAAIX,OAAO,CAAE,CACTQ,MAAM,CAACI,OAAO,CAAC,eAAe,CAAC,CAAG,UAAUZ,OAAO,EAAE,CACzD,CACA,GAAI,CAACA,OAAO,CAAE,CACV,GAAI,CAACa,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,QAAQ,CAAC,OAAO,CAAC,EAAI,CAACH,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,QAAQ,CAAC,gBAAgB,CAAC,EAAI,CAACH,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,QAAQ,CAAC,iBAAiB,CAAC,CAAE,CAClJH,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAGlB,WAAW,CAACoB,GAAG,CAAG,IAAI,CAAG,OAAO,CAC3D,CACJ,CACA,GAAIb,UAAU,CAAE,CACZI,MAAM,CAACI,OAAO,CAAC,cAAc,CAAC,CAAG,qBAAqB,CAC1D,CACA,MAAO,CAAAJ,MAAM,CACjB,CAAC,CACAU,KAAK,EAAK,CACP,MAAO,CAAAC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAChC,CACJ,CAAC,CACDnB,KAAK,CAACM,YAAY,CAACgB,QAAQ,CAACd,GAAG,CAC3Bc,QAAQ,EAAIC,cAAc,CAACD,QAAQ,CAAC,CACpCH,KAAK,EAAIK,YAAY,CAACL,KAAK,CAC/B,CAAC,CACD,KAAM,CAAAK,YAAY,CAAIL,KAAK,EAAK,CAC5B,GAAIA,KAAK,CAACG,QAAQ,CAACG,MAAM,GAAK,GAAG,EAC1BN,KAAK,CAACG,QAAQ,CAACI,IAAI,CAACC,OAAO,GAAK9B,YAAY,CAAC+B,kBAAkB,EAC/DT,KAAK,CAACG,QAAQ,CAACI,IAAI,CAACC,OAAO,GAAK9B,YAAY,CAACgC,aAAa,EAC1DV,KAAK,CAACG,QAAQ,CAACI,IAAI,CAACC,OAAO,GAAK9B,YAAY,CAACiC,uBAAuB,EACpEX,KAAK,CAACG,QAAQ,CAACI,IAAI,CAACC,OAAO,GAAK9B,YAAY,CAACkC,aAAa,CAAE,CAC/DrB,YAAY,CAACsB,UAAU,CAACpC,MAAM,CAACgB,KAAK,CAAC,CACrCF,YAAY,CAACsB,UAAU,CAACpC,MAAM,CAACqC,IAAI,CAAC,CACpCvB,YAAY,CAACsB,UAAU,CAACpC,MAAM,CAACsC,eAAe,CAAC,CAC/CpB,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAGlB,WAAW,CAACoB,GAAG,CAAG,GAAG,CAAG,QAAQ,CAC3D,CAAC,IAAK,IAAGC,KAAK,CAACG,QAAQ,CAACG,MAAM,GAAK,GAAG,EAAIN,KAAK,CAACG,QAAQ,CAACG,MAAM,GAAK,GAAG,CAAE,CACrEX,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAGlB,WAAW,CAACoB,GAAG,CAAG,GAAG,CAAG,gBAAgB,CACnE,CAAC,IAAK,CACF,MAAO,CAAAE,OAAO,CAACC,MAAM,CAAC,CAAC,GAAGF,KAAK,CAAC,CAAC,CACrC,CACJ,CAAC,CACD,KAAM,CAAAI,cAAc,CAAID,QAAQ,EAAK,CACjC,MAAO,CAAAA,QAAQ,CACnB,CAAC,CACL,CACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}