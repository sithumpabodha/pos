{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import moment from\"moment\";import MasterLayout from\"../MasterLayout\";import{useNavigate}from\"react-router-dom\";import ReactDataTable from\"../../shared/table/ReactDataTable\";import{fetchExpenses}from\"../../store/action/expenseAction\";import DeleteExpense from\"./DeleteExpense\";import TabTitle from\"../../shared/tab-title/TabTitle\";import{currencySymbolHandling,getFormattedDate,getFormattedMessage,placeholderText}from\"../../shared/sharedMethod\";import ActionButton from\"../../shared/action-buttons/ActionButton\";import{fetchFrontSetting}from\"../../store/action/frontSettingAction\";import TopProgressBar from\"../../shared/components/loaders/TopProgressBar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Expenses=props=>{const{fetchExpenses,expenses,totalRecord,isLoading,frontSetting,fetchFrontSetting,allConfigData}=props;const[deleteModel,setDeleteModel]=useState(false);const[isDelete,setIsDelete]=useState(null);const navigate=useNavigate();useEffect(()=>{fetchFrontSetting();},[]);const onClickDeleteModel=function(){let isDelete=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;setDeleteModel(!deleteModel);setIsDelete(isDelete);};const onChange=filter=>{fetchExpenses(filter,true);};const goToEditProduct=item=>{navigate(`/app/expenses/edit/${item.id}`);};const currencySymbol=frontSetting&&frontSetting.value&&frontSetting.value.currency_symbol;const itemsValue=currencySymbol&&expenses.length>=0&&expenses.map(expense=>({date:getFormattedDate(expense.attributes.date,allConfigData&&allConfigData),time:moment(expense.attributes.created_at).format(\"LT\"),reference_code:expense.attributes.reference_code,title:expense.attributes.title,warehouse_name:expense.attributes.warehouse_name,expense_category_name:expense.attributes.expense_category_name,amount:expense.attributes.amount,details:expense.attributes.details,id:expense.id,currency:currencySymbol}));const columns=[{name:getFormattedMessage(\"dashboard.recentSales.reference.label\"),sortField:\"reference_code\",sortable:true,cell:row=>{return/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-light-danger\",children:/*#__PURE__*/_jsx(\"span\",{children:row.reference_code})});}},{name:getFormattedMessage(\"expense.input.title.label\"),selector:row=>row.title,sortField:\"title\",sortable:false},{name:getFormattedMessage(\"warehouse.title\"),selector:row=>row.warehouse_name,sortField:\"warehouse_name\",sortable:false},{name:getFormattedMessage(\"expense-category.title\"),selector:row=>row.expense_category_name,sortField:\"expense_category_name\",sortable:false},{name:getFormattedMessage(\"expense.input.amount.label\"),selector:row=>currencySymbolHandling(allConfigData,row.currency,row.amount),sortField:\"amount\",sortable:true},{name:getFormattedMessage(\"globally.react-table.column.created-date.label\"),selector:row=>row.date,sortField:\"created_at\",sortable:true,cell:row=>{return/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-light-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-1\",children:row.time}),row.date]});}},{name:getFormattedMessage(\"react-data-table.action.column.label\"),right:true,ignoreRowClick:true,allowOverflow:true,button:true,cell:row=>/*#__PURE__*/_jsx(ActionButton,{item:row,goToEditProduct:goToEditProduct,isEditMode:true,onClickDeleteModel:onClickDeleteModel})}];return/*#__PURE__*/_jsxs(MasterLayout,{children:[/*#__PURE__*/_jsx(TopProgressBar,{}),/*#__PURE__*/_jsx(TabTitle,{title:placeholderText(\"expenses.title\")}),/*#__PURE__*/_jsx(ReactDataTable,{columns:columns,items:itemsValue,onChange:onChange,isLoading:isLoading,ButtonValue:getFormattedMessage(\"expense.create.title\"),totalRows:totalRecord,to:\"#/app/expenses/create\"}),/*#__PURE__*/_jsx(DeleteExpense,{onClickDeleteModel:onClickDeleteModel,deleteModel:deleteModel,onDelete:isDelete})]});};const mapStateToProps=state=>{const{expenses,totalRecord,isLoading,frontSetting,allConfigData}=state;return{expenses,totalRecord,isLoading,frontSetting,allConfigData};};export default connect(mapStateToProps,{fetchExpenses,fetchFrontSetting})(Expenses);","map":{"version":3,"names":["React","useEffect","useState","connect","moment","MasterLayout","useNavigate","ReactDataTable","fetchExpenses","DeleteExpense","TabTitle","currencySymbolHandling","getFormattedDate","getFormattedMessage","placeholderText","ActionButton","fetchFrontSetting","TopProgressBar","jsx","_jsx","jsxs","_jsxs","Expenses","props","expenses","totalRecord","isLoading","frontSetting","allConfigData","deleteModel","setDeleteModel","isDelete","setIsDelete","navigate","onClickDeleteModel","arguments","length","undefined","onChange","filter","goToEditProduct","item","id","currencySymbol","value","currency_symbol","itemsValue","map","expense","date","attributes","time","created_at","format","reference_code","title","warehouse_name","expense_category_name","amount","details","currency","columns","name","sortField","sortable","cell","row","className","children","selector","right","ignoreRowClick","allowOverflow","button","isEditMode","items","ButtonValue","totalRows","to","onDelete","mapStateToProps","state"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/expense/Expenses.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport moment from \"moment\";\nimport MasterLayout from \"../MasterLayout\";\nimport { useNavigate } from \"react-router-dom\";\nimport ReactDataTable from \"../../shared/table/ReactDataTable\";\nimport { fetchExpenses } from \"../../store/action/expenseAction\";\nimport DeleteExpense from \"./DeleteExpense\";\nimport TabTitle from \"../../shared/tab-title/TabTitle\";\nimport {\n    currencySymbolHandling,\n    getFormattedDate,\n    getFormattedMessage,\n    placeholderText,\n} from \"../../shared/sharedMethod\";\nimport ActionButton from \"../../shared/action-buttons/ActionButton\";\nimport { fetchFrontSetting } from \"../../store/action/frontSettingAction\";\nimport TopProgressBar from \"../../shared/components/loaders/TopProgressBar\";\n\nconst Expenses = (props) => {\n    const {\n        fetchExpenses,\n        expenses,\n        totalRecord,\n        isLoading,\n        frontSetting,\n        fetchFrontSetting,\n        allConfigData,\n    } = props;\n    const [deleteModel, setDeleteModel] = useState(false);\n    const [isDelete, setIsDelete] = useState(null);\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        fetchFrontSetting();\n    }, []);\n\n    const onClickDeleteModel = (isDelete = null) => {\n        setDeleteModel(!deleteModel);\n        setIsDelete(isDelete);\n    };\n\n    const onChange = (filter) => {\n        fetchExpenses(filter, true);\n    };\n\n    const goToEditProduct = (item) => {\n        navigate(`/app/expenses/edit/${item.id}`);\n    };\n\n    const currencySymbol =\n        frontSetting &&\n        frontSetting.value &&\n        frontSetting.value.currency_symbol;\n\n    const itemsValue =\n        currencySymbol &&\n        expenses.length >= 0 &&\n        expenses.map((expense) => ({\n            date: getFormattedDate(\n                expense.attributes.date,\n                allConfigData && allConfigData\n            ),\n            time: moment(expense.attributes.created_at).format(\"LT\"),\n            reference_code: expense.attributes.reference_code,\n            title: expense.attributes.title,\n            warehouse_name: expense.attributes.warehouse_name,\n            expense_category_name: expense.attributes.expense_category_name,\n            amount: expense.attributes.amount,\n            details: expense.attributes.details,\n            id: expense.id,\n            currency: currencySymbol,\n        }));\n\n    const columns = [\n        {\n            name: getFormattedMessage(\"dashboard.recentSales.reference.label\"),\n            sortField: \"reference_code\",\n            sortable: true,\n            cell: (row) => {\n                return (\n                    <span className=\"badge bg-light-danger\">\n                        <span>{row.reference_code}</span>\n                    </span>\n                );\n            },\n        },\n        {\n            name: getFormattedMessage(\"expense.input.title.label\"),\n            selector: (row) => row.title,\n            sortField: \"title\",\n            sortable: false,\n        },\n        {\n            name: getFormattedMessage(\"warehouse.title\"),\n            selector: (row) => row.warehouse_name,\n            sortField: \"warehouse_name\",\n            sortable: false,\n        },\n        {\n            name: getFormattedMessage(\"expense-category.title\"),\n            selector: (row) => row.expense_category_name,\n            sortField: \"expense_category_name\",\n            sortable: false,\n        },\n        {\n            name: getFormattedMessage(\"expense.input.amount.label\"),\n            selector: (row) =>\n                currencySymbolHandling(allConfigData, row.currency, row.amount),\n            sortField: \"amount\",\n            sortable: true,\n        },\n        {\n            name: getFormattedMessage(\n                \"globally.react-table.column.created-date.label\"\n            ),\n            selector: (row) => row.date,\n            sortField: \"created_at\",\n            sortable: true,\n            cell: (row) => {\n                return (\n                    <span className=\"badge bg-light-info\">\n                        <div className=\"mb-1\">{row.time}</div>\n                        {row.date}\n                    </span>\n                );\n            },\n        },\n        {\n            name: getFormattedMessage(\"react-data-table.action.column.label\"),\n            right: true,\n            ignoreRowClick: true,\n            allowOverflow: true,\n            button: true,\n            cell: (row) => (\n                <ActionButton\n                    item={row}\n                    goToEditProduct={goToEditProduct}\n                    isEditMode={true}\n                    onClickDeleteModel={onClickDeleteModel}\n                />\n            ),\n        },\n    ];\n\n    return (\n        <MasterLayout>\n            <TopProgressBar />\n            <TabTitle title={placeholderText(\"expenses.title\")} />\n            <ReactDataTable\n                columns={columns}\n                items={itemsValue}\n                onChange={onChange}\n                isLoading={isLoading}\n                ButtonValue={getFormattedMessage(\"expense.create.title\")}\n                totalRows={totalRecord}\n                to=\"#/app/expenses/create\"\n            />\n            <DeleteExpense\n                onClickDeleteModel={onClickDeleteModel}\n                deleteModel={deleteModel}\n                onDelete={isDelete}\n            />\n        </MasterLayout>\n    );\n};\n\nconst mapStateToProps = (state) => {\n    const { expenses, totalRecord, isLoading, frontSetting, allConfigData } =\n        state;\n    return { expenses, totalRecord, isLoading, frontSetting, allConfigData };\n};\n\nexport default connect(mapStateToProps, { fetchExpenses, fetchFrontSetting })(\n    Expenses\n);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}