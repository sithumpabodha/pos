{"ast":null,"code":"import React,{useEffect}from'react';import SaleReturnForm from'./SaleReturnForm';import MasterLayout from'../MasterLayout';import HeaderTitle from'../header/HeaderTitle';import{connect}from'react-redux';import{fetchAllWarehouses}from'../../store/action/warehouseAction';import{fetchAllCustomer}from'../../store/action/customerAction';import{useParams}from'react-router-dom';import{fetchSaleReturn}from'../../store/action/salesReturnAction';import saleReturnStatus from'./saleReturnStatus.json';import{getFormattedMessage}from'../../shared/sharedMethod';import Spinner from\"../../shared/components/loaders/Spinner\";import TopProgressBar from\"../../shared/components/loaders/TopProgressBar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const EditSaleReturn=props=>{const{fetchSaleReturn,salesReturn,customers,fetchAllCustomer,warehouses,fetchAllWarehouses,isLoading}=props;const{id}=useParams();const isSaleReturnFromSale=true;useEffect(()=>{fetchAllCustomer();fetchAllWarehouses();fetchSaleReturn(id,isSaleReturnFromSale);},[]);const selectedStatus=salesReturn.attributes&&salesReturn.attributes.status&&saleReturnStatus.filter(item=>item.value===salesReturn.attributes.status);// salesReturn && salesReturn.attributes &&  salesReturn.attributes.sale_return_items.forEach((item) => {\n//     item.code = item.product && item.product.code\n//     item.name = item.product && item.product.name\n//     item.stock_alert = item.product && item.product.stock_alert\n//     item.short_name = item.sale_unit.short_name\n//     item.fix_net_unit = item.product_price\n//     item.newItem = ''\n//     item.sale_return_item_id = item.id\n//     item.sale_unit = item.product && item.product.sale_unit ? Number(item.product.sale_unit) : item.sale_unit\n// });\nconst itemsValue=salesReturn&&salesReturn.attributes&&{date:salesReturn.attributes.date,warehouse_id:{value:salesReturn.attributes.warehouse_id,label:salesReturn.attributes.warehouse_name},customer_id:{value:salesReturn.attributes.customer_id,label:salesReturn.attributes.customer_name},tax_rate:salesReturn.attributes.tax_rate,tax_amount:salesReturn.attributes.tax_amount,discount:salesReturn.attributes.discount,shipping:salesReturn.attributes.shipping,grand_total:salesReturn.attributes.grand_total,amount:salesReturn.attributes.amount,sale_items:salesReturn.attributes.sale_return_items.map(item=>({code:item.product&&item.product.code,name:item.product&&item.product.name,product_unit:item.product.product_unit,product_id:item.product_id,short_name:item.sale_unit&&item.sale_unit.short_name,stock_alert:item.product&&item.product.stock_alert,product_price:item.product_price,fix_net_unit:item.product_price,net_unit_price:item.product_price,tax_type:item.tax_type,tax_value:item.tax_value,tax_amount:item.tax_amount,discount_type:item.discount_type,discount_value:item.discount_value,discount_amount:item.discount_amount,isEdit:true,stock:\"\",sold_quantity:item.sold_quantity,sub_total:item.sub_total,sale_unit:item.sale_unit&&item.sale_unit.id&&item.sale_unit.id,quantity:item.quantity,id:item.id,sale_return_item_id:item.id,newItem:'',isSaleReturnEdit:true})),id:salesReturn.id,status_id:salesReturn.attributes.status,// status_id: {\n//     label: selectedStatus[0] && selectedStatus[0].label,\n//     value: selectedStatus[0] && selectedStatus[0].value\n// },\nnote:salesReturn.attributes.note,// isCreateSaleReturn: true,\nisSaleReturnEdit:true,sale_return_id:salesReturn.id,sale_id:id,sale_reference:salesReturn.attributes.reference_code};return/*#__PURE__*/_jsxs(MasterLayout,{children:[/*#__PURE__*/_jsx(TopProgressBar,{}),/*#__PURE__*/_jsx(HeaderTitle,{title:getFormattedMessage('sale-return.edit.title'),to:\"/app/sales\"}),isLoading?/*#__PURE__*/_jsx(Spinner,{}):salesReturn&&/*#__PURE__*/_jsx(SaleReturnForm,{singleSale:itemsValue,isEdit:true,id:itemsValue===null||itemsValue===void 0?void 0:itemsValue.sale_return_id,customers:customers,warehouses:warehouses})]});};const mapStateToProps=state=>{const{salesReturn,customers,warehouses,isLoading}=state;return{salesReturn,customers,warehouses,isLoading};};export default connect(mapStateToProps,{fetchSaleReturn,fetchAllCustomer,fetchAllWarehouses})(EditSaleReturn);","map":{"version":3,"names":["React","useEffect","SaleReturnForm","MasterLayout","HeaderTitle","connect","fetchAllWarehouses","fetchAllCustomer","useParams","fetchSaleReturn","saleReturnStatus","getFormattedMessage","Spinner","TopProgressBar","jsx","_jsx","jsxs","_jsxs","EditSaleReturn","props","salesReturn","customers","warehouses","isLoading","id","isSaleReturnFromSale","selectedStatus","attributes","status","filter","item","value","itemsValue","date","warehouse_id","label","warehouse_name","customer_id","customer_name","tax_rate","tax_amount","discount","shipping","grand_total","amount","sale_items","sale_return_items","map","code","product","name","product_unit","product_id","short_name","sale_unit","stock_alert","product_price","fix_net_unit","net_unit_price","tax_type","tax_value","discount_type","discount_value","discount_amount","isEdit","stock","sold_quantity","sub_total","quantity","sale_return_item_id","newItem","isSaleReturnEdit","status_id","note","sale_return_id","sale_id","sale_reference","reference_code","children","title","to","singleSale","mapStateToProps","state"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/saleReturn/EditSaleReturnFromSale.js"],"sourcesContent":["import React, {useEffect} from 'react';\nimport SaleReturnForm from './SaleReturnForm';\nimport MasterLayout from '../MasterLayout';\nimport HeaderTitle from '../header/HeaderTitle';\nimport {connect} from 'react-redux';\nimport {fetchAllWarehouses} from '../../store/action/warehouseAction';\nimport {fetchAllCustomer} from '../../store/action/customerAction';\nimport {useParams} from 'react-router-dom';\nimport {fetchSaleReturn} from '../../store/action/salesReturnAction';\nimport saleReturnStatus from './saleReturnStatus.json';\nimport {getFormattedMessage} from '../../shared/sharedMethod';\nimport Spinner from \"../../shared/components/loaders/Spinner\";\nimport TopProgressBar from \"../../shared/components/loaders/TopProgressBar\";\n\nconst EditSaleReturn = (props) => {\n    const {fetchSaleReturn, salesReturn, customers, fetchAllCustomer, warehouses, fetchAllWarehouses, isLoading} = props;\n    const {id} = useParams();\n    const isSaleReturnFromSale = true\n\n    useEffect(() => {\n        fetchAllCustomer();\n        fetchAllWarehouses();\n        fetchSaleReturn(id, isSaleReturnFromSale);\n    }, [])\n\n    const selectedStatus = salesReturn.attributes && salesReturn.attributes.status && saleReturnStatus.filter((item) => item.value === salesReturn.attributes.status)\n\n    // salesReturn && salesReturn.attributes &&  salesReturn.attributes.sale_return_items.forEach((item) => {\n    //     item.code = item.product && item.product.code\n    //     item.name = item.product && item.product.name\n    //     item.stock_alert = item.product && item.product.stock_alert\n    //     item.short_name = item.sale_unit.short_name\n    //     item.fix_net_unit = item.product_price\n    //     item.newItem = ''\n    //     item.sale_return_item_id = item.id\n    //     item.sale_unit = item.product && item.product.sale_unit ? Number(item.product.sale_unit) : item.sale_unit\n    // });\n\n    const itemsValue = salesReturn && salesReturn.attributes && {\n        date: salesReturn.attributes.date,\n        warehouse_id: {\n            value:  salesReturn.attributes.warehouse_id,\n            label: salesReturn.attributes.warehouse_name,\n        },\n        customer_id: {\n            value:  salesReturn.attributes.customer_id,\n            label: salesReturn.attributes.customer_name,\n        },\n        tax_rate: salesReturn.attributes.tax_rate,\n        tax_amount: salesReturn.attributes.tax_amount,\n        discount: salesReturn.attributes.discount,\n        shipping: salesReturn.attributes.shipping,\n        grand_total : salesReturn.attributes.grand_total,\n        amount: salesReturn.attributes.amount,\n        sale_items: salesReturn.attributes.sale_return_items.map((item) => ({\n            code: item.product && item.product.code,\n            name: item.product && item.product.name,\n            product_unit: item.product.product_unit,\n            product_id: item.product_id,\n            short_name: item.sale_unit && item.sale_unit.short_name,\n            stock_alert:  item.product && item.product.stock_alert,\n            product_price: item.product_price,\n            fix_net_unit: item.product_price,\n            net_unit_price: item.product_price,\n            tax_type: item.tax_type,\n            tax_value: item.tax_value,\n            tax_amount: item.tax_amount,\n            discount_type: item.discount_type,\n            discount_value: item.discount_value,\n            discount_amount: item.discount_amount,\n            isEdit: true,\n            stock: \"\",\n            sold_quantity: item.sold_quantity,\n            sub_total: item.sub_total,\n            sale_unit: item.sale_unit && item.sale_unit.id && item.sale_unit.id,\n            quantity:  item.quantity,\n            id: item.id,\n            sale_return_item_id: item.id,\n            newItem: '',\n            isSaleReturnEdit: true,\n        })),\n        id: salesReturn.id,\n        status_id: salesReturn.attributes.status,\n        // status_id: {\n        //     label: selectedStatus[0] && selectedStatus[0].label,\n        //     value: selectedStatus[0] && selectedStatus[0].value\n        // },\n        note:salesReturn.attributes.note,\n        // isCreateSaleReturn: true,\n        isSaleReturnEdit: true,\n        sale_return_id: salesReturn.id,\n        sale_id: id,\n        sale_reference: salesReturn.attributes.reference_code,\n    };\n\n    return (\n        <MasterLayout>\n            <TopProgressBar/>\n            <HeaderTitle title={getFormattedMessage('sale-return.edit.title')} to='/app/sales'/>\n            {isLoading ? <Spinner /> :\n                salesReturn && <SaleReturnForm singleSale={itemsValue} isEdit={true} id={itemsValue?.sale_return_id} customers={customers} warehouses={warehouses}/>}\n        </MasterLayout>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    const {salesReturn, customers, warehouses, isLoading} = state;\n    return {salesReturn, customers, warehouses, isLoading}\n};\n\nexport default connect(mapStateToProps, {fetchSaleReturn, fetchAllCustomer, fetchAllWarehouses})(EditSaleReturn);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}