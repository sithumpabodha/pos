{"ast":null,"code":"import React from\"react\";import{Button}from\"react-bootstrap-v5\";import{connect,useDispatch}from\"react-redux\";import{currencySymbolHandling,decimalValidate,getFormattedMessage}from\"../../../shared/sharedMethod\";import{calculateProductCost}from\"../../shared/SharedMethod\";import{addToast}from\"../../../store/action/toastAction\";import{toastType}from\"../../../constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ProductCartList=props=>{const{singleProduct,index,onClickUpdateItemInCart,onDeleteCartItem,frontSetting,setUpdateProducts,posAllProducts,allConfigData}=props;const dispatch=useDispatch();const totalQty=posAllProducts.filter(product=>product.id===singleProduct.id).map(product=>product.attributes.stock.quantity);const handleIncrement=()=>{setUpdateProducts(updateProducts=>updateProducts.map(item=>{if(item.id===singleProduct.id){if(item.quantity>=totalQty[0]){dispatch(addToast({text:getFormattedMessage(\"pos.product-quantity-error.message\"),type:toastType.ERROR}));return item;}else{return{...item,quantity:item.quantity++ +1};}}else{return item;}}));};const handleDecrement=()=>{if(singleProduct.quantity-1>0.0){setUpdateProducts(updateProducts=>updateProducts.map(item=>item.id===singleProduct.id?{...item,quantity:item.quantity-- -1}:item));}};//qty onChange\nconst handleChange=e=>{e.preventDefault();const{value}=e.target;// check if value includes a decimal point\nif(value.match(/\\./g)){const[,decimal]=value.split(\".\");// restrict value to only 2 decimal places\nif((decimal===null||decimal===void 0?void 0:decimal.length)>2){// do nothing\nreturn;}}setUpdateProducts(updateProducts=>updateProducts.map(item=>{if(item.id===singleProduct.id){if(totalQty[0]<Number(e.target.value)){dispatch(addToast({text:getFormattedMessage(\"pos.product-quantity-error.message\"),type:toastType.ERROR}));return{...item,quantity:totalQty[0]};}else{return{...item,quantity:Number(e.target.value)};}}else{return item;}}));};return/*#__PURE__*/_jsxs(\"tr\",{className:\"align-middle\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"text-nowrap text-nowrap ps-0\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"product-name text-gray-900 mb-1 text-capitalize text-truncate\",children:singleProduct.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"product-sku\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-light-info sku-badge\",children:singleProduct.code}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-pencil-fill text-gray-600 ms-2 cursor-pointer fs-small\",onClick:()=>onClickUpdateItemInCart(singleProduct)})]})]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"counter d-flex align-items-center pos-custom-qty\",children:[/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"primary\",onClick:()=>handleDecrement(),className:\"counter__down d-flex align-items-center justify-content-center\",children:\"-\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:singleProduct.quantity,className:\"hide-arrow\",onKeyPress:event=>decimalValidate(event),onChange:e=>handleChange(e)}),/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"primary\",onClick:()=>handleIncrement(),className:\"counter__up d-flex align-items-center justify-content-center\",children:\"+\"})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-nowrap\",children:currencySymbolHandling(allConfigData,frontSetting.value&&frontSetting.value.currency_symbol,calculateProductCost(singleProduct))}),/*#__PURE__*/_jsx(\"td\",{className:\"text-nowrap\",children:currencySymbolHandling(allConfigData,frontSetting.value&&frontSetting.value.currency_symbol,calculateProductCost(singleProduct)*singleProduct.quantity)}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end remove-button pe-0\",children:/*#__PURE__*/_jsx(Button,{className:\"p-0 bg-transparent border-0\",onClick:()=>onDeleteCartItem(singleProduct.id),children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-trash3 text-danger\"})})})]},index);};export default connect(null,null)(ProductCartList);","map":{"version":3,"names":["React","Button","connect","useDispatch","currencySymbolHandling","decimalValidate","getFormattedMessage","calculateProductCost","addToast","toastType","jsx","_jsx","jsxs","_jsxs","ProductCartList","props","singleProduct","index","onClickUpdateItemInCart","onDeleteCartItem","frontSetting","setUpdateProducts","posAllProducts","allConfigData","dispatch","totalQty","filter","product","id","map","attributes","stock","quantity","handleIncrement","updateProducts","item","text","type","ERROR","handleDecrement","handleChange","e","preventDefault","value","target","match","decimal","split","length","Number","className","children","name","code","onClick","variant","onKeyPress","event","onChange","currency_symbol"],"sources":["C:/Users/Sithu/Music/react-frontend/src/frontend/components/cart-product/ProductCartList.js"],"sourcesContent":["import React from \"react\";\nimport { Button } from \"react-bootstrap-v5\";\nimport { connect, useDispatch } from \"react-redux\";\nimport {\n    currencySymbolHandling,\n    decimalValidate,\n    getFormattedMessage,\n} from \"../../../shared/sharedMethod\";\nimport { calculateProductCost } from \"../../shared/SharedMethod\";\nimport { addToast } from \"../../../store/action/toastAction\";\nimport { toastType } from \"../../../constants\";\n\nconst ProductCartList = (props) => {\n    const {\n        singleProduct,\n        index,\n        onClickUpdateItemInCart,\n        onDeleteCartItem,\n        frontSetting,\n        setUpdateProducts,\n        posAllProducts,\n        allConfigData,\n    } = props;\n    const dispatch = useDispatch();\n    const totalQty = posAllProducts\n        .filter((product) => product.id === singleProduct.id)\n        .map((product) => product.attributes.stock.quantity);\n\n    const handleIncrement = () => {\n        setUpdateProducts((updateProducts) =>\n            updateProducts.map((item) => {\n                if (item.id === singleProduct.id) {\n                    if (item.quantity >= totalQty[0]) {\n                        dispatch(\n                            addToast({\n                                text: getFormattedMessage(\n                                    \"pos.product-quantity-error.message\"\n                                ),\n                                type: toastType.ERROR,\n                            })\n                        );\n                        return item;\n                    } else {\n                        return { ...item, quantity: item.quantity++ + 1 };\n                    }\n                } else {\n                    return item;\n                }\n            })\n        );\n    };\n\n    const handleDecrement = () => {\n        if (singleProduct.quantity - 1 > 0.0) {\n            setUpdateProducts((updateProducts) =>\n                updateProducts.map((item) =>\n                    item.id === singleProduct.id\n                        ? { ...item, quantity: item.quantity-- - 1 }\n                        : item\n                )\n            );\n        }\n    };\n\n    //qty onChange\n    const handleChange = (e) => {\n        e.preventDefault();\n        const { value } = e.target;\n        // check if value includes a decimal point\n        if (value.match(/\\./g)) {\n            const [, decimal] = value.split(\".\");\n            // restrict value to only 2 decimal places\n            if (decimal?.length > 2) {\n                // do nothing\n                return;\n            }\n        }\n\n        setUpdateProducts((updateProducts) =>\n            updateProducts.map((item) => {\n                if (item.id === singleProduct.id) {\n                    if (totalQty[0] < Number(e.target.value)) {\n                        dispatch(\n                            addToast({\n                                text: getFormattedMessage(\n                                    \"pos.product-quantity-error.message\"\n                                ),\n                                type: toastType.ERROR,\n                            })\n                        );\n                        return { ...item, quantity: totalQty[0] };\n                    } else {\n                        return {\n                            ...item,\n                            quantity: Number(e.target.value),\n                        };\n                    }\n                } else {\n                    return item;\n                }\n            })\n        );\n    };\n\n    return (\n        <tr key={index} className=\"align-middle\">\n            <td className=\"text-nowrap text-nowrap ps-0\">\n                <h4 className=\"product-name text-gray-900 mb-1 text-capitalize text-truncate\">\n                    {singleProduct.name}\n                </h4>\n                <span className=\"product-sku\">\n                    <span className=\"badge bg-light-info sku-badge\">\n                        {singleProduct.code}\n                    </span>\n                    <i\n                        className=\"bi bi-pencil-fill text-gray-600 ms-2 cursor-pointer fs-small\"\n                        onClick={() => onClickUpdateItemInCart(singleProduct)}\n                    />\n                </span>\n            </td>\n            <td>\n                <div className=\"counter d-flex align-items-center pos-custom-qty\">\n                    <Button\n                        type=\"button\"\n                        variant=\"primary\"\n                        onClick={() => handleDecrement()}\n                        className=\"counter__down d-flex align-items-center justify-content-center\"\n                    >\n                        -\n                    </Button>\n                    <input\n                        type=\"number\"\n                        value={singleProduct.quantity}\n                        className=\"hide-arrow\"\n                        onKeyPress={(event) => decimalValidate(event)}\n                        onChange={(e) => handleChange(e)}\n                    />\n                    <Button\n                        type=\"button\"\n                        variant=\"primary\"\n                        onClick={() => handleIncrement()}\n                        className=\"counter__up d-flex align-items-center justify-content-center\"\n                    >\n                        +\n                    </Button>\n                </div>\n            </td>\n            <td className=\"text-nowrap\">\n                {currencySymbolHandling(\n                    allConfigData,\n                    frontSetting.value && frontSetting.value.currency_symbol,\n                    calculateProductCost(singleProduct)\n                )}\n            </td>\n            <td className=\"text-nowrap\">\n                {currencySymbolHandling(\n                    allConfigData,\n                    frontSetting.value && frontSetting.value.currency_symbol,\n                    calculateProductCost(singleProduct) * singleProduct.quantity\n                )}\n            </td>\n            <td className=\"text-end remove-button pe-0\">\n                <Button\n                    className=\"p-0 bg-transparent border-0\"\n                    onClick={() => onDeleteCartItem(singleProduct.id)}\n                >\n                    <i className=\"bi bi-trash3 text-danger\" />\n                </Button>\n            </td>\n        </tr>\n    );\n};\n\nexport default connect(null, null)(ProductCartList);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}