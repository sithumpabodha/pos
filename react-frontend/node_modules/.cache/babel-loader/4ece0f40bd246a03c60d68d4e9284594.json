{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import MasterLayout from\"../../MasterLayout\";import TabTitle from\"../../../shared/tab-title/TabTitle\";import{currencySymbolHandling,getFormattedMessage,placeholderText}from\"../../../shared/sharedMethod\";import ReactDataTable from\"../../../shared/table/ReactDataTable\";import{connect}from\"react-redux\";import ReactSelect from\"../../../shared/select/reactSelect\";import{fetchAllWarehouses}from\"../../../store/action/warehouseAction\";import{fetchFrontSetting}from\"../../../store/action/frontSettingAction\";import TopProgressBar from\"../../../shared/components/loaders/TopProgressBar\";import{fetchSuppliersReport}from\"../../../store/action/suppliersReportAction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const SuppliersReport=props=>{const{isLoading,totalRecord,fetchFrontSetting,fetchAllWarehouses,frontSetting,warehouses,fetchSuppliersReport,allSupplierReport,allConfigData}=props;const[warehouseValue,setWarehouseValue]=useState({label:\"All\",value:null});const currencySymbol=frontSetting&&frontSetting.value&&frontSetting.value.currency_symbol;useEffect(()=>{fetchAllWarehouses();},[]);useEffect(()=>{fetchFrontSetting();},[]);const itemsValue=currencySymbol&&allSupplierReport.length>=0&&allSupplierReport.map(report=>({name:report.name,phone:report.phone,purchase:report.purchases_count,total_amount:report.total_grand_amount,// paid: stockReport.attributes.product.product_price,\n// total_purchase_due: stockReport.attributes.product.product_unit,\n// total_purchase_return_due: stockReport.attributes.quantity,\nid:report.id,currency:currencySymbol}));const onChange=filter=>{fetchSuppliersReport(filter,true);};const onWarehouseChange=obj=>{setWarehouseValue(obj);};const onReportsClick=item=>{const id=item.id;window.location.href=\"#/app/report/suppliers/details/\"+id;};const columns=[{name:getFormattedMessage(\"supplier.table.name.column.title\"),sortField:\"name\",sortable:true,cell:row=>{return/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-light-danger\",children:/*#__PURE__*/_jsx(\"span\",{children:row.name})});}},{name:getFormattedMessage(\"users.table.phone-number.column.title\"),selector:row=>row.phone,sortField:\"phone\",sortable:false},{name:getFormattedMessage(\"purchases.title\"),selector:row=>row.purchase,sortField:\"purchase\",sortable:false},{name:getFormattedMessage(\"pos-total-amount.title\"),selector:row=>currencySymbolHandling(allConfigData,row.currency,row.total_amount),sortField:\"total_amount\",sortable:false},{name:getFormattedMessage(\"react-data-table.action.column.label\"),right:true,ignoreRowClick:true,allowOverflow:true,button:true,width:\"115px\",cell:row=>/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-primary\",variant:\"primary\",onClick:()=>onReportsClick(row),children:getFormattedMessage(\"reports.title\")})}];const array=warehouses;const newFirstElement={attributes:{name:getFormattedMessage(\"report-all.warehouse.label\")},id:null};const newArray=[newFirstElement].concat(array);return/*#__PURE__*/_jsxs(MasterLayout,{children:[/*#__PURE__*/_jsx(TopProgressBar,{}),/*#__PURE__*/_jsx(TabTitle,{title:placeholderText(\"supplier.report.title\")}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-md-7\",children:/*#__PURE__*/_jsx(ReactDataTable,{columns:columns// warehouseValue={warehouseValue}\n,items:itemsValue,onChange:onChange,isLoading:isLoading,totalRows:totalRecord})})]});};const mapStateToProps=state=>{const{isLoading,totalRecord,warehouses,frontSetting,allSupplierReport,allConfigData}=state;return{isLoading,totalRecord,warehouses,frontSetting,allSupplierReport,allConfigData};};export default connect(mapStateToProps,{fetchAllWarehouses,fetchFrontSetting,fetchSuppliersReport})(SuppliersReport);","map":{"version":3,"names":["React","useEffect","useState","MasterLayout","TabTitle","currencySymbolHandling","getFormattedMessage","placeholderText","ReactDataTable","connect","ReactSelect","fetchAllWarehouses","fetchFrontSetting","TopProgressBar","fetchSuppliersReport","jsx","_jsx","jsxs","_jsxs","SuppliersReport","props","isLoading","totalRecord","frontSetting","warehouses","allSupplierReport","allConfigData","warehouseValue","setWarehouseValue","label","value","currencySymbol","currency_symbol","itemsValue","length","map","report","name","phone","purchase","purchases_count","total_amount","total_grand_amount","id","currency","onChange","filter","onWarehouseChange","obj","onReportsClick","item","window","location","href","columns","sortField","sortable","cell","row","className","children","selector","right","ignoreRowClick","allowOverflow","button","width","variant","onClick","array","newFirstElement","attributes","newArray","concat","title","items","totalRows","mapStateToProps","state"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/report/supplier-report/SuppliersReport.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport MasterLayout from \"../../MasterLayout\";\nimport TabTitle from \"../../../shared/tab-title/TabTitle\";\nimport {\n    currencySymbolHandling,\n    getFormattedMessage,\n    placeholderText,\n} from \"../../../shared/sharedMethod\";\nimport ReactDataTable from \"../../../shared/table/ReactDataTable\";\nimport { connect } from \"react-redux\";\nimport ReactSelect from \"../../../shared/select/reactSelect\";\nimport { fetchAllWarehouses } from \"../../../store/action/warehouseAction\";\nimport { fetchFrontSetting } from \"../../../store/action/frontSettingAction\";\nimport TopProgressBar from \"../../../shared/components/loaders/TopProgressBar\";\nimport { fetchSuppliersReport } from \"../../../store/action/suppliersReportAction\";\n\nconst SuppliersReport = (props) => {\n    const {\n        isLoading,\n        totalRecord,\n        fetchFrontSetting,\n        fetchAllWarehouses,\n        frontSetting,\n        warehouses,\n        fetchSuppliersReport,\n        allSupplierReport,\n        allConfigData,\n    } = props;\n\n    const [warehouseValue, setWarehouseValue] = useState({\n        label: \"All\",\n        value: null,\n    });\n    const currencySymbol =\n        frontSetting &&\n        frontSetting.value &&\n        frontSetting.value.currency_symbol;\n\n    useEffect(() => {\n        fetchAllWarehouses();\n    }, []);\n\n    useEffect(() => {\n        fetchFrontSetting();\n    }, []);\n\n    const itemsValue =\n        currencySymbol &&\n        allSupplierReport.length >= 0 &&\n        allSupplierReport.map((report) => ({\n            name: report.name,\n            phone: report.phone,\n            purchase: report.purchases_count,\n            total_amount: report.total_grand_amount,\n            // paid: stockReport.attributes.product.product_price,\n            // total_purchase_due: stockReport.attributes.product.product_unit,\n            // total_purchase_return_due: stockReport.attributes.quantity,\n            id: report.id,\n            currency: currencySymbol,\n        }));\n\n    const onChange = (filter) => {\n        fetchSuppliersReport(filter, true);\n    };\n\n    const onWarehouseChange = (obj) => {\n        setWarehouseValue(obj);\n    };\n\n    const onReportsClick = (item) => {\n        const id = item.id;\n        window.location.href = \"#/app/report/suppliers/details/\" + id;\n    };\n\n    const columns = [\n        {\n            name: getFormattedMessage(\"supplier.table.name.column.title\"),\n            sortField: \"name\",\n            sortable: true,\n            cell: (row) => {\n                return (\n                    <span className=\"badge bg-light-danger\">\n                        <span>{row.name}</span>\n                    </span>\n                );\n            },\n        },\n        {\n            name: getFormattedMessage(\"users.table.phone-number.column.title\"),\n            selector: (row) => row.phone,\n            sortField: \"phone\",\n            sortable: false,\n        },\n        {\n            name: getFormattedMessage(\"purchases.title\"),\n            selector: (row) => row.purchase,\n            sortField: \"purchase\",\n            sortable: false,\n        },\n        {\n            name: getFormattedMessage(\"pos-total-amount.title\"),\n            selector: (row) =>\n                currencySymbolHandling(\n                    allConfigData,\n                    row.currency,\n                    row.total_amount\n                ),\n            sortField: \"total_amount\",\n            sortable: false,\n        },\n        {\n            name: getFormattedMessage(\"react-data-table.action.column.label\"),\n            right: true,\n            ignoreRowClick: true,\n            allowOverflow: true,\n            button: true,\n            width: \"115px\",\n            cell: (row) => (\n                <button\n                    className=\"btn btn-sm btn-primary\"\n                    variant=\"primary\"\n                    onClick={() => onReportsClick(row)}\n                >\n                    {getFormattedMessage(\"reports.title\")}\n                </button>\n            ),\n        },\n    ];\n\n    const array = warehouses;\n    const newFirstElement = {\n        attributes: { name: getFormattedMessage(\"report-all.warehouse.label\") },\n        id: null,\n    };\n    const newArray = [newFirstElement].concat(array);\n\n    return (\n        <MasterLayout>\n            <TopProgressBar />\n            <TabTitle title={placeholderText(\"supplier.report.title\")} />\n            {/*<div className='mx-auto mb-md-5 col-12 col-md-4'>*/}\n            {/*    {newArray &&*/}\n            {/*    <ReactSelect data={newArray} onChange={onWarehouseChange} defaultValue={newArray[0] ? {*/}\n            {/*        label: newArray[0].attributes.name,*/}\n            {/*        value: newArray[0].id*/}\n            {/*    } : ''}*/}\n            {/*                 title={getFormattedMessage('warehouse.title')} errors={''} isRequired*/}\n            {/*                 placeholder={placeholderText('purchase.select.warehouse.placeholder.label')}/>}*/}\n            {/*</div>*/}\n            <div className=\"pt-md-7\">\n                <ReactDataTable\n                    columns={columns}\n                    // warehouseValue={warehouseValue}\n                    items={itemsValue}\n                    onChange={onChange}\n                    isLoading={isLoading}\n                    totalRows={totalRecord}\n                />\n            </div>\n        </MasterLayout>\n    );\n};\nconst mapStateToProps = (state) => {\n    const {\n        isLoading,\n        totalRecord,\n        warehouses,\n        frontSetting,\n        allSupplierReport,\n        allConfigData,\n    } = state;\n    return {\n        isLoading,\n        totalRecord,\n        warehouses,\n        frontSetting,\n        allSupplierReport,\n        allConfigData,\n    };\n};\n\nexport default connect(mapStateToProps, {\n    fetchAllWarehouses,\n    fetchFrontSetting,\n    fetchSuppliersReport,\n})(SuppliersReport);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}