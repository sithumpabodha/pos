{"ast":null,"code":"import{setLoading}from\"./loadingAction\";import apiConfig from\"../../config/apiConfig\";import{apiBaseURL,saleActionType,toastType}from\"../../constants\";import{addToast}from\"./toastAction\";import{callSaleApi}from\"./saleApiAction\";import{getFormattedMessage}from\"../../shared/sharedMethod\";import{setTotalRecord}from\"./totalRecordAction\";export const createSalePayment=function(salePayment){let isLoading=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return async dispatch=>{if(isLoading){dispatch(setLoading(true));}apiConfig.post(apiBaseURL.SALES+\"/\"+salePayment.sale_id+\"/capture-payment\",salePayment).then(response=>{if(isLoading){dispatch(setLoading(false));}dispatch(callSaleApi(true));dispatch(addToast({text:getFormattedMessage(\"sale.payment.create.success\")}));}).catch(_ref=>{let{response}=_ref;dispatch(addToast({text:response.data.message,type:toastType.ERROR}));});};};export const fetchSalePayments=function(sale_id){let isLoading=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return async dispatch=>{if(isLoading){dispatch(setLoading(true));}apiConfig.get(apiBaseURL.SALES+\"/\"+sale_id+\"/payments\").then(response=>{dispatch({type:saleActionType.FETCH_SALE_PAYMENT,payload:response.data.data});}).catch(response=>{dispatch(addToast({text:response.response.data.message,type:toastType.ERROR}));}).finally(()=>{if(isLoading){dispatch(setLoading(false));}});};};export const editSalePayment=function(details){let isLoading=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return async dispatch=>{if(isLoading){dispatch(setLoading(true));}apiConfig.post(apiBaseURL.SALES+\"/\"+details.payment_id+\"/payment\",details).then(response=>{dispatch(addToast({text:getFormattedMessage(\"sale.payment.edit.success\")}));const data=response.data.data.attributes;const newData=Object.assign(data,{id:response.data.data.id});newData&&dispatch({type:saleActionType.EDIT_SALE_PAYMENT,payload:newData});if(isLoading){dispatch(setLoading(false));}}).catch(_ref2=>{let{response}=_ref2;dispatch(addToast({text:response.data.message,type:toastType.ERROR}));});};};export const deleteSalePayment=function(paymentId){let isLoading=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return async dispatch=>{if(isLoading){dispatch(setLoading(true));}apiConfig.delete(apiBaseURL.SALES+\"/\"+paymentId+\"/payment\").then(response=>{dispatch({type:saleActionType.DELETE_SALE_PAYMENT,payload:paymentId});if(isLoading){dispatch(setLoading(false));}}).catch(_ref3=>{let{response}=_ref3;dispatch(addToast({text:response.data.message,type:toastType.ERROR}));});};};","map":{"version":3,"names":["setLoading","apiConfig","apiBaseURL","saleActionType","toastType","addToast","callSaleApi","getFormattedMessage","setTotalRecord","createSalePayment","salePayment","isLoading","arguments","length","undefined","dispatch","post","SALES","sale_id","then","response","text","catch","_ref","data","message","type","ERROR","fetchSalePayments","get","FETCH_SALE_PAYMENT","payload","finally","editSalePayment","details","payment_id","attributes","newData","Object","assign","id","EDIT_SALE_PAYMENT","_ref2","deleteSalePayment","paymentId","delete","DELETE_SALE_PAYMENT","_ref3"],"sources":["C:/Users/Sithu/Music/react-frontend/src/store/action/salePaymentAction.js"],"sourcesContent":["import { setLoading } from \"./loadingAction\";\nimport apiConfig from \"../../config/apiConfig\";\nimport { apiBaseURL, saleActionType, toastType } from \"../../constants\";\nimport { addToast } from \"./toastAction\";\nimport { callSaleApi } from \"./saleApiAction\";\nimport { getFormattedMessage } from \"../../shared/sharedMethod\";\nimport { setTotalRecord } from \"./totalRecordAction\";\n\nexport const createSalePayment =\n    (salePayment, isLoading = true) =>\n    async (dispatch) => {\n        if (isLoading) {\n            dispatch(setLoading(true));\n        }\n        apiConfig\n            .post(\n                apiBaseURL.SALES +\n                    \"/\" +\n                    salePayment.sale_id +\n                    \"/capture-payment\",\n                salePayment\n            )\n            .then((response) => {\n                if (isLoading) {\n                    dispatch(setLoading(false));\n                }\n                dispatch(callSaleApi(true));\n                dispatch(\n                    addToast({\n                        text: getFormattedMessage(\n                            \"sale.payment.create.success\"\n                        ),\n                    })\n                );\n            })\n            .catch(({ response }) => {\n                dispatch(\n                    addToast({\n                        text: response.data.message,\n                        type: toastType.ERROR,\n                    })\n                );\n            });\n    };\n\nexport const fetchSalePayments =\n    (sale_id, isLoading = true) =>\n    async (dispatch) => {\n        if (isLoading) {\n            dispatch(setLoading(true));\n        }\n        apiConfig\n            .get(apiBaseURL.SALES + \"/\" + sale_id + \"/payments\")\n            .then((response) => {\n                dispatch({\n                    type: saleActionType.FETCH_SALE_PAYMENT,\n                    payload: response.data.data,\n                });\n            })\n            .catch((response) => {\n                dispatch(\n                    addToast({\n                        text: response.response.data.message,\n                        type: toastType.ERROR,\n                    })\n                );\n            })\n            .finally(() => {\n                if (isLoading) {\n                    dispatch(setLoading(false));\n                }\n            });\n    };\n\nexport const editSalePayment =\n    (details, isLoading = true) =>\n    async (dispatch) => {\n        if (isLoading) {\n            dispatch(setLoading(true));\n        }\n        apiConfig\n            .post(\n                apiBaseURL.SALES + \"/\" + details.payment_id + \"/payment\",\n                details\n            )\n            .then((response) => {\n                dispatch(\n                    addToast({\n                        text: getFormattedMessage(\"sale.payment.edit.success\"),\n                    })\n                );\n                const data = response.data.data.attributes;\n                const newData = Object.assign(data, {\n                    id: response.data.data.id,\n                });\n                newData &&\n                    dispatch({\n                        type: saleActionType.EDIT_SALE_PAYMENT,\n                        payload: newData,\n                    });\n                if (isLoading) {\n                    dispatch(setLoading(false));\n                }\n            })\n            .catch(({ response }) => {\n                dispatch(\n                    addToast({\n                        text: response.data.message,\n                        type: toastType.ERROR,\n                    })\n                );\n            });\n    };\n\nexport const deleteSalePayment =\n    (paymentId, isLoading = true) =>\n    async (dispatch) => {\n        if (isLoading) {\n            dispatch(setLoading(true));\n        }\n        apiConfig\n            .delete(apiBaseURL.SALES + \"/\" + paymentId + \"/payment\")\n            .then((response) => {\n                dispatch({\n                    type: saleActionType.DELETE_SALE_PAYMENT,\n                    payload: paymentId,\n                });\n                if (isLoading) {\n                    dispatch(setLoading(false));\n                }\n            })\n            .catch(({ response }) => {\n                dispatch(\n                    addToast({\n                        text: response.data.message,\n                        type: toastType.ERROR,\n                    })\n                );\n            });\n    };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}