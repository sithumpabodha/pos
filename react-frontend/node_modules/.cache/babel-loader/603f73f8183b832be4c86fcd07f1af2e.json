{"ast":null,"code":"import{setLoading}from\"./loadingAction\";import{apiBaseURL,bestCustomerActionType,toastType}from\"../../constants\";import apiConfig from\"../../config/apiConfig\";import{setTotalRecord}from\"./totalRecordAction\";import requestParam from\"../../shared/requestParam\";import{addToast}from\"./toastAction\";export const bestCustomerReportAction=function(){let filter=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};let isLoading=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return async dispatch=>{if(isLoading){dispatch(setLoading(true));}let url=apiBaseURL.BEST_CUSTOMERS_REPORT;if(!_.isEmpty(filter)&&(filter.page||filter.pageSize||filter.search||filter.order_By||filter.created_at)){url+=requestParam(filter,null,null,null,url);}apiConfig.get(url).then(response=>{if(isLoading){dispatch(setLoading(false));}dispatch({type:bestCustomerActionType.FETCH_BEST_CUSTOMER_REPORT,payload:response.data});dispatch(setTotalRecord(response.data.meta.total!==undefined&&response.data.meta.total>=0?response.data.meta.total:response.data.data.total));}).catch(_ref=>{let{response}=_ref;dispatch(addToast({text:response.data.message,type:toastType.ERROR}));});};};export const bestCustomerPdfAction=function(){let isLoading=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return async dispatch=>{if(isLoading){dispatch(setLoading(true));}apiConfig.get(apiBaseURL.BEST_CUSTOMERS_REPORT_PDF).then(response=>{window.open(response.data.data.best_customers_pdf_url,\"_blank\");if(isLoading){dispatch(setLoading(false));}}).catch(_ref2=>{let{response}=_ref2;dispatch(addToast({text:response.data.message,type:toastType.ERROR}));});};};","map":{"version":3,"names":["setLoading","apiBaseURL","bestCustomerActionType","toastType","apiConfig","setTotalRecord","requestParam","addToast","bestCustomerReportAction","filter","arguments","length","undefined","isLoading","dispatch","url","BEST_CUSTOMERS_REPORT","_","isEmpty","page","pageSize","search","order_By","created_at","get","then","response","type","FETCH_BEST_CUSTOMER_REPORT","payload","data","meta","total","catch","_ref","text","message","ERROR","bestCustomerPdfAction","BEST_CUSTOMERS_REPORT_PDF","window","open","best_customers_pdf_url","_ref2"],"sources":["C:/Users/Sithu/Music/react-frontend/src/store/action/bestCustomerReport.js"],"sourcesContent":["import { setLoading } from \"./loadingAction\";\nimport { apiBaseURL, bestCustomerActionType, toastType } from \"../../constants\";\nimport apiConfig from \"../../config/apiConfig\";\nimport { setTotalRecord } from \"./totalRecordAction\";\nimport requestParam from \"../../shared/requestParam\";\nimport { addToast } from \"./toastAction\";\n\nexport const bestCustomerReportAction =\n    (filter = {}, isLoading = true) =>\n    async (dispatch) => {\n        if (isLoading) {\n            dispatch(setLoading(true));\n        }\n        let url = apiBaseURL.BEST_CUSTOMERS_REPORT;\n        if (\n            !_.isEmpty(filter) &&\n            (filter.page ||\n                filter.pageSize ||\n                filter.search ||\n                filter.order_By ||\n                filter.created_at)\n        ) {\n            url += requestParam(filter, null, null, null, url);\n        }\n        apiConfig\n            .get(url)\n            .then((response) => {\n                if (isLoading) {\n                    dispatch(setLoading(false));\n                }\n                dispatch({\n                    type: bestCustomerActionType.FETCH_BEST_CUSTOMER_REPORT,\n                    payload: response.data,\n                });\n                dispatch(\n                    setTotalRecord(\n                        response.data.meta.total !== undefined &&\n                            response.data.meta.total >= 0\n                            ? response.data.meta.total\n                            : response.data.data.total\n                    )\n                );\n            })\n            .catch(({ response }) => {\n                dispatch(\n                    addToast({\n                        text: response.data.message,\n                        type: toastType.ERROR,\n                    })\n                );\n            });\n    };\n\nexport const bestCustomerPdfAction =\n    (isLoading = true) =>\n    async (dispatch) => {\n        if (isLoading) {\n            dispatch(setLoading(true));\n        }\n        apiConfig\n            .get(apiBaseURL.BEST_CUSTOMERS_REPORT_PDF)\n            .then((response) => {\n                window.open(\n                    response.data.data.best_customers_pdf_url,\n                    \"_blank\"\n                );\n                if (isLoading) {\n                    dispatch(setLoading(false));\n                }\n            })\n            .catch(({ response }) => {\n                dispatch(\n                    addToast({\n                        text: response.data.message,\n                        type: toastType.ERROR,\n                    })\n                );\n            });\n    };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}