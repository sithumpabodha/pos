{"ast":null,"code":"import React,{useEffect,useState}from'react';import MasterLayout from'../../MasterLayout';import TabTitle from'../../../shared/tab-title/TabTitle';import{getFormattedMessage,placeholderText}from'../../../shared/sharedMethod';import ReactDataTable from'../../../shared/table/ReactDataTable';import{connect}from'react-redux';import ReactSelect from'../../../shared/select/reactSelect';import{fetchAllWarehouses}from'../../../store/action/warehouseAction';import{fetchFrontSetting}from'../../../store/action/frontSettingAction';import{productQuantityReportAction}from'../../../store/action/paymentQuantityReport';import TopProgressBar from\"../../../shared/components/loaders/TopProgressBar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const StockReport=props=>{const{isLoading,totalRecord,fetchFrontSetting,fetchAllWarehouses,warehouses,productQuantityReportAction,productQuantityReport}=props;const[warehouseValue,setWarehouseValue]=useState({label:'All',value:null});const array=warehouses&&warehouses;const newFirstElement={attributes:{name:getFormattedMessage(\"report-all.warehouse.label\")},id:null};const newArray=[newFirstElement].concat(array);useEffect(()=>{productQuantityReportAction(warehouseValue.value);},[warehouseValue]);useEffect(()=>{fetchFrontSetting();fetchAllWarehouses();},[]);const itemsValue=productQuantityReport&&productQuantityReport.length>=0&&productQuantityReport.map(quantityReport=>({code:quantityReport&&quantityReport.code,name:quantityReport&&quantityReport.name,warehouse:quantityReport&&quantityReport.stock.warehouse.name,quantity:quantityReport&&quantityReport.stock.quantity,stockAlert:quantityReport&&quantityReport.stock_alert,product_unit:quantityReport&&quantityReport.stock.product_unit_name}));const onChange=filter=>{productQuantityReportAction(warehouseValue.value,filter);};const onWarehouseChange=obj=>{setWarehouseValue(obj);};const columns=[{name:getFormattedMessage('globally.react-table.column.code.label'),sortField:'code',sortable:false,cell:row=>{return/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-light-danger\",children:/*#__PURE__*/_jsx(\"span\",{children:row.code})});}},{name:getFormattedMessage(\"dashboard.stockAlert.product.label\"),selector:row=>row.name,sortField:'name',sortable:false},{name:getFormattedMessage(\"dashboard.stockAlert.warehouse.label\"),selector:row=>row.warehouse,sortField:'product_category_name',sortable:false},{name:getFormattedMessage(\"dashboard.stockAlert.quantity.label\"),sortField:'product_cost',sortable:false,cell:row=>{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"badge bg-light-info me-2\",children:/*#__PURE__*/_jsx(\"span\",{children:row.quantity})}),/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-light-success me-2\",children:/*#__PURE__*/_jsx(\"span\",{children:row.product_unit})})]});}},{name:getFormattedMessage(\"dashboard.stockAlert.alertQuantity.label\"),sortField:'product_price',sortable:false,cell:row=>{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"badge bg-light-danger me-2\",children:row.stockAlert}),/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-light-success me-2\",children:/*#__PURE__*/_jsx(\"span\",{children:row.product_unit})})]});}}];return/*#__PURE__*/_jsxs(MasterLayout,{children:[/*#__PURE__*/_jsx(TopProgressBar,{}),/*#__PURE__*/_jsx(TabTitle,{title:placeholderText('stock.reports.title')}),/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto mb-md-5 col-12 col-md-4\",children:newArray&&/*#__PURE__*/_jsx(ReactSelect,{data:newArray,onChange:onWarehouseChange,defaultValue:newArray[0]?{label:newArray[0].attributes.name,value:newArray[0].id}:'',title:getFormattedMessage('warehouse.title'),errors:'',isRequired:true,placeholder:placeholderText('purchase.select.warehouse.placeholder.label')})}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-md-7\",children:/*#__PURE__*/_jsx(ReactDataTable,{subHeader:false,items:itemsValue,columns:columns,onChange:onChange,isLoading:isLoading,totalRows:totalRecord,warehouseValue:warehouseValue})})]});};const mapStateToProps=state=>{const{isLoading,totalRecord,warehouses,frontSetting,productQuantityReport}=state;return{isLoading,totalRecord,warehouses,frontSetting,productQuantityReport};};export default connect(mapStateToProps,{fetchAllWarehouses,fetchFrontSetting,productQuantityReportAction})(StockReport);","map":{"version":3,"names":["React","useEffect","useState","MasterLayout","TabTitle","getFormattedMessage","placeholderText","ReactDataTable","connect","ReactSelect","fetchAllWarehouses","fetchFrontSetting","productQuantityReportAction","TopProgressBar","jsx","_jsx","jsxs","_jsxs","StockReport","props","isLoading","totalRecord","warehouses","productQuantityReport","warehouseValue","setWarehouseValue","label","value","array","newFirstElement","attributes","name","id","newArray","concat","itemsValue","length","map","quantityReport","code","warehouse","stock","quantity","stockAlert","stock_alert","product_unit","product_unit_name","onChange","filter","onWarehouseChange","obj","columns","sortField","sortable","cell","row","className","children","selector","title","data","defaultValue","errors","isRequired","placeholder","subHeader","items","totalRows","mapStateToProps","state","frontSetting"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/report/productQuantityReport/ProductQuantityReport.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport MasterLayout from '../../MasterLayout';\nimport TabTitle from '../../../shared/tab-title/TabTitle';\nimport {getFormattedMessage, placeholderText} from '../../../shared/sharedMethod';\nimport ReactDataTable from '../../../shared/table/ReactDataTable';\nimport {connect} from 'react-redux';\nimport ReactSelect from '../../../shared/select/reactSelect';\nimport {fetchAllWarehouses} from '../../../store/action/warehouseAction';\nimport {fetchFrontSetting} from '../../../store/action/frontSettingAction';\nimport {productQuantityReportAction} from '../../../store/action/paymentQuantityReport';\nimport TopProgressBar from \"../../../shared/components/loaders/TopProgressBar\";\n\nconst StockReport = (props) => {\n    const {\n        isLoading,\n        totalRecord,\n        fetchFrontSetting,\n        fetchAllWarehouses,\n        warehouses,\n        productQuantityReportAction,\n        productQuantityReport\n    } = props;\n    const [warehouseValue, setWarehouseValue] = useState({label: 'All', value: null});\n    const array = warehouses && warehouses\n    const newFirstElement = {attributes: {name: getFormattedMessage(\"report-all.warehouse.label\")}, id: null}\n    const newArray = [newFirstElement].concat(array)\n\n    useEffect(() => {\n        productQuantityReportAction(warehouseValue.value)\n    }, [warehouseValue])\n\n    useEffect(() => {\n        fetchFrontSetting();\n        fetchAllWarehouses();\n    }, []);\n\n\n    const itemsValue = productQuantityReport && productQuantityReport.length >= 0 && productQuantityReport.map(quantityReport => ({\n        code: quantityReport && quantityReport.code,\n        name: quantityReport && quantityReport.name,\n        warehouse: quantityReport && quantityReport.stock.warehouse.name,\n        quantity: quantityReport && quantityReport.stock.quantity,\n        stockAlert: quantityReport && quantityReport.stock_alert,\n        product_unit: quantityReport && quantityReport.stock.product_unit_name,\n    }));\n\n    const onChange = (filter) => {\n        productQuantityReportAction(warehouseValue.value, filter)\n    };\n\n    const onWarehouseChange = (obj) => {\n        setWarehouseValue(obj);\n    };\n\n    const columns = [\n        {\n            name: getFormattedMessage('globally.react-table.column.code.label'),\n            sortField: 'code',\n            sortable: false,\n            cell: row => {\n                return <span className='badge bg-light-danger'>\n                            <span>{row.code}</span>\n                        </span>\n            }\n        },\n        {\n            name: getFormattedMessage(\"dashboard.stockAlert.product.label\"),\n            selector: row => row.name,\n            sortField: 'name',\n            sortable: false,\n        },\n        {\n            name: getFormattedMessage(\"dashboard.stockAlert.warehouse.label\"),\n            selector: row => row.warehouse,\n            sortField: 'product_category_name',\n            sortable: false,\n        },\n        {\n            name: getFormattedMessage(\"dashboard.stockAlert.quantity.label\"),\n            sortField: 'product_cost',\n            sortable: false,\n            cell: row => {\n                return <div>\n                <div className='badge bg-light-info me-2'><span>{row.quantity}</span></div>\n                <span className='badge bg-light-success me-2'><span>{row.product_unit}</span></span>\n\n            </div>\n            }\n        },\n        {\n            name: getFormattedMessage(\"dashboard.stockAlert.alertQuantity.label\"),\n            sortField: 'product_price',\n            sortable: false,\n            cell: row => {\n                return <div>\n                <div className=\"badge bg-light-danger me-2\">{row.stockAlert}</div>\n                <span className='badge bg-light-success me-2'><span>{row.product_unit}</span></span>\n            </div>\n            }\n        }\n    ];\n\n    return (\n        <MasterLayout>\n            <TopProgressBar />\n            <TabTitle title={placeholderText('stock.reports.title')}/>\n                <div className='mx-auto mb-md-5 col-12 col-md-4'>\n                {newArray &&\n                    <ReactSelect data={newArray} onChange={onWarehouseChange} defaultValue={newArray[0] ? {\n                        label: newArray[0].attributes.name,\n                        value: newArray[0].id\n                    } : ''}\n                                 title={getFormattedMessage('warehouse.title')} errors={''} isRequired\n                                 placeholder={placeholderText('purchase.select.warehouse.placeholder.label')}/>}\n                </div>\n            <div className='pt-md-7'>\n                <ReactDataTable subHeader={false} items={itemsValue} columns={columns}  onChange={onChange} isLoading={isLoading}\n                                totalRows={totalRecord} warehouseValue={warehouseValue} />\n            </div>\n        </MasterLayout>\n    )\n};\nconst mapStateToProps = (state) => {\n    const {isLoading, totalRecord, warehouses, frontSetting, productQuantityReport} = state;\n    return {isLoading, totalRecord, warehouses, frontSetting, productQuantityReport}\n};\n\nexport default connect(mapStateToProps, {\n    fetchAllWarehouses,\n    fetchFrontSetting,\n    productQuantityReportAction\n})(StockReport);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}