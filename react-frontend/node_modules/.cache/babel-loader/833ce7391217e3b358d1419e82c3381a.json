{"ast":null,"code":"import React,{useEffect}from'react';import{connect}from'react-redux';import{fetchAllWarehouses}from'../../store/action/warehouseAction';import{useParams}from'react-router-dom';import HeaderTitle from'../header/HeaderTitle';import MasterLayout from'../MasterLayout';import{getFormattedMessage,getFormattedOptions}from'../../shared/sharedMethod';import TransferForm from\"./TransferForm\";import{fetchTransfer}from'../../store/action/transfersAction';import{transferCreatStatusOptions}from'../../constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const EditTransfer=props=>{const{fetchTransfer,tansfers,warehouses,fetchAllWarehouses,isLoading}=props;const{id}=useParams();useEffect(()=>{fetchAllWarehouses();fetchTransfer(id);},[]);const transferStatusFilterOptions=getFormattedOptions(transferCreatStatusOptions);const transferStatusDefaultValue=tansfers.attributes&&tansfers.attributes.status&&transferStatusFilterOptions.filter(item=>item.id===tansfers.attributes.status);const itemsValue=tansfers&&tansfers.attributes&&{date:tansfers.attributes.date,warehouse_id:{value:tansfers.attributes.from_warehouse_id,label:tansfers.attributes.from_warehouse.name},from_warehouse_id:{value:tansfers.attributes.from_warehouse_id,label:tansfers.attributes.from_warehouse.name},to_warehouse_id:{value:tansfers.attributes.to_warehouse_id,label:tansfers.attributes.to_warehouse.name},tax_rate:tansfers.attributes.tax_rate,tax_amount:tansfers.attributes.tax_amount,discount:tansfers.attributes.discount,shipping:tansfers.attributes.shipping,grand_total:tansfers.attributes.grand_total,amount:tansfers.attributes.amount,transfer_items:tansfers.attributes.transfer_items.map(item=>({code:item.product&&item.product.code,name:item.product&&item.product.name,product_unit:item.product.product_unit,product_id:item.product_id,short_name:item.short_name,stock_alert:item.product&&item.product.stock_alert,product_price:item.product_price,fix_net_unit:item.product_price,net_unit_price:item.product_price,net_unit_cost:item.product_price,tax_type:item.tax_type,tax_value:item.tax_value,tax_amount:item.tax_amount,discount_type:item.discount_type,discount_value:item.discount_value,discount_amount:item.discount_amount,isEdit:true,stock:item.product&&item.product.stocks.filter(item=>item.warehouse_id===tansfers.attributes.from_warehouse_id),sub_total:item.sub_total,sale_unit:item.sale_unit&&item.sale_unit.id&&item.sale_unit.id,quantity:item.quantity,id:item.id,transfer_item_id:item.id,newItem:'',purchase_unit:item.product&&item.product.purchase_unit})),id:tansfers.id,notes:tansfers.attributes.note,status_id:{label:transferStatusDefaultValue[0]&&transferStatusDefaultValue[0].name,value:transferStatusDefaultValue[0]&&transferStatusDefaultValue[0].id}};return/*#__PURE__*/_jsxs(MasterLayout,{children:[/*#__PURE__*/_jsx(HeaderTitle,{title:getFormattedMessage('transfer.edit.title'),to:\"/app/transfers\"}),isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center custom-loading mx-auto fs-1 fw-bold\",children:\"Loading...\"}):/*#__PURE__*/_jsx(TransferForm,{singleTransfer:itemsValue,id:id,warehouses:warehouses})]});};const mapStateToProps=state=>{const{warehouses,isLoading,tansfers}=state;return{warehouses,isLoading,tansfers};};export default connect(mapStateToProps,{fetchAllWarehouses,fetchTransfer})(EditTransfer);","map":{"version":3,"names":["React","useEffect","connect","fetchAllWarehouses","useParams","HeaderTitle","MasterLayout","getFormattedMessage","getFormattedOptions","TransferForm","fetchTransfer","transferCreatStatusOptions","jsx","_jsx","jsxs","_jsxs","EditTransfer","props","tansfers","warehouses","isLoading","id","transferStatusFilterOptions","transferStatusDefaultValue","attributes","status","filter","item","itemsValue","date","warehouse_id","value","from_warehouse_id","label","from_warehouse","name","to_warehouse_id","to_warehouse","tax_rate","tax_amount","discount","shipping","grand_total","amount","transfer_items","map","code","product","product_unit","product_id","short_name","stock_alert","product_price","fix_net_unit","net_unit_price","net_unit_cost","tax_type","tax_value","discount_type","discount_value","discount_amount","isEdit","stock","stocks","sub_total","sale_unit","quantity","transfer_item_id","newItem","purchase_unit","notes","note","status_id","children","title","to","className","singleTransfer","mapStateToProps","state"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/transfers/EditTransfer.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchAllWarehouses } from '../../store/action/warehouseAction';\nimport { useParams } from 'react-router-dom'\nimport HeaderTitle from '../header/HeaderTitle';\nimport MasterLayout from '../MasterLayout';\nimport { getFormattedMessage, getFormattedOptions } from '../../shared/sharedMethod';\nimport TransferForm from \"./TransferForm\";\nimport { fetchTransfer } from '../../store/action/transfersAction';\nimport { transferCreatStatusOptions } from '../../constants';\n\nconst EditTransfer = ( props ) => {\n    const { fetchTransfer, tansfers, warehouses, fetchAllWarehouses, isLoading } = props;\n    const { id } = useParams();\n\n    useEffect( () => {\n        fetchAllWarehouses();\n        fetchTransfer( id );\n    }, [] );\n\n    const transferStatusFilterOptions = getFormattedOptions( transferCreatStatusOptions )\n    const transferStatusDefaultValue = tansfers.attributes && tansfers.attributes.status && transferStatusFilterOptions.filter( ( item ) => item.id === tansfers.attributes.status )\n\n    const itemsValue = tansfers && tansfers.attributes && {\n        date: tansfers.attributes.date,\n        warehouse_id: {\n            value: tansfers.attributes.from_warehouse_id,\n            label: tansfers.attributes.from_warehouse.name,\n        },\n        from_warehouse_id: {\n            value: tansfers.attributes.from_warehouse_id,\n            label: tansfers.attributes.from_warehouse.name,\n        },\n        to_warehouse_id: {\n            value: tansfers.attributes.to_warehouse_id,\n            label: tansfers.attributes.to_warehouse.name,\n        },\n        tax_rate: tansfers.attributes.tax_rate,\n        tax_amount: tansfers.attributes.tax_amount,\n        discount: tansfers.attributes.discount,\n        shipping: tansfers.attributes.shipping,\n        grand_total: tansfers.attributes.grand_total,\n        amount: tansfers.attributes.amount,\n        transfer_items: tansfers.attributes.transfer_items.map( ( item ) => ( {\n            code: item.product && item.product.code,\n            name: item.product && item.product.name,\n            product_unit: item.product.product_unit,\n            product_id: item.product_id,\n            short_name: item.short_name,\n            stock_alert: item.product && item.product.stock_alert,\n            product_price: item.product_price,\n            fix_net_unit: item.product_price,\n            net_unit_price: item.product_price,\n            net_unit_cost: item.product_price,\n            tax_type: item.tax_type,\n            tax_value: item.tax_value,\n            tax_amount: item.tax_amount,\n            discount_type: item.discount_type,\n            discount_value: item.discount_value,\n            discount_amount: item.discount_amount,\n            isEdit: true,\n            stock: item.product && item.product.stocks.filter( item => item.warehouse_id === tansfers.attributes.from_warehouse_id ),\n            sub_total: item.sub_total,\n            sale_unit: item.sale_unit && item.sale_unit.id && item.sale_unit.id,\n            quantity: item.quantity,\n            id: item.id,\n            transfer_item_id: item.id,\n            newItem: '',\n            purchase_unit: item.product && item.product.purchase_unit\n        } ) ),\n        id: tansfers.id,\n        notes: tansfers.attributes.note,\n        status_id: {\n            label: transferStatusDefaultValue[ 0 ] && transferStatusDefaultValue[ 0 ].name,\n            value: transferStatusDefaultValue[ 0 ] && transferStatusDefaultValue[ 0 ].id\n        },\n    };\n\n\n    return (\n        <MasterLayout>\n            <HeaderTitle title={getFormattedMessage( 'transfer.edit.title' )} to='/app/transfers' />\n            {isLoading ? <div className='text-center custom-loading mx-auto fs-1 fw-bold'>Loading...</div> :\n                <TransferForm singleTransfer={itemsValue} id={id} warehouses={warehouses} />}\n        </MasterLayout>\n    )\n};\n\nconst mapStateToProps = ( state ) => {\n    const { warehouses, isLoading, tansfers } = state;\n    return { warehouses, isLoading, tansfers }\n};\n\nexport default connect( mapStateToProps, { fetchAllWarehouses, fetchTransfer } )( EditTransfer );\n\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,OAAO,KAAQ,aAAa,CACrC,OAASC,kBAAkB,KAAQ,oCAAoC,CACvE,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,MAAO,CAAAC,WAAW,KAAM,uBAAuB,CAC/C,MAAO,CAAAC,YAAY,KAAM,iBAAiB,CAC1C,OAASC,mBAAmB,CAAEC,mBAAmB,KAAQ,2BAA2B,CACpF,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CACzC,OAASC,aAAa,KAAQ,oCAAoC,CAClE,OAASC,0BAA0B,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE7D,KAAM,CAAAC,YAAY,CAAKC,KAAK,EAAM,CAC9B,KAAM,CAAEP,aAAa,CAAEQ,QAAQ,CAAEC,UAAU,CAAEhB,kBAAkB,CAAEiB,SAAU,CAAC,CAAGH,KAAK,CACpF,KAAM,CAAEI,EAAG,CAAC,CAAGjB,SAAS,CAAC,CAAC,CAE1BH,SAAS,CAAE,IAAM,CACbE,kBAAkB,CAAC,CAAC,CACpBO,aAAa,CAAEW,EAAG,CAAC,CACvB,CAAC,CAAE,EAAG,CAAC,CAEP,KAAM,CAAAC,2BAA2B,CAAGd,mBAAmB,CAAEG,0BAA2B,CAAC,CACrF,KAAM,CAAAY,0BAA0B,CAAGL,QAAQ,CAACM,UAAU,EAAIN,QAAQ,CAACM,UAAU,CAACC,MAAM,EAAIH,2BAA2B,CAACI,MAAM,CAAIC,IAAI,EAAMA,IAAI,CAACN,EAAE,GAAKH,QAAQ,CAACM,UAAU,CAACC,MAAO,CAAC,CAEhL,KAAM,CAAAG,UAAU,CAAGV,QAAQ,EAAIA,QAAQ,CAACM,UAAU,EAAI,CAClDK,IAAI,CAAEX,QAAQ,CAACM,UAAU,CAACK,IAAI,CAC9BC,YAAY,CAAE,CACVC,KAAK,CAAEb,QAAQ,CAACM,UAAU,CAACQ,iBAAiB,CAC5CC,KAAK,CAAEf,QAAQ,CAACM,UAAU,CAACU,cAAc,CAACC,IAC9C,CAAC,CACDH,iBAAiB,CAAE,CACfD,KAAK,CAAEb,QAAQ,CAACM,UAAU,CAACQ,iBAAiB,CAC5CC,KAAK,CAAEf,QAAQ,CAACM,UAAU,CAACU,cAAc,CAACC,IAC9C,CAAC,CACDC,eAAe,CAAE,CACbL,KAAK,CAAEb,QAAQ,CAACM,UAAU,CAACY,eAAe,CAC1CH,KAAK,CAAEf,QAAQ,CAACM,UAAU,CAACa,YAAY,CAACF,IAC5C,CAAC,CACDG,QAAQ,CAAEpB,QAAQ,CAACM,UAAU,CAACc,QAAQ,CACtCC,UAAU,CAAErB,QAAQ,CAACM,UAAU,CAACe,UAAU,CAC1CC,QAAQ,CAAEtB,QAAQ,CAACM,UAAU,CAACgB,QAAQ,CACtCC,QAAQ,CAAEvB,QAAQ,CAACM,UAAU,CAACiB,QAAQ,CACtCC,WAAW,CAAExB,QAAQ,CAACM,UAAU,CAACkB,WAAW,CAC5CC,MAAM,CAAEzB,QAAQ,CAACM,UAAU,CAACmB,MAAM,CAClCC,cAAc,CAAE1B,QAAQ,CAACM,UAAU,CAACoB,cAAc,CAACC,GAAG,CAAIlB,IAAI,GAAQ,CAClEmB,IAAI,CAAEnB,IAAI,CAACoB,OAAO,EAAIpB,IAAI,CAACoB,OAAO,CAACD,IAAI,CACvCX,IAAI,CAAER,IAAI,CAACoB,OAAO,EAAIpB,IAAI,CAACoB,OAAO,CAACZ,IAAI,CACvCa,YAAY,CAAErB,IAAI,CAACoB,OAAO,CAACC,YAAY,CACvCC,UAAU,CAAEtB,IAAI,CAACsB,UAAU,CAC3BC,UAAU,CAAEvB,IAAI,CAACuB,UAAU,CAC3BC,WAAW,CAAExB,IAAI,CAACoB,OAAO,EAAIpB,IAAI,CAACoB,OAAO,CAACI,WAAW,CACrDC,aAAa,CAAEzB,IAAI,CAACyB,aAAa,CACjCC,YAAY,CAAE1B,IAAI,CAACyB,aAAa,CAChCE,cAAc,CAAE3B,IAAI,CAACyB,aAAa,CAClCG,aAAa,CAAE5B,IAAI,CAACyB,aAAa,CACjCI,QAAQ,CAAE7B,IAAI,CAAC6B,QAAQ,CACvBC,SAAS,CAAE9B,IAAI,CAAC8B,SAAS,CACzBlB,UAAU,CAAEZ,IAAI,CAACY,UAAU,CAC3BmB,aAAa,CAAE/B,IAAI,CAAC+B,aAAa,CACjCC,cAAc,CAAEhC,IAAI,CAACgC,cAAc,CACnCC,eAAe,CAAEjC,IAAI,CAACiC,eAAe,CACrCC,MAAM,CAAE,IAAI,CACZC,KAAK,CAAEnC,IAAI,CAACoB,OAAO,EAAIpB,IAAI,CAACoB,OAAO,CAACgB,MAAM,CAACrC,MAAM,CAAEC,IAAI,EAAIA,IAAI,CAACG,YAAY,GAAKZ,QAAQ,CAACM,UAAU,CAACQ,iBAAkB,CAAC,CACxHgC,SAAS,CAAErC,IAAI,CAACqC,SAAS,CACzBC,SAAS,CAAEtC,IAAI,CAACsC,SAAS,EAAItC,IAAI,CAACsC,SAAS,CAAC5C,EAAE,EAAIM,IAAI,CAACsC,SAAS,CAAC5C,EAAE,CACnE6C,QAAQ,CAAEvC,IAAI,CAACuC,QAAQ,CACvB7C,EAAE,CAAEM,IAAI,CAACN,EAAE,CACX8C,gBAAgB,CAAExC,IAAI,CAACN,EAAE,CACzB+C,OAAO,CAAE,EAAE,CACXC,aAAa,CAAE1C,IAAI,CAACoB,OAAO,EAAIpB,IAAI,CAACoB,OAAO,CAACsB,aAChD,CAAC,CAAG,CAAC,CACLhD,EAAE,CAAEH,QAAQ,CAACG,EAAE,CACfiD,KAAK,CAAEpD,QAAQ,CAACM,UAAU,CAAC+C,IAAI,CAC/BC,SAAS,CAAE,CACPvC,KAAK,CAAEV,0BAA0B,CAAE,CAAC,CAAE,EAAIA,0BAA0B,CAAE,CAAC,CAAE,CAACY,IAAI,CAC9EJ,KAAK,CAAER,0BAA0B,CAAE,CAAC,CAAE,EAAIA,0BAA0B,CAAE,CAAC,CAAE,CAACF,EAC9E,CACJ,CAAC,CAGD,mBACIN,KAAA,CAACT,YAAY,EAAAmE,QAAA,eACT5D,IAAA,CAACR,WAAW,EAACqE,KAAK,CAAEnE,mBAAmB,CAAE,qBAAsB,CAAE,CAACoE,EAAE,CAAC,gBAAgB,CAAE,CAAC,CACvFvD,SAAS,cAAGP,IAAA,QAAK+D,SAAS,CAAC,iDAAiD,CAAAH,QAAA,CAAC,YAAU,CAAK,CAAC,cAC1F5D,IAAA,CAACJ,YAAY,EAACoE,cAAc,CAAEjD,UAAW,CAACP,EAAE,CAAEA,EAAG,CAACF,UAAU,CAAEA,UAAW,CAAE,CAAC,EACtE,CAAC,CAEvB,CAAC,CAED,KAAM,CAAA2D,eAAe,CAAKC,KAAK,EAAM,CACjC,KAAM,CAAE5D,UAAU,CAAEC,SAAS,CAAEF,QAAS,CAAC,CAAG6D,KAAK,CACjD,MAAO,CAAE5D,UAAU,CAAEC,SAAS,CAAEF,QAAS,CAAC,CAC9C,CAAC,CAED,cAAe,CAAAhB,OAAO,CAAE4E,eAAe,CAAE,CAAE3E,kBAAkB,CAAEO,aAAc,CAAE,CAAC,CAAEM,YAAa,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}