{"ast":null,"code":"import React,{useEffect}from'react';import{connect}from'react-redux';import{useParams}from'react-router-dom';import{useNavigate}from'react-router-dom';import MasterLayout from'../MasterLayout';import HeaderTitle from'../header/HeaderTitle';import{fetchAllCustomer}from'../../store/action/customerAction';import{fetchAllWarehouses}from'../../store/action/warehouseAction';import status from'../../shared/option-lists/status.json';import Spinner from\"../../shared/components/loaders/Spinner\";import TopProgressBar from\"../../shared/components/loaders/TopProgressBar\";import{fetchQuotation,editQuotation}from'../../store/action/quotationAction';import SalesForm from'../sales/SalesForm';import{addSale}from'../../store/action/salesAction';import{getFormattedMessage}from'../../shared/sharedMethod';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CreateQuotationSale=props=>{const{fetchQuotation,quotations,customers,fetchAllCustomer,warehouses,fetchAllWarehouses,isLoading,addSale}=props;const{id}=useParams();const navigate=useNavigate();useEffect(()=>{fetchAllCustomer();fetchAllWarehouses();fetchQuotation(id);},[]);const addSaleData=formValue=>{addSale(formValue,navigate);};const selectedStatus=quotations&&quotations.attributes&&quotations.attributes.status&&status.filter(item=>item.value===quotations.attributes.status);const itemsValue=quotations&&quotations.attributes&&{date:quotations.attributes.date,warehouse_id:{value:quotations.attributes.warehouse_id,label:quotations.attributes.warehouse_name},customer_id:{value:quotations.attributes.customer_id,label:quotations.attributes.customer_name},tax_rate:quotations.attributes.tax_rate,tax_amount:quotations.attributes.tax_amount,discount:quotations.attributes.discount,shipping:quotations.attributes.shipping,grand_total:quotations.attributes.grand_total,amount:quotations.attributes.amount,quotation_id:id,sale_items:quotations.attributes.quotation_items.map(item=>({code:item.product&&item.product.code,name:item.product&&item.product.name,product_unit:item.product.product_unit,product_id:item.product_id,short_name:item.sale_unit&&item.sale_unit.short_name&&item.sale_unit.short_name,stock_alert:item.product&&item.product.stock_alert,product_price:item.product_price,fix_net_unit:item.product_price,net_unit_price:item.product_price,tax_type:item.tax_type,tax_value:item.tax_value,tax_amount:item.tax_amount,discount_type:item.discount_type,discount_value:item.discount_value,discount_amount:item.discount_amount,isEdit:true,stock:item.product&&item.product.stocks.filter(item=>item.warehouse_id===quotations.attributes.warehouse_id),sub_total:item.sub_total,sale_unit:item.sale_unit&&item.sale_unit.id&&item.sale_unit.id,quantity:item.quantity,id:item.id,quotation_item_id:item.id,newItem:''})),id:quotations.id,notes:quotations.attributes.note,status_id:{label:selectedStatus&&selectedStatus[0]&&selectedStatus[0].label,value:selectedStatus&&selectedStatus[0]&&selectedStatus[0].value}};return/*#__PURE__*/_jsxs(MasterLayout,{children:[/*#__PURE__*/_jsx(TopProgressBar,{}),/*#__PURE__*/_jsx(HeaderTitle,{title:getFormattedMessage(\"sale.create.title\"),to:\"/app/quotations\"}),isLoading?/*#__PURE__*/_jsx(Spinner,{}):/*#__PURE__*/_jsx(SalesForm,{singleSale:itemsValue,id:id,addSaleData:addSaleData,isQuotation:true,customers:customers,warehouses:warehouses})]});};const mapStateToProps=state=>{const{customers,warehouses,isLoading,quotations}=state;return{customers,warehouses,isLoading,quotations};};export default connect(mapStateToProps,{fetchQuotation,editQuotation,fetchAllCustomer,fetchAllWarehouses,addSale})(CreateQuotationSale);","map":{"version":3,"names":["React","useEffect","connect","useParams","useNavigate","MasterLayout","HeaderTitle","fetchAllCustomer","fetchAllWarehouses","status","Spinner","TopProgressBar","fetchQuotation","editQuotation","SalesForm","addSale","getFormattedMessage","jsx","_jsx","jsxs","_jsxs","CreateQuotationSale","props","quotations","customers","warehouses","isLoading","id","navigate","addSaleData","formValue","selectedStatus","attributes","filter","item","value","itemsValue","date","warehouse_id","label","warehouse_name","customer_id","customer_name","tax_rate","tax_amount","discount","shipping","grand_total","amount","quotation_id","sale_items","quotation_items","map","code","product","name","product_unit","product_id","short_name","sale_unit","stock_alert","product_price","fix_net_unit","net_unit_price","tax_type","tax_value","discount_type","discount_value","discount_amount","isEdit","stock","stocks","sub_total","quantity","quotation_item_id","newItem","notes","note","status_id","children","title","to","singleSale","isQuotation","mapStateToProps","state"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/quotations/CreateQuotationSale.js"],"sourcesContent":["import React, {useEffect} from 'react';\nimport {connect} from 'react-redux';\nimport {useParams} from 'react-router-dom';\nimport {useNavigate} from 'react-router-dom';\nimport MasterLayout from '../MasterLayout';\nimport HeaderTitle from '../header/HeaderTitle';\nimport {fetchAllCustomer} from '../../store/action/customerAction';\nimport {fetchAllWarehouses} from '../../store/action/warehouseAction';\nimport status from '../../shared/option-lists/status.json';\nimport Spinner from \"../../shared/components/loaders/Spinner\";\nimport TopProgressBar from \"../../shared/components/loaders/TopProgressBar\";\nimport { fetchQuotation, editQuotation } from '../../store/action/quotationAction';\nimport SalesForm from '../sales/SalesForm';\nimport { addSale } from '../../store/action/salesAction';\nimport { getFormattedMessage } from '../../shared/sharedMethod';\n\nconst CreateQuotationSale = (props) => {\n    const {fetchQuotation, quotations, customers, fetchAllCustomer, warehouses, fetchAllWarehouses, isLoading, addSale} = props;\n    const {id} = useParams();\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        fetchAllCustomer();\n        fetchAllWarehouses();\n        fetchQuotation(id)\n    }, []);\n\n    const addSaleData = (formValue) => {\n        addSale(formValue, navigate);\n    };\n\n\n    const selectedStatus = quotations && quotations.attributes && quotations.attributes.status && status.filter((item) => item.value === quotations.attributes.status)\n\n    const itemsValue = quotations && quotations.attributes && {\n        date: quotations.attributes.date,\n        warehouse_id: {\n            value: quotations.attributes.warehouse_id,\n            label: quotations.attributes.warehouse_name,\n        },\n        customer_id: {\n            value: quotations.attributes.customer_id,\n            label: quotations.attributes.customer_name,\n        },\n        tax_rate: quotations.attributes.tax_rate,\n        tax_amount: quotations.attributes.tax_amount,\n        discount: quotations.attributes.discount,\n        shipping: quotations.attributes.shipping,\n        grand_total: quotations.attributes.grand_total,\n        amount: quotations.attributes.amount,\n        quotation_id: id,\n        sale_items: quotations.attributes.quotation_items.map((item) => ({\n            code: item.product && item.product.code,\n            name: item.product && item.product.name,\n            product_unit: item.product.product_unit,\n            product_id: item.product_id,\n            short_name: item.sale_unit && item.sale_unit.short_name && item.sale_unit.short_name,\n            stock_alert:  item.product && item.product.stock_alert,\n            product_price: item.product_price,\n            fix_net_unit: item.product_price,\n            net_unit_price: item.product_price,\n            tax_type: item.tax_type,\n            tax_value: item.tax_value,\n            tax_amount: item.tax_amount,\n            discount_type: item.discount_type,\n            discount_value: item.discount_value,\n            discount_amount: item.discount_amount,\n            isEdit: true,\n            stock: item.product && item.product.stocks.filter(item => item.warehouse_id === quotations.attributes.warehouse_id),\n            sub_total: item.sub_total,\n            sale_unit: item.sale_unit && item.sale_unit.id && item.sale_unit.id,\n            quantity: item.quantity,\n            id: item.id,\n            quotation_item_id: item.id,\n            newItem: '',\n        })),\n        id: quotations.id,\n        notes: quotations.attributes.note,\n        status_id: {\n            label: selectedStatus && selectedStatus[0] && selectedStatus[0].label,\n            value: selectedStatus && selectedStatus[0] && selectedStatus[0].value\n        }\n    };\n\n    return (\n        <MasterLayout>\n            <TopProgressBar/>\n            <HeaderTitle title={getFormattedMessage(\"sale.create.title\")} to='/app/quotations'/>\n            {isLoading ? <Spinner /> :\n                <SalesForm singleSale={itemsValue} id={id} addSaleData={addSaleData} isQuotation={true} customers={customers} warehouses={warehouses}/>}\n        </MasterLayout>\n    )\n};\n\n\nconst mapStateToProps = (state) => {\n    const {customers, warehouses, isLoading, quotations} = state;\n    return {customers, warehouses, isLoading, quotations}\n};\n\nexport default connect(mapStateToProps, {fetchQuotation, editQuotation, fetchAllCustomer, fetchAllWarehouses, addSale})(CreateQuotationSale);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}