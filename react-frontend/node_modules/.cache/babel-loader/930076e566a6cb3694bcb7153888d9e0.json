{"ast":null,"code":"import React,{useEffect}from'react';import{connect}from'react-redux';import{useParams}from'react-router-dom';import QuotationForm from'./QuotationForm';import MasterLayout from'../MasterLayout';import HeaderTitle from'../header/HeaderTitle';import{fetchAllCustomer}from'../../store/action/customerAction';import{fetchAllWarehouses}from'../../store/action/warehouseAction';import Spinner from\"../../shared/components/loaders/Spinner\";import TopProgressBar from\"../../shared/components/loaders/TopProgressBar\";import{fetchQuotation,editQuotation}from'../../store/action/quotationAction';import{getFormattedMessage,getFormattedOptions}from'../../shared/sharedMethod';import{quotationStatusOptions}from'../../constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const EditQuotation=props=>{const{fetchQuotation,quotations,customers,fetchAllCustomer,warehouses,fetchAllWarehouses,isLoading}=props;const{id}=useParams();useEffect(()=>{fetchAllCustomer();fetchAllWarehouses();fetchQuotation(id);},[]);const quotationStatusFilterOptions=getFormattedOptions(quotationStatusOptions);const quotationStatusDefaultValue=quotations&&quotations.attributes&&quotations.attributes.status&&quotationStatusFilterOptions.filter(item=>item.id===quotations.attributes.status);const itemsValue=quotations&&quotations.attributes&&{date:quotations.attributes.date,warehouse_id:{value:quotations.attributes.warehouse_id,label:quotations.attributes.warehouse_name},customer_id:{value:quotations.attributes.customer_id,label:quotations.attributes.customer_name},tax_rate:quotations.attributes.tax_rate,tax_amount:quotations.attributes.tax_amount,discount:quotations.attributes.discount,shipping:quotations.attributes.shipping,grand_total:quotations.attributes.grand_total,amount:quotations.attributes.amount,quotation_items:quotations.attributes.quotation_items.map(item=>({code:item.product&&item.product.code,name:item.product&&item.product.name,product_unit:item.product.product_unit,product_id:item.product_id,short_name:item.sale_unit&&item.sale_unit.short_name&&item.sale_unit.short_name,stock_alert:item.product&&item.product.stock_alert,product_price:item.product_price,fix_net_unit:item.product_price,net_unit_price:item.product_price,tax_type:item.tax_type,tax_value:item.tax_value,tax_amount:item.tax_amount,discount_type:item.discount_type,discount_value:item.discount_value,discount_amount:item.discount_amount,isEdit:true,stock:item.product&&item.product.stocks.filter(item=>item.warehouse_id===quotations.attributes.warehouse_id),sub_total:item.sub_total,sale_unit:item.sale_unit&&item.sale_unit.id&&item.sale_unit.id,quantity:item.quantity,id:item.id,quotation_item_id:item.id,newItem:''})),id:quotations.id,notes:quotations.attributes.note,status_id:{label:quotationStatusDefaultValue&&quotationStatusDefaultValue[0]&&quotationStatusDefaultValue[0].name,value:quotationStatusDefaultValue&&quotationStatusDefaultValue[0]&&quotationStatusDefaultValue[0].id}};return/*#__PURE__*/_jsxs(MasterLayout,{children:[/*#__PURE__*/_jsx(TopProgressBar,{}),/*#__PURE__*/_jsx(HeaderTitle,{title:getFormattedMessage('edit-quotation.title'),to:\"/app/quotations\"}),isLoading?/*#__PURE__*/_jsx(Spinner,{}):/*#__PURE__*/_jsx(QuotationForm,{singleQuotation:itemsValue,id:id,customers:customers,warehouses:warehouses})]});};const mapStateToProps=state=>{const{customers,warehouses,isLoading,quotations}=state;return{customers,warehouses,isLoading,quotations};};export default connect(mapStateToProps,{fetchQuotation,editQuotation,fetchAllCustomer,fetchAllWarehouses})(EditQuotation);","map":{"version":3,"names":["React","useEffect","connect","useParams","QuotationForm","MasterLayout","HeaderTitle","fetchAllCustomer","fetchAllWarehouses","Spinner","TopProgressBar","fetchQuotation","editQuotation","getFormattedMessage","getFormattedOptions","quotationStatusOptions","jsx","_jsx","jsxs","_jsxs","EditQuotation","props","quotations","customers","warehouses","isLoading","id","quotationStatusFilterOptions","quotationStatusDefaultValue","attributes","status","filter","item","itemsValue","date","warehouse_id","value","label","warehouse_name","customer_id","customer_name","tax_rate","tax_amount","discount","shipping","grand_total","amount","quotation_items","map","code","product","name","product_unit","product_id","short_name","sale_unit","stock_alert","product_price","fix_net_unit","net_unit_price","tax_type","tax_value","discount_type","discount_value","discount_amount","isEdit","stock","stocks","sub_total","quantity","quotation_item_id","newItem","notes","note","status_id","children","title","to","singleQuotation","mapStateToProps","state"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/quotations/EditQuotation.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport QuotationForm from './QuotationForm';\nimport MasterLayout from '../MasterLayout';\nimport HeaderTitle from '../header/HeaderTitle';\nimport { fetchAllCustomer } from '../../store/action/customerAction';\nimport { fetchAllWarehouses } from '../../store/action/warehouseAction';\nimport Spinner from \"../../shared/components/loaders/Spinner\";\nimport TopProgressBar from \"../../shared/components/loaders/TopProgressBar\";\nimport { fetchQuotation, editQuotation } from '../../store/action/quotationAction';\nimport { getFormattedMessage, getFormattedOptions } from '../../shared/sharedMethod';\nimport { quotationStatusOptions } from '../../constants';\n\nconst EditQuotation = ( props ) => {\n    const { fetchQuotation, quotations, customers, fetchAllCustomer, warehouses, fetchAllWarehouses, isLoading } = props;\n    const { id } = useParams();\n\n    useEffect( () => {\n        fetchAllCustomer();\n        fetchAllWarehouses();\n        fetchQuotation( id );\n    }, [] );\n\n    const quotationStatusFilterOptions = getFormattedOptions( quotationStatusOptions )\n    const quotationStatusDefaultValue = quotations && quotations.attributes && quotations.attributes.status && quotationStatusFilterOptions.filter( ( item ) => item.id === quotations.attributes.status )\n\n    const itemsValue = quotations && quotations.attributes && {\n        date: quotations.attributes.date,\n        warehouse_id: {\n            value: quotations.attributes.warehouse_id,\n            label: quotations.attributes.warehouse_name,\n        },\n        customer_id: {\n            value: quotations.attributes.customer_id,\n            label: quotations.attributes.customer_name,\n        },\n        tax_rate: quotations.attributes.tax_rate,\n        tax_amount: quotations.attributes.tax_amount,\n        discount: quotations.attributes.discount,\n        shipping: quotations.attributes.shipping,\n        grand_total: quotations.attributes.grand_total,\n        amount: quotations.attributes.amount,\n        quotation_items: quotations.attributes.quotation_items.map( ( item ) => ( {\n            code: item.product && item.product.code,\n            name: item.product && item.product.name,\n            product_unit: item.product.product_unit,\n            product_id: item.product_id,\n            short_name: item.sale_unit && item.sale_unit.short_name && item.sale_unit.short_name,\n            stock_alert: item.product && item.product.stock_alert,\n            product_price: item.product_price,\n            fix_net_unit: item.product_price,\n            net_unit_price: item.product_price,\n            tax_type: item.tax_type,\n            tax_value: item.tax_value,\n            tax_amount: item.tax_amount,\n            discount_type: item.discount_type,\n            discount_value: item.discount_value,\n            discount_amount: item.discount_amount,\n            isEdit: true,\n            stock: item.product && item.product.stocks.filter( item => item.warehouse_id === quotations.attributes.warehouse_id ),\n            sub_total: item.sub_total,\n            sale_unit: item.sale_unit && item.sale_unit.id && item.sale_unit.id,\n            quantity: item.quantity,\n            id: item.id,\n            quotation_item_id: item.id,\n            newItem: '',\n        } ) ),\n        id: quotations.id,\n        notes: quotations.attributes.note,\n        status_id: {\n            label: quotationStatusDefaultValue && quotationStatusDefaultValue[ 0 ] && quotationStatusDefaultValue[ 0 ].name,\n            value: quotationStatusDefaultValue && quotationStatusDefaultValue[ 0 ] && quotationStatusDefaultValue[ 0 ].id\n        }\n    };\n\n    return (\n        <MasterLayout>\n            <TopProgressBar />\n            <HeaderTitle title={getFormattedMessage( 'edit-quotation.title' )} to='/app/quotations' />\n            {isLoading ? <Spinner /> :\n                <QuotationForm singleQuotation={itemsValue} id={id} customers={customers} warehouses={warehouses} />}\n        </MasterLayout>\n    )\n};\n\nconst mapStateToProps = ( state ) => {\n    const { customers, warehouses, isLoading, quotations } = state;\n    return { customers, warehouses, isLoading, quotations }\n};\n\nexport default connect( mapStateToProps, { fetchQuotation, editQuotation, fetchAllCustomer, fetchAllWarehouses } )( EditQuotation );\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}