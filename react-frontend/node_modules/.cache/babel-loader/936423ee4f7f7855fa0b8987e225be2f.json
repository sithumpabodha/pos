{"ast":null,"code":"import React,{useEffect}from'react';import{connect}from'react-redux';import{useParams}from'react-router-dom';import SalesForm from'./SalesForm';import MasterLayout from'../MasterLayout';import HeaderTitle from'../header/HeaderTitle';import{editSale,fetchSale}from'../../store/action/salesAction';import{fetchAllCustomer}from'../../store/action/customerAction';import{fetchAllWarehouses}from'../../store/action/warehouseAction';import{getFormattedMessage,getFormattedOptions}from'../../shared/sharedMethod';import paymentStatus from'../../shared/option-lists/paymentStatus.json';import paymentType from'../../shared/option-lists/paymentType.json';import Spinner from\"../../shared/components/loaders/Spinner\";import TopProgressBar from\"../../shared/components/loaders/TopProgressBar\";import{saleStatusOptions}from'../../constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const EditSale=props=>{const{fetchSale,sales,customers,fetchAllCustomer,warehouses,fetchAllWarehouses,isLoading}=props;const{id}=useParams();useEffect(()=>{fetchAllCustomer();fetchAllWarehouses();fetchSale(id);},[]);const statusFilterOptions=getFormattedOptions(saleStatusOptions);const statusDefaultValue=sales.attributes&&sales.attributes.status&&statusFilterOptions.filter(option=>option.id===sales.attributes.status);const selectedPayment=sales.attributes&&sales.attributes.payment_status&&paymentStatus.filter(item=>item.value===sales.attributes.payment_status);const selectedPaymentType=sales.attributes&&sales.attributes.payment_type&&paymentType.filter(item=>item.value===sales.attributes.payment_type);const itemsValue=sales&&sales.attributes&&{date:sales.attributes.date,warehouse_id:{value:sales.attributes.warehouse_id,label:sales.attributes.warehouse_name},customer_id:{value:sales.attributes.customer_id,label:sales.attributes.customer_name},tax_rate:sales.attributes.tax_rate,tax_amount:sales.attributes.tax_amount,discount:sales.attributes.discount,shipping:sales.attributes.shipping,grand_total:sales.attributes.grand_total,amount:sales.attributes.amount,sale_items:sales.attributes.sale_items.map(item=>({code:item.product&&item.product.code,name:item.product&&item.product.name,product_unit:item.product.product_unit,product_id:item.product_id,short_name:item.sale_unit&&item.sale_unit.short_name&&item.sale_unit.short_name,stock_alert:item.product&&item.product.stock_alert,product_price:item.product_price,fix_net_unit:item.product_price,net_unit_price:item.product_price,tax_type:item.tax_type,tax_value:item.tax_value,tax_amount:item.tax_amount,discount_type:item.discount_type,discount_value:item.discount_value,discount_amount:item.discount_amount,isEdit:true,stock:item.product&&item.product.stocks.filter(item=>item.warehouse_id===sales.attributes.warehouse_id),sub_total:item.sub_total,sale_unit:item.sale_unit&&item.sale_unit.id&&item.sale_unit.id,quantity:item.quantity,id:item.id,sale_item_id:item.id,newItem:'',quantity_limit:item.product.quantity_limit})),id:sales.id,notes:sales.attributes.note,is_Partial:sales.attributes.payment_status,payment_status:{label:selectedPayment&&selectedPayment[0]&&selectedPayment[0].label,value:selectedPayment&&selectedPayment[0]&&selectedPayment[0].value},payment_type:{label:selectedPaymentType&&selectedPaymentType[0]&&selectedPaymentType[0].label,value:selectedPaymentType&&selectedPaymentType[0]&&selectedPaymentType[0].value},status_id:{label:statusDefaultValue&&statusDefaultValue[0]&&statusDefaultValue[0].name,value:statusDefaultValue&&statusDefaultValue[0]&&statusDefaultValue[0].id}};return/*#__PURE__*/_jsxs(MasterLayout,{children:[/*#__PURE__*/_jsx(TopProgressBar,{}),/*#__PURE__*/_jsx(HeaderTitle,{title:getFormattedMessage('sale.edit.title'),to:\"/app/sales\"}),isLoading?/*#__PURE__*/_jsx(Spinner,{}):/*#__PURE__*/_jsx(SalesForm,{singleSale:itemsValue,id:id,customers:customers,warehouses:warehouses})]});};const mapStateToProps=state=>{const{sales,customers,warehouses,isLoading}=state;return{sales,customers,warehouses,isLoading};};export default connect(mapStateToProps,{fetchSale,editSale,fetchAllCustomer,fetchAllWarehouses})(EditSale);","map":{"version":3,"names":["React","useEffect","connect","useParams","SalesForm","MasterLayout","HeaderTitle","editSale","fetchSale","fetchAllCustomer","fetchAllWarehouses","getFormattedMessage","getFormattedOptions","paymentStatus","paymentType","Spinner","TopProgressBar","saleStatusOptions","jsx","_jsx","jsxs","_jsxs","EditSale","props","sales","customers","warehouses","isLoading","id","statusFilterOptions","statusDefaultValue","attributes","status","filter","option","selectedPayment","payment_status","item","value","selectedPaymentType","payment_type","itemsValue","date","warehouse_id","label","warehouse_name","customer_id","customer_name","tax_rate","tax_amount","discount","shipping","grand_total","amount","sale_items","map","code","product","name","product_unit","product_id","short_name","sale_unit","stock_alert","product_price","fix_net_unit","net_unit_price","tax_type","tax_value","discount_type","discount_value","discount_amount","isEdit","stock","stocks","sub_total","quantity","sale_item_id","newItem","quantity_limit","notes","note","is_Partial","status_id","children","title","to","singleSale","mapStateToProps","state"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/sales/EditSale.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport SalesForm from './SalesForm';\nimport MasterLayout from '../MasterLayout';\nimport HeaderTitle from '../header/HeaderTitle';\nimport { editSale, fetchSale } from '../../store/action/salesAction';\nimport { fetchAllCustomer } from '../../store/action/customerAction';\nimport { fetchAllWarehouses } from '../../store/action/warehouseAction';\nimport { getFormattedMessage, getFormattedOptions } from '../../shared/sharedMethod';\nimport paymentStatus from '../../shared/option-lists/paymentStatus.json';\nimport paymentType from '../../shared/option-lists/paymentType.json';\nimport Spinner from \"../../shared/components/loaders/Spinner\";\nimport TopProgressBar from \"../../shared/components/loaders/TopProgressBar\";\nimport { saleStatusOptions } from '../../constants';\n\nconst EditSale = ( props ) => {\n    const { fetchSale, sales, customers, fetchAllCustomer, warehouses, fetchAllWarehouses, isLoading } = props;\n    const { id } = useParams();\n\n    useEffect( () => {\n        fetchAllCustomer();\n        fetchAllWarehouses();\n        fetchSale( id );\n    }, [] );\n\n    const statusFilterOptions = getFormattedOptions( saleStatusOptions )\n    const statusDefaultValue = sales.attributes && sales.attributes.status && statusFilterOptions.filter( ( option ) => option.id === sales.attributes.status )\n    const selectedPayment = sales.attributes && sales.attributes.payment_status && paymentStatus.filter( ( item ) => item.value === sales.attributes.payment_status )\n    const selectedPaymentType = sales.attributes && sales.attributes.payment_type && paymentType.filter( ( item ) => item.value === sales.attributes.payment_type )\n\n    const itemsValue = sales && sales.attributes && {\n        date: sales.attributes.date,\n        warehouse_id: {\n            value: sales.attributes.warehouse_id,\n            label: sales.attributes.warehouse_name,\n        },\n        customer_id: {\n            value: sales.attributes.customer_id,\n            label: sales.attributes.customer_name,\n        },\n        tax_rate: sales.attributes.tax_rate,\n        tax_amount: sales.attributes.tax_amount,\n        discount: sales.attributes.discount,\n        shipping: sales.attributes.shipping,\n        grand_total: sales.attributes.grand_total,\n        amount: sales.attributes.amount,\n        sale_items: sales.attributes.sale_items.map( ( item ) => ( {\n            code: item.product && item.product.code,\n            name: item.product && item.product.name,\n            product_unit: item.product.product_unit,\n            product_id: item.product_id,\n            short_name: item.sale_unit && item.sale_unit.short_name && item.sale_unit.short_name,\n            stock_alert: item.product && item.product.stock_alert,\n            product_price: item.product_price,\n            fix_net_unit: item.product_price,\n            net_unit_price: item.product_price,\n            tax_type: item.tax_type,\n            tax_value: item.tax_value,\n            tax_amount: item.tax_amount,\n            discount_type: item.discount_type,\n            discount_value: item.discount_value,\n            discount_amount: item.discount_amount,\n            isEdit: true,\n            stock: item.product && item.product.stocks.filter( item => item.warehouse_id === sales.attributes.warehouse_id ),\n            sub_total: item.sub_total,\n            sale_unit: item.sale_unit && item.sale_unit.id && item.sale_unit.id,\n            quantity: item.quantity,\n            id: item.id,\n            sale_item_id: item.id,\n            newItem: '',\n            quantity_limit:item.product.quantity_limit\n        } ) ),\n        id: sales.id,\n        notes: sales.attributes.note,\n        is_Partial: sales.attributes.payment_status,\n        payment_status: {\n            label: selectedPayment && selectedPayment[ 0 ] && selectedPayment[ 0 ].label,\n            value: selectedPayment && selectedPayment[ 0 ] && selectedPayment[ 0 ].value\n        },\n        payment_type: {\n            label: selectedPaymentType && selectedPaymentType[ 0 ] && selectedPaymentType[ 0 ].label,\n            value: selectedPaymentType && selectedPaymentType[ 0 ] && selectedPaymentType[ 0 ].value\n        },\n        status_id: {\n            label: statusDefaultValue && statusDefaultValue[ 0 ] && statusDefaultValue[ 0 ].name,\n            value: statusDefaultValue && statusDefaultValue[ 0 ] && statusDefaultValue[ 0 ].id\n        }\n    };\n\n    return (\n        <MasterLayout>\n            <TopProgressBar />\n            <HeaderTitle title={getFormattedMessage( 'sale.edit.title' )} to='/app/sales' />\n            {isLoading ? <Spinner /> :\n                <SalesForm singleSale={itemsValue} id={id} customers={customers} warehouses={warehouses} />}\n        </MasterLayout>\n    )\n};\n\nconst mapStateToProps = ( state ) => {\n    const { sales, customers, warehouses, isLoading } = state;\n    return { sales, customers, warehouses, isLoading }\n};\n\nexport default connect( mapStateToProps, { fetchSale, editSale, fetchAllCustomer, fetchAllWarehouses } )( EditSale );\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}