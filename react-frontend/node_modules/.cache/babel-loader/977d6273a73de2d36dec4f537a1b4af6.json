{"ast":null,"code":"import React,{useEffect,useState}from'react';import{connect}from'react-redux';import{useNavigate,useParams}from'react-router-dom';import TabTitle from'../../shared/tab-title/TabTitle';import{resetPassword}from'../../store/action/authAction';import{fetchFrontSetting}from'../../store/action/frontSettingAction';import{getFormattedMessage,placeholderText}from'../../shared/sharedMethod';import{Image}from'react-bootstrap-v5';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ResetPassword=props=>{const{resetPassword,fetchFrontSetting,frontSetting}=props;const navigate=useNavigate();const{token,email}=useParams();const[resetValue,setResetValue]=useState({password:'',password_confirmation:'',email:email,token:token});const[errors,setErrors]=useState({password:'',password_confirmation:''});useEffect(()=>{fetchFrontSetting();},[]);const handleValidation=()=>{let errorss={};let isValid=false;if(!resetValue['password']){errorss['password']=getFormattedMessage('user.input.password.validate.label');}else if(!resetValue['password_confirmation']){errorss['password_confirmation']=getFormattedMessage('user.input.confirm-password.validate.label');}else if(resetValue['password']!==resetValue['password_confirmation']){errorss['password_confirmation']='The confirm password and password must match';}else{isValid=true;}setErrors(errorss);return isValid;};const prepareFormData=data=>{const formData=new FormData();formData.append('password',data.password);formData.append('password_confirmation',data.password_confirmation);formData.append('email',data.email);formData.append('token',data.token);return formData;};const handleChange=e=>{e.persist();setResetValue(inputs=>({...inputs,[e.target.name]:e.target.value}));setErrors('');};const onSubmit=e=>{e.preventDefault();const Valid=handleValidation();if(Valid){resetPassword(prepareFormData(resetValue),navigate);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-center flex-column flex-column-fluid p-10 pb-lg-20 vh-100\",children:[/*#__PURE__*/_jsx(TabTitle,{title:\"Reset Password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-12 col-12 text-center\",children:/*#__PURE__*/_jsx(Image,{className:\"logo-height\",src:frontSetting&&frontSetting.value&&frontSetting.value.logo})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-15 shadow-md width-540 px-5 px-sm-7 py-10 mx-auto\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"form w-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-10\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-dark mb-3\",children:getFormattedMessage('reset-password.title')})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-5\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[getFormattedMessage('user.input.password.label'),\" :\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"required\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:placeholderText('user.input.password.placeholder.label'),name:\"password\",value:resetValue.password,required:true,onChange:e=>handleChange(e)}),/*#__PURE__*/_jsx(\"span\",{className:\"text-danger d-block fw-400 fs-small mt-2\",children:errors['password']?errors['password']:null})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-10\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:getFormattedMessage('change-password.input.confirm.label')}),/*#__PURE__*/_jsx(\"span\",{className:\"required\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:placeholderText('change-password.input.confirm.placeholder.label'),name:\"password_confirmation\",value:resetValue.password_confirmation,required:true,onChange:e=>handleChange(e)}),/*#__PURE__*/_jsx(\"span\",{className:\"text-danger d-block fw-400 fs-small mt-2\",children:errors['password_confirmation']?errors['password_confirmation']:null})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center pb-lg-0\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary me-4\",onClick:e=>onSubmit(e),children:/*#__PURE__*/_jsx(\"span\",{children:getFormattedMessage('reset-password.title')})})})]})})]});};const mapStateToProps=state=>{const{frontSetting}=state;return{frontSetting};};export default connect(mapStateToProps,{resetPassword,fetchFrontSetting})(ResetPassword);","map":{"version":3,"names":["React","useEffect","useState","connect","useNavigate","useParams","TabTitle","resetPassword","fetchFrontSetting","getFormattedMessage","placeholderText","Image","jsx","_jsx","jsxs","_jsxs","ResetPassword","props","frontSetting","navigate","token","email","resetValue","setResetValue","password","password_confirmation","errors","setErrors","handleValidation","errorss","isValid","prepareFormData","data","formData","FormData","append","handleChange","e","persist","inputs","target","name","value","onSubmit","preventDefault","Valid","className","children","title","src","logo","type","placeholder","required","onChange","onClick","mapStateToProps","state"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/auth/ResetPassword.js"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport {connect} from 'react-redux';\nimport {useNavigate, useParams} from 'react-router-dom';\nimport TabTitle from '../../shared/tab-title/TabTitle';\nimport {resetPassword} from '../../store/action/authAction';\nimport {fetchFrontSetting} from '../../store/action/frontSettingAction';\nimport {getFormattedMessage, placeholderText} from '../../shared/sharedMethod';\nimport {Image} from 'react-bootstrap-v5';\n\nconst ResetPassword = (props) => {\n    const {resetPassword, fetchFrontSetting, frontSetting} = props\n    const navigate = useNavigate();\n    const {token, email} = useParams();\n    const [resetValue, setResetValue] = useState({\n        password: '',\n        password_confirmation: '',\n        email: email,\n        token: token\n    });\n\n    const [errors, setErrors] = useState({\n        password: '',\n        password_confirmation: '',\n    });\n\n    useEffect(() => {\n        fetchFrontSetting();\n    }, []);\n\n    const handleValidation = () => {\n        let errorss = {};\n        let isValid = false;\n        if (!resetValue['password']) {\n            errorss['password'] = getFormattedMessage('user.input.password.validate.label');\n        } else if (!resetValue['password_confirmation']) {\n            errorss['password_confirmation'] = getFormattedMessage('user.input.confirm-password.validate.label');\n        } else if (resetValue['password'] !== resetValue['password_confirmation']) {\n            errorss['password_confirmation'] = 'The confirm password and password must match';\n        } else {\n            isValid = true;\n        }\n        setErrors(errorss);\n        return isValid;\n    };\n\n    const prepareFormData = (data) => {\n        const formData = new FormData();\n        formData.append('password', data.password);\n        formData.append('password_confirmation', data.password_confirmation);\n        formData.append('email', data.email);\n        formData.append('token', data.token);\n        return formData;\n    };\n\n    const handleChange = (e) => {\n        e.persist();\n        setResetValue(inputs => ({...inputs, [e.target.name]: e.target.value}));\n        setErrors('');\n    };\n\n    const onSubmit = (e) => {\n        e.preventDefault();\n        const Valid = handleValidation();\n        if (Valid) {\n            resetPassword(prepareFormData(resetValue), navigate);\n        }\n    };\n\n    return (\n        <div className='d-flex flex-center flex-column flex-column-fluid p-10 pb-lg-20 vh-100'>\n            <TabTitle title='Reset Password'/>\n            <div className='mb-12 col-12 text-center'>\n                <Image className='logo-height' src={frontSetting && frontSetting.value && frontSetting.value.logo}/>\n            </div>\n            <div className='bg-white rounded-15 shadow-md width-540 px-5 px-sm-7 py-10 mx-auto'>\n                <form className='form w-100'>\n                    <div className='text-center mb-10'>\n                        <h1 className='text-dark mb-3'>{getFormattedMessage('reset-password.title')}</h1>\n                    </div>\n                    <div className='mb-5'>\n                        <label className='form-label'>{getFormattedMessage('user.input.password.label')} :</label>\n                        <span className='required'/>\n                        <input type='password' className='form-control'\n                               placeholder={placeholderText('user.input.password.placeholder.label')}\n                               name='password' value={resetValue.password} required\n                               onChange={(e) => handleChange(e)}\n                        />\n                            <span className='text-danger d-block fw-400 fs-small mt-2'>{errors['password'] ? errors['password'] : null}</span>\n                    </div>\n\n                    <div className='mb-10'>\n                        <label className='form-label'>{getFormattedMessage('change-password.input.confirm.label')}</label>\n                        <span className='required'/>\n                        <input type='password' className='form-control'\n                               placeholder={placeholderText('change-password.input.confirm.placeholder.label')}\n                               name='password_confirmation' value={resetValue.password_confirmation} required\n                               onChange={(e) => handleChange(e)}\n                        />\n                            <span\n                                className='text-danger d-block fw-400 fs-small mt-2'>{errors['password_confirmation'] ? errors['password_confirmation'] : null}</span>\n                    </div>\n\n                    <div className='d-flex justify-content-center pb-lg-0'>\n                        <button\n                            type='submit' className='btn btn-primary me-4'\n                            onClick={(e) => onSubmit(e)}\n                        >\n                            {\n                                <span>{getFormattedMessage('reset-password.title')}</span>\n                            }\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    )\n};\n\nconst mapStateToProps = (state) => {\n    const {frontSetting} = state;\n    return {frontSetting}\n};\n\nexport default connect(mapStateToProps, {resetPassword, fetchFrontSetting})(ResetPassword);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}