{"ast":null,"code":"import React,{useEffect}from'react';import{connect}from'react-redux';import{useParams}from'react-router-dom';import{fetchAllWarehouses}from'../../store/action/warehouseAction';import HeaderTitle from'../header/HeaderTitle';import MasterLayout from'../MasterLayout';import PurchaseReturnForm from'./PurchaseReturnForm';import{fetchAllSuppliers}from'../../store/action/supplierAction';import{fetchPurchaseReturn}from'../../store/action/purchaseReturnAction';import{getFormattedMessage,getFormattedOptions}from'../../shared/sharedMethod';import{editPurchaseReturnArray}from'./editPurchaseReturnArray';import TopProgressBar from\"../../shared/components/loaders/TopProgressBar\";import{saleStatusOptions}from'../../constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const EditPurchaseReturn=props=>{const{fetchPurchaseReturn,purchaseReturn,warehouses,fetchAllSuppliers,suppliers,fetchAllWarehouses}=props;const{id}=useParams();useEffect(()=>{fetchAllWarehouses();fetchAllSuppliers();fetchPurchaseReturn(id);},[]);const supplierId=purchaseReturn&&purchaseReturn.attributes&&purchaseReturn.attributes.supplier_id;const warehouseId=purchaseReturn&&purchaseReturn.attributes&&purchaseReturn.attributes.warehouse_id;const supplier=suppliers&&suppliers.filter(supplier=>supplier.id===supplierId);const supplierName=supplier[0]&&supplier[0].attributes&&supplier[0].attributes.name;const warehouse=warehouses.filter(warehouse=>warehouse.id===warehouseId);const warehouseName=warehouse[0]&&warehouse[0].attributes&&warehouse[0].attributes.name;const statusFilterOptions=getFormattedOptions(saleStatusOptions);const statusDefaultValue=purchaseReturn&&purchaseReturn.attributes&&purchaseReturn.attributes.status&&statusFilterOptions.filter(item=>item.id===purchaseReturn.attributes.status);purchaseReturn&&purchaseReturn.attributes&&purchaseReturn.attributes.purchase_return_items.forEach(item=>{item.fix_net_unit=item.product_cost;item.stock_alert=item.product&&item.product.stock_alert;item.short_name=item.purchase_unit.short_name;item.newItem='';item.purchase_return_item_id=item.id;item.code=item.product&&item.product.code;item.name=item.product&&item.product.name;});const itemsValue=purchaseReturn&&purchaseReturn.attributes&&{date:purchaseReturn.attributes.date,warehouse_id:{value:purchaseReturn.attributes.warehouse_id,label:warehouseName},supplier_id:{value:purchaseReturn.attributes.supplier_id,label:supplierName},discount:purchaseReturn.attributes.discount,orderTax:purchaseReturn.attributes.tax_rate,shipping:purchaseReturn.attributes.shipping,notes:purchaseReturn.attributes.notes,purchase_return_items:editPurchaseReturnArray(purchaseReturn.attributes.purchase_return_items,purchaseReturn.attributes.warehouse_id),newItem:'',id:purchaseReturn.id,status_id:{label:statusDefaultValue[0]&&statusDefaultValue[0].name,value:statusDefaultValue[0]&&statusDefaultValue[0].id}};return/*#__PURE__*/_jsxs(MasterLayout,{children:[/*#__PURE__*/_jsx(TopProgressBar,{}),/*#__PURE__*/_jsx(HeaderTitle,{title:getFormattedMessage('purchase.return.edit.title'),to:\"/app/purchase-return\"}),purchaseReturn&&supplierName&&warehouseName&&/*#__PURE__*/_jsx(PurchaseReturnForm,{singlePurchase:itemsValue,id:id,warehouses:warehouses,suppliers:suppliers})]});};const mapStateToProps=state=>{const{purchaseReturn,warehouses,suppliers}=state;return{purchaseReturn,warehouses,suppliers};};export default connect(mapStateToProps,{fetchPurchaseReturn,fetchAllSuppliers,fetchAllWarehouses})(EditPurchaseReturn);","map":{"version":3,"names":["React","useEffect","connect","useParams","fetchAllWarehouses","HeaderTitle","MasterLayout","PurchaseReturnForm","fetchAllSuppliers","fetchPurchaseReturn","getFormattedMessage","getFormattedOptions","editPurchaseReturnArray","TopProgressBar","saleStatusOptions","jsx","_jsx","jsxs","_jsxs","EditPurchaseReturn","props","purchaseReturn","warehouses","suppliers","id","supplierId","attributes","supplier_id","warehouseId","warehouse_id","supplier","filter","supplierName","name","warehouse","warehouseName","statusFilterOptions","statusDefaultValue","status","item","purchase_return_items","forEach","fix_net_unit","product_cost","stock_alert","product","short_name","purchase_unit","newItem","purchase_return_item_id","code","itemsValue","date","value","label","discount","orderTax","tax_rate","shipping","notes","status_id","children","title","to","singlePurchase","mapStateToProps","state"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/purchaseReturn/EditPurchaseReturn.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { useParams } from 'react-router-dom'\nimport { fetchAllWarehouses } from '../../store/action/warehouseAction';\nimport HeaderTitle from '../header/HeaderTitle';\nimport MasterLayout from '../MasterLayout';\nimport PurchaseReturnForm from './PurchaseReturnForm';\nimport { fetchAllSuppliers } from '../../store/action/supplierAction';\nimport { fetchPurchaseReturn } from '../../store/action/purchaseReturnAction';\nimport { getFormattedMessage, getFormattedOptions } from '../../shared/sharedMethod';\nimport { editPurchaseReturnArray } from './editPurchaseReturnArray';\nimport TopProgressBar from \"../../shared/components/loaders/TopProgressBar\";\nimport { saleStatusOptions } from '../../constants';\n\nconst EditPurchaseReturn = ( props ) => {\n    const { fetchPurchaseReturn, purchaseReturn, warehouses, fetchAllSuppliers, suppliers, fetchAllWarehouses } = props;\n    const { id } = useParams();\n\n    useEffect( () => {\n        fetchAllWarehouses();\n        fetchAllSuppliers();\n        fetchPurchaseReturn( id );\n    }, [] );\n\n    const supplierId = purchaseReturn && purchaseReturn.attributes && purchaseReturn.attributes.supplier_id\n    const warehouseId = purchaseReturn && purchaseReturn.attributes && purchaseReturn.attributes.warehouse_id\n    const supplier = suppliers && suppliers.filter( ( supplier ) => supplier.id === supplierId );\n    const supplierName = supplier[ 0 ] && supplier[ 0 ].attributes && supplier[ 0 ].attributes.name\n    const warehouse = warehouses.filter( ( warehouse ) => warehouse.id === warehouseId );\n    const warehouseName = warehouse[ 0 ] && warehouse[ 0 ].attributes && warehouse[ 0 ].attributes.name\n\n    const statusFilterOptions = getFormattedOptions( saleStatusOptions )\n    const statusDefaultValue = purchaseReturn && purchaseReturn.attributes && purchaseReturn.attributes.status && statusFilterOptions.filter( ( item ) => item.id === purchaseReturn.attributes.status )\n\n    purchaseReturn && purchaseReturn.attributes && purchaseReturn.attributes.purchase_return_items.forEach( ( item ) => {\n        item.fix_net_unit = item.product_cost\n        item.stock_alert = item.product && item.product.stock_alert\n        item.short_name = item.purchase_unit.short_name\n        item.newItem = ''\n        item.purchase_return_item_id = item.id\n        item.code = item.product && item.product.code\n        item.name = item.product && item.product.name\n    } )\n\n    const itemsValue = purchaseReturn && purchaseReturn.attributes && {\n        date: purchaseReturn.attributes.date,\n        warehouse_id: {\n            value: purchaseReturn.attributes.warehouse_id,\n            label: warehouseName,\n        },\n        supplier_id: {\n            value: purchaseReturn.attributes.supplier_id,\n            label: supplierName,\n        },\n        discount: purchaseReturn.attributes.discount,\n        orderTax: purchaseReturn.attributes.tax_rate,\n        shipping: purchaseReturn.attributes.shipping,\n        notes: purchaseReturn.attributes.notes,\n        purchase_return_items: editPurchaseReturnArray( purchaseReturn.attributes.purchase_return_items, purchaseReturn.attributes.warehouse_id ),\n        newItem: '',\n        id: purchaseReturn.id,\n        status_id: {\n            label: statusDefaultValue[ 0 ] && statusDefaultValue[ 0 ].name,\n            value: statusDefaultValue[ 0 ] && statusDefaultValue[ 0 ].id\n        }\n    };\n    return (\n        <MasterLayout>\n            <TopProgressBar />\n            <HeaderTitle title={getFormattedMessage( 'purchase.return.edit.title' )} to='/app/purchase-return' />\n            {purchaseReturn && supplierName && warehouseName &&\n                <PurchaseReturnForm singlePurchase={itemsValue} id={id} warehouses={warehouses}\n                    suppliers={suppliers} />}\n        </MasterLayout>\n    )\n};\n\nconst mapStateToProps = ( state ) => {\n    const { purchaseReturn, warehouses, suppliers } = state;\n    return { purchaseReturn, warehouses, suppliers }\n};\n\nexport default connect( mapStateToProps, { fetchPurchaseReturn, fetchAllSuppliers, fetchAllWarehouses } )( EditPurchaseReturn );\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}