{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import moment from\"moment/moment\";import ReactDataTable from\"../../../../shared/table/ReactDataTable\";import{currencySymbolHandling,getFormattedMessage}from\"../../../../shared/sharedMethod\";import{stockDetailsSaleTabAction}from\"../../../../store/action/stockDetailsSaleTabAction\";import{fetchFrontSetting}from\"../../../../store/action/frontSettingAction\";import{stockDetailsSaleExcel}from\"../../../../store/action/stockDetailsSaleExcel\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const SaleTabs=props=>{const{isLoading,totalRecord,stockDetailsSaleTabAction,frontSetting,fetchFrontSetting,warehouseValue,stockDetailsSaleExcel,stockDetailsSales,id,allConfigData}=props;const currencySymbol=frontSetting&&frontSetting.value&&frontSetting.value.currency_symbol;const[isWarehouseValue,setIsWarehouseValue]=useState(false);useEffect(()=>{if(isWarehouseValue===true){stockDetailsSaleExcel(id,setIsWarehouseValue);}},[isWarehouseValue]);useEffect(()=>{fetchFrontSetting();},[warehouseValue]);const itemsValue=currencySymbol&&stockDetailsSales.length>=0&&stockDetailsSales.map(sale=>({time:moment(sale.attributes.created_at).format(\"LT\"),date:moment(sale.attributes.date).format(\"YYYY-MM-DD\"),reference_code:sale.attributes.reference_code,customer_name:sale.attributes.customer_name,warehouse_name:sale.attributes.warehouse_name,id:sale.id,sale_items:sale.attributes.sale_items.map(item=>({name:item.product&&item.product.name,sub_total:item.sub_total,quantity:item.quantity,product_id:item.product_id})),currency:currencySymbol}));const columns=[{name:getFormattedMessage(\"globally.react-table.column.created-date.label\"),sortField:\"date\",sortable:true,cell:row=>{return/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-light-primary\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-1\",children:row.time}),/*#__PURE__*/_jsx(\"div\",{children:row.date})]});}},{name:getFormattedMessage(\"dashboard.recentSales.reference.label\"),sortField:\"reference_code\",sortable:false,cell:row=>{return/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-light-danger\",children:/*#__PURE__*/_jsx(\"span\",{children:row.reference_code})});}},{name:getFormattedMessage(\"supplier.table.name.column.title\"),sortField:\"name\",sortable:false,cell:row=>{return row.sale_items.map(item=>item.product_id===Number(id)?item.name:\"\");}},{name:getFormattedMessage(\"customer.title\"),selector:row=>row.customer_name,sortField:\"customer_name\",sortable:false},{name:getFormattedMessage(\"warehouse.title\"),selector:row=>row.warehouse_name,sortField:\"warehouse_name\",sortable:false},{name:getFormattedMessage(\"globally.detail.quantity\"),sortField:\"quantity\",sortable:false,cell:row=>{return row.sale_items.map(item=>item.product_id===Number(id)?/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-light-info\",children:/*#__PURE__*/_jsx(\"span\",{children:item.quantity})}):\"\");}},{name:getFormattedMessage(\"globally.detail.subtotal\"),sortField:\"sub_total\",sortable:false,cell:row=>{return row.sale_items.map(item=>item.product_id===Number(id)?currencySymbolHandling(allConfigData,row.currency,item.sub_total):\"\");}}];const onChange=filter=>{stockDetailsSaleTabAction(id,filter,true);};const onExcelClick=()=>{setIsWarehouseValue(true);};return/*#__PURE__*/_jsx(ReactDataTable,{columns:columns,items:itemsValue,onChange:onChange,warehouseValue:warehouseValue,isLoading:isLoading,totalRows:totalRecord,isEXCEL:true,onExcelClick:onExcelClick});};const mapStateToProps=state=>{const{isLoading,totalRecord,stockDetailsSales,frontSetting}=state;return{isLoading,totalRecord,stockDetailsSales,frontSetting};};export default connect(mapStateToProps,{fetchFrontSetting,stockDetailsSaleExcel,stockDetailsSaleTabAction})(SaleTabs);","map":{"version":3,"names":["React","useEffect","useState","connect","moment","ReactDataTable","currencySymbolHandling","getFormattedMessage","stockDetailsSaleTabAction","fetchFrontSetting","stockDetailsSaleExcel","jsx","_jsx","jsxs","_jsxs","SaleTabs","props","isLoading","totalRecord","frontSetting","warehouseValue","stockDetailsSales","id","allConfigData","currencySymbol","value","currency_symbol","isWarehouseValue","setIsWarehouseValue","itemsValue","length","map","sale","time","attributes","created_at","format","date","reference_code","customer_name","warehouse_name","sale_items","item","name","product","sub_total","quantity","product_id","currency","columns","sortField","sortable","cell","row","className","children","Number","selector","onChange","filter","onExcelClick","items","totalRows","isEXCEL","mapStateToProps","state"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/report/stockReport/stockDetails/SaleTabs.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport moment from \"moment/moment\";\nimport ReactDataTable from \"../../../../shared/table/ReactDataTable\";\nimport {\n    currencySymbolHandling,\n    getFormattedMessage,\n} from \"../../../../shared/sharedMethod\";\nimport { stockDetailsSaleTabAction } from \"../../../../store/action/stockDetailsSaleTabAction\";\nimport { fetchFrontSetting } from \"../../../../store/action/frontSettingAction\";\nimport { stockDetailsSaleExcel } from \"../../../../store/action/stockDetailsSaleExcel\";\n\nconst SaleTabs = (props) => {\n    const {\n        isLoading,\n        totalRecord,\n        stockDetailsSaleTabAction,\n        frontSetting,\n        fetchFrontSetting,\n        warehouseValue,\n        stockDetailsSaleExcel,\n        stockDetailsSales,\n        id,\n        allConfigData,\n    } = props;\n    const currencySymbol =\n        frontSetting &&\n        frontSetting.value &&\n        frontSetting.value.currency_symbol;\n    const [isWarehouseValue, setIsWarehouseValue] = useState(false);\n\n    useEffect(() => {\n        if (isWarehouseValue === true) {\n            stockDetailsSaleExcel(id, setIsWarehouseValue);\n        }\n    }, [isWarehouseValue]);\n\n    useEffect(() => {\n        fetchFrontSetting();\n    }, [warehouseValue]);\n\n    const itemsValue =\n        currencySymbol &&\n        stockDetailsSales.length >= 0 &&\n        stockDetailsSales.map((sale) => ({\n            time: moment(sale.attributes.created_at).format(\"LT\"),\n            date: moment(sale.attributes.date).format(\"YYYY-MM-DD\"),\n            reference_code: sale.attributes.reference_code,\n            customer_name: sale.attributes.customer_name,\n            warehouse_name: sale.attributes.warehouse_name,\n            id: sale.id,\n            sale_items: sale.attributes.sale_items.map((item) => ({\n                name: item.product && item.product.name,\n                sub_total: item.sub_total,\n                quantity: item.quantity,\n                product_id: item.product_id,\n            })),\n            currency: currencySymbol,\n        }));\n\n    const columns = [\n        {\n            name: getFormattedMessage(\n                \"globally.react-table.column.created-date.label\"\n            ),\n            sortField: \"date\",\n            sortable: true,\n            cell: (row) => {\n                return (\n                    <span className=\"badge bg-light-primary\">\n                        <div className=\"mb-1\">{row.time}</div>\n                        <div>{row.date}</div>\n                    </span>\n                );\n            },\n        },\n        {\n            name: getFormattedMessage(\"dashboard.recentSales.reference.label\"),\n            sortField: \"reference_code\",\n            sortable: false,\n            cell: (row) => {\n                return (\n                    <span className=\"badge bg-light-danger\">\n                        <span>{row.reference_code}</span>\n                    </span>\n                );\n            },\n        },\n        {\n            name: getFormattedMessage(\"supplier.table.name.column.title\"),\n            sortField: \"name\",\n            sortable: false,\n            cell: (row) => {\n                return row.sale_items.map((item) =>\n                    item.product_id === Number(id) ? item.name : \"\"\n                );\n            },\n        },\n        {\n            name: getFormattedMessage(\"customer.title\"),\n            selector: (row) => row.customer_name,\n            sortField: \"customer_name\",\n            sortable: false,\n        },\n        {\n            name: getFormattedMessage(\"warehouse.title\"),\n            selector: (row) => row.warehouse_name,\n            sortField: \"warehouse_name\",\n            sortable: false,\n        },\n        {\n            name: getFormattedMessage(\"globally.detail.quantity\"),\n            sortField: \"quantity\",\n            sortable: false,\n            cell: (row) => {\n                return row.sale_items.map((item) =>\n                    item.product_id === Number(id) ? (\n                        <span className=\"badge bg-light-info\">\n                            <span>{item.quantity}</span>\n                        </span>\n                    ) : (\n                        \"\"\n                    )\n                );\n            },\n        },\n        {\n            name: getFormattedMessage(\"globally.detail.subtotal\"),\n            sortField: \"sub_total\",\n            sortable: false,\n            cell: (row) => {\n                return row.sale_items.map((item) =>\n                    item.product_id === Number(id)\n                        ? currencySymbolHandling(\n                              allConfigData,\n                              row.currency,\n                              item.sub_total\n                          )\n                        : \"\"\n                );\n            },\n        },\n    ];\n\n    const onChange = (filter) => {\n        stockDetailsSaleTabAction(id, filter, true);\n    };\n\n    const onExcelClick = () => {\n        setIsWarehouseValue(true);\n    };\n\n    return (\n        <ReactDataTable\n            columns={columns}\n            items={itemsValue}\n            onChange={onChange}\n            warehouseValue={warehouseValue}\n            isLoading={isLoading}\n            totalRows={totalRecord}\n            isEXCEL\n            onExcelClick={onExcelClick}\n        />\n    );\n};\n\nconst mapStateToProps = (state) => {\n    const { isLoading, totalRecord, stockDetailsSales, frontSetting } = state;\n    return { isLoading, totalRecord, stockDetailsSales, frontSetting };\n};\n\nexport default connect(mapStateToProps, {\n    fetchFrontSetting,\n    stockDetailsSaleExcel,\n\n    stockDetailsSaleTabAction,\n})(SaleTabs);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}