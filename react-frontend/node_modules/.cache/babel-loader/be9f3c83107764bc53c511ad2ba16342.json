{"ast":null,"code":"import React,{useEffect}from'react';import SaleReturnForm from'./SaleReturnForm';import MasterLayout from'../MasterLayout';import HeaderTitle from'../header/HeaderTitle';import{connect}from'react-redux';import{fetchAllWarehouses}from'../../store/action/warehouseAction';import{fetchAllCustomer}from'../../store/action/customerAction';import{useParams}from'react-router-dom';import{fetchSaleReturn}from'../../store/action/salesReturnAction';import saleReturnStatus from'./saleReturnStatus.json';import{getFormattedMessage}from'../../shared/sharedMethod';import Spinner from\"../../shared/components/loaders/Spinner\";import TopProgressBar from\"../../shared/components/loaders/TopProgressBar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const EditSaleReturn=props=>{const{fetchSaleReturn,salesReturn,customers,fetchAllCustomer,warehouses,fetchAllWarehouses,isLoading}=props;const{id}=useParams();useEffect(()=>{fetchAllCustomer();fetchAllWarehouses();fetchSaleReturn(id,false);},[]);const selectedStatus=salesReturn.attributes&&salesReturn.attributes.status&&saleReturnStatus.filter(item=>item.value===salesReturn.attributes.status);// salesReturn && salesReturn.attributes &&  salesReturn.attributes.sale_return_items.forEach((item) => {\n//     item.code = item.product && item.product.code\n//     item.name = item.product && item.product.name\n//     item.stock_alert = item.product && item.product.stock_alert\n//     item.short_name = item.sale_unit.short_name\n//     item.fix_net_unit = item.product_price\n//     item.newItem = ''\n//     item.sale_return_item_id = item.id\n//     item.sale_unit = item.product && item.product.sale_unit ? Number(item.product.sale_unit) : item.sale_unit\n// });\nconst itemsValue=salesReturn&&salesReturn.attributes&&{date:salesReturn.attributes.date,warehouse_id:{value:salesReturn.attributes.warehouse_id,label:salesReturn.attributes.warehouse_name},customer_id:{value:salesReturn.attributes.customer_id,label:salesReturn.attributes.customer_name},tax_rate:salesReturn.attributes.tax_rate,tax_amount:salesReturn.attributes.tax_amount,discount:salesReturn.attributes.discount,shipping:salesReturn.attributes.shipping,grand_total:salesReturn.attributes.grand_total,amount:salesReturn.attributes.amount,sale_items:salesReturn.attributes.sale_return_items.map(item=>({code:item.product&&item.product.code,name:item.product&&item.product.name,product_unit:item.product.product_unit,product_id:item.product_id,short_name:item.sale_unit&&item.sale_unit.short_name,stock_alert:item.product&&item.product.stock_alert,product_price:item.product_price,fix_net_unit:item.product_price,net_unit_price:item.product_price,tax_type:item.tax_type,tax_value:item.tax_value,tax_amount:item.tax_amount,discount_type:item.discount_type,discount_value:item.discount_value,discount_amount:item.discount_amount,isEdit:true,stock:\"\",sold_quantity:item.sold_quantity,sub_total:item.sub_total,sale_unit:item.sale_unit&&item.sale_unit.id&&item.sale_unit.id,quantity:item.quantity,id:item.id,sale_return_item_id:item.id,newItem:'',isSaleReturnEdit:true})),id:salesReturn.id,status_id:salesReturn.attributes.status,// status_id: {\n//     label: selectedStatus[0] && selectedStatus[0].label,\n//     value: selectedStatus[0] && selectedStatus[0].value\n// },\nnote:salesReturn.attributes.note,// isCreateSaleReturn: true,\nisSaleReturnEdit:true,sale_id:salesReturn.attributes.sale_id,sale_reference:salesReturn.attributes.reference_code};return/*#__PURE__*/_jsxs(MasterLayout,{children:[/*#__PURE__*/_jsx(TopProgressBar,{}),/*#__PURE__*/_jsx(HeaderTitle,{title:getFormattedMessage('sale-return.edit.title'),to:\"/app/sale-return\"}),isLoading?/*#__PURE__*/_jsx(Spinner,{}):salesReturn&&/*#__PURE__*/_jsx(SaleReturnForm,{singleSale:itemsValue,id:id,customers:customers,warehouses:warehouses})]});};const mapStateToProps=state=>{const{salesReturn,customers,warehouses,isLoading}=state;return{salesReturn,customers,warehouses,isLoading};};export default connect(mapStateToProps,{fetchSaleReturn,fetchAllCustomer,fetchAllWarehouses})(EditSaleReturn);","map":{"version":3,"names":["React","useEffect","SaleReturnForm","MasterLayout","HeaderTitle","connect","fetchAllWarehouses","fetchAllCustomer","useParams","fetchSaleReturn","saleReturnStatus","getFormattedMessage","Spinner","TopProgressBar","jsx","_jsx","jsxs","_jsxs","EditSaleReturn","props","salesReturn","customers","warehouses","isLoading","id","selectedStatus","attributes","status","filter","item","value","itemsValue","date","warehouse_id","label","warehouse_name","customer_id","customer_name","tax_rate","tax_amount","discount","shipping","grand_total","amount","sale_items","sale_return_items","map","code","product","name","product_unit","product_id","short_name","sale_unit","stock_alert","product_price","fix_net_unit","net_unit_price","tax_type","tax_value","discount_type","discount_value","discount_amount","isEdit","stock","sold_quantity","sub_total","quantity","sale_return_item_id","newItem","isSaleReturnEdit","status_id","note","sale_id","sale_reference","reference_code","children","title","to","singleSale","mapStateToProps","state"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/saleReturn/EditSaleReturn.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport SaleReturnForm from './SaleReturnForm';\nimport MasterLayout from '../MasterLayout';\nimport HeaderTitle from '../header/HeaderTitle';\nimport { connect } from 'react-redux';\nimport { fetchAllWarehouses } from '../../store/action/warehouseAction';\nimport { fetchAllCustomer } from '../../store/action/customerAction';\nimport { useParams } from 'react-router-dom';\nimport { fetchSaleReturn } from '../../store/action/salesReturnAction';\nimport saleReturnStatus from './saleReturnStatus.json';\nimport { getFormattedMessage } from '../../shared/sharedMethod';\nimport Spinner from \"../../shared/components/loaders/Spinner\";\nimport TopProgressBar from \"../../shared/components/loaders/TopProgressBar\";\n\nconst EditSaleReturn = ( props ) => {\n    const { fetchSaleReturn, salesReturn, customers, fetchAllCustomer, warehouses, fetchAllWarehouses, isLoading } = props;\n    const { id } = useParams();\n\n    useEffect( () => {\n        fetchAllCustomer();\n        fetchAllWarehouses();\n        fetchSaleReturn( id, false );\n    }, [] )\n\n    const selectedStatus = salesReturn.attributes && salesReturn.attributes.status && saleReturnStatus.filter( ( item ) => item.value === salesReturn.attributes.status )\n\n    // salesReturn && salesReturn.attributes &&  salesReturn.attributes.sale_return_items.forEach((item) => {\n    //     item.code = item.product && item.product.code\n    //     item.name = item.product && item.product.name\n    //     item.stock_alert = item.product && item.product.stock_alert\n    //     item.short_name = item.sale_unit.short_name\n    //     item.fix_net_unit = item.product_price\n    //     item.newItem = ''\n    //     item.sale_return_item_id = item.id\n    //     item.sale_unit = item.product && item.product.sale_unit ? Number(item.product.sale_unit) : item.sale_unit\n    // });\n\n    const itemsValue = salesReturn && salesReturn.attributes && {\n        date: salesReturn.attributes.date,\n        warehouse_id: {\n            value: salesReturn.attributes.warehouse_id,\n            label: salesReturn.attributes.warehouse_name,\n        },\n        customer_id: {\n            value: salesReturn.attributes.customer_id,\n            label: salesReturn.attributes.customer_name,\n        },\n        tax_rate: salesReturn.attributes.tax_rate,\n        tax_amount: salesReturn.attributes.tax_amount,\n        discount: salesReturn.attributes.discount,\n        shipping: salesReturn.attributes.shipping,\n        grand_total: salesReturn.attributes.grand_total,\n        amount: salesReturn.attributes.amount,\n        sale_items: salesReturn.attributes.sale_return_items.map( ( item ) => ( {\n            code: item.product && item.product.code,\n            name: item.product && item.product.name,\n            product_unit: item.product.product_unit,\n            product_id: item.product_id,\n            short_name: item.sale_unit && item.sale_unit.short_name,\n            stock_alert: item.product && item.product.stock_alert,\n            product_price: item.product_price,\n            fix_net_unit: item.product_price,\n            net_unit_price: item.product_price,\n            tax_type: item.tax_type,\n            tax_value: item.tax_value,\n            tax_amount: item.tax_amount,\n            discount_type: item.discount_type,\n            discount_value: item.discount_value,\n            discount_amount: item.discount_amount,\n            isEdit: true,\n            stock: \"\",\n            sold_quantity: item.sold_quantity,\n            sub_total: item.sub_total,\n            sale_unit: item.sale_unit && item.sale_unit.id && item.sale_unit.id,\n            quantity: item.quantity,\n            id: item.id,\n            sale_return_item_id: item.id,\n            newItem: '',\n            isSaleReturnEdit: true,\n        } ) ),\n        id: salesReturn.id,\n        status_id: salesReturn.attributes.status,\n        // status_id: {\n        //     label: selectedStatus[0] && selectedStatus[0].label,\n        //     value: selectedStatus[0] && selectedStatus[0].value\n        // },\n        note: salesReturn.attributes.note,\n        // isCreateSaleReturn: true,\n        isSaleReturnEdit: true,\n        sale_id: salesReturn.attributes.sale_id,\n        sale_reference: salesReturn.attributes.reference_code,\n    };\n\n    return (\n        <MasterLayout>\n            <TopProgressBar />\n            <HeaderTitle title={getFormattedMessage( 'sale-return.edit.title' )} to='/app/sale-return' />\n            {isLoading ? <Spinner /> :\n                salesReturn && <SaleReturnForm singleSale={itemsValue} id={id} customers={customers} warehouses={warehouses} />}\n        </MasterLayout>\n    )\n}\n\nconst mapStateToProps = ( state ) => {\n    const { salesReturn, customers, warehouses, isLoading } = state;\n    return { salesReturn, customers, warehouses, isLoading }\n};\n\nexport default connect( mapStateToProps, { fetchSaleReturn, fetchAllCustomer, fetchAllWarehouses } )( EditSaleReturn );\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,MAAO,CAAAC,YAAY,KAAM,iBAAiB,CAC1C,MAAO,CAAAC,WAAW,KAAM,uBAAuB,CAC/C,OAASC,OAAO,KAAQ,aAAa,CACrC,OAASC,kBAAkB,KAAQ,oCAAoC,CACvE,OAASC,gBAAgB,KAAQ,mCAAmC,CACpE,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,OAASC,eAAe,KAAQ,sCAAsC,CACtE,MAAO,CAAAC,gBAAgB,KAAM,yBAAyB,CACtD,OAASC,mBAAmB,KAAQ,2BAA2B,CAC/D,MAAO,CAAAC,OAAO,KAAM,yCAAyC,CAC7D,MAAO,CAAAC,cAAc,KAAM,gDAAgD,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE5E,KAAM,CAAAC,cAAc,CAAKC,KAAK,EAAM,CAChC,KAAM,CAAEV,eAAe,CAAEW,WAAW,CAAEC,SAAS,CAAEd,gBAAgB,CAAEe,UAAU,CAAEhB,kBAAkB,CAAEiB,SAAU,CAAC,CAAGJ,KAAK,CACtH,KAAM,CAAEK,EAAG,CAAC,CAAGhB,SAAS,CAAC,CAAC,CAE1BP,SAAS,CAAE,IAAM,CACbM,gBAAgB,CAAC,CAAC,CAClBD,kBAAkB,CAAC,CAAC,CACpBG,eAAe,CAAEe,EAAE,CAAE,KAAM,CAAC,CAChC,CAAC,CAAE,EAAG,CAAC,CAEP,KAAM,CAAAC,cAAc,CAAGL,WAAW,CAACM,UAAU,EAAIN,WAAW,CAACM,UAAU,CAACC,MAAM,EAAIjB,gBAAgB,CAACkB,MAAM,CAAIC,IAAI,EAAMA,IAAI,CAACC,KAAK,GAAKV,WAAW,CAACM,UAAU,CAACC,MAAO,CAAC,CAErK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,KAAM,CAAAI,UAAU,CAAGX,WAAW,EAAIA,WAAW,CAACM,UAAU,EAAI,CACxDM,IAAI,CAAEZ,WAAW,CAACM,UAAU,CAACM,IAAI,CACjCC,YAAY,CAAE,CACVH,KAAK,CAAEV,WAAW,CAACM,UAAU,CAACO,YAAY,CAC1CC,KAAK,CAAEd,WAAW,CAACM,UAAU,CAACS,cAClC,CAAC,CACDC,WAAW,CAAE,CACTN,KAAK,CAAEV,WAAW,CAACM,UAAU,CAACU,WAAW,CACzCF,KAAK,CAAEd,WAAW,CAACM,UAAU,CAACW,aAClC,CAAC,CACDC,QAAQ,CAAElB,WAAW,CAACM,UAAU,CAACY,QAAQ,CACzCC,UAAU,CAAEnB,WAAW,CAACM,UAAU,CAACa,UAAU,CAC7CC,QAAQ,CAAEpB,WAAW,CAACM,UAAU,CAACc,QAAQ,CACzCC,QAAQ,CAAErB,WAAW,CAACM,UAAU,CAACe,QAAQ,CACzCC,WAAW,CAAEtB,WAAW,CAACM,UAAU,CAACgB,WAAW,CAC/CC,MAAM,CAAEvB,WAAW,CAACM,UAAU,CAACiB,MAAM,CACrCC,UAAU,CAAExB,WAAW,CAACM,UAAU,CAACmB,iBAAiB,CAACC,GAAG,CAAIjB,IAAI,GAAQ,CACpEkB,IAAI,CAAElB,IAAI,CAACmB,OAAO,EAAInB,IAAI,CAACmB,OAAO,CAACD,IAAI,CACvCE,IAAI,CAAEpB,IAAI,CAACmB,OAAO,EAAInB,IAAI,CAACmB,OAAO,CAACC,IAAI,CACvCC,YAAY,CAAErB,IAAI,CAACmB,OAAO,CAACE,YAAY,CACvCC,UAAU,CAAEtB,IAAI,CAACsB,UAAU,CAC3BC,UAAU,CAAEvB,IAAI,CAACwB,SAAS,EAAIxB,IAAI,CAACwB,SAAS,CAACD,UAAU,CACvDE,WAAW,CAAEzB,IAAI,CAACmB,OAAO,EAAInB,IAAI,CAACmB,OAAO,CAACM,WAAW,CACrDC,aAAa,CAAE1B,IAAI,CAAC0B,aAAa,CACjCC,YAAY,CAAE3B,IAAI,CAAC0B,aAAa,CAChCE,cAAc,CAAE5B,IAAI,CAAC0B,aAAa,CAClCG,QAAQ,CAAE7B,IAAI,CAAC6B,QAAQ,CACvBC,SAAS,CAAE9B,IAAI,CAAC8B,SAAS,CACzBpB,UAAU,CAAEV,IAAI,CAACU,UAAU,CAC3BqB,aAAa,CAAE/B,IAAI,CAAC+B,aAAa,CACjCC,cAAc,CAAEhC,IAAI,CAACgC,cAAc,CACnCC,eAAe,CAAEjC,IAAI,CAACiC,eAAe,CACrCC,MAAM,CAAE,IAAI,CACZC,KAAK,CAAE,EAAE,CACTC,aAAa,CAAEpC,IAAI,CAACoC,aAAa,CACjCC,SAAS,CAAErC,IAAI,CAACqC,SAAS,CACzBb,SAAS,CAAExB,IAAI,CAACwB,SAAS,EAAIxB,IAAI,CAACwB,SAAS,CAAC7B,EAAE,EAAIK,IAAI,CAACwB,SAAS,CAAC7B,EAAE,CACnE2C,QAAQ,CAAEtC,IAAI,CAACsC,QAAQ,CACvB3C,EAAE,CAAEK,IAAI,CAACL,EAAE,CACX4C,mBAAmB,CAAEvC,IAAI,CAACL,EAAE,CAC5B6C,OAAO,CAAE,EAAE,CACXC,gBAAgB,CAAE,IACtB,CAAC,CAAG,CAAC,CACL9C,EAAE,CAAEJ,WAAW,CAACI,EAAE,CAClB+C,SAAS,CAAEnD,WAAW,CAACM,UAAU,CAACC,MAAM,CACxC;AACA;AACA;AACA;AACA6C,IAAI,CAAEpD,WAAW,CAACM,UAAU,CAAC8C,IAAI,CACjC;AACAF,gBAAgB,CAAE,IAAI,CACtBG,OAAO,CAAErD,WAAW,CAACM,UAAU,CAAC+C,OAAO,CACvCC,cAAc,CAAEtD,WAAW,CAACM,UAAU,CAACiD,cAC3C,CAAC,CAED,mBACI1D,KAAA,CAACd,YAAY,EAAAyE,QAAA,eACT7D,IAAA,CAACF,cAAc,GAAE,CAAC,cAClBE,IAAA,CAACX,WAAW,EAACyE,KAAK,CAAElE,mBAAmB,CAAE,wBAAyB,CAAE,CAACmE,EAAE,CAAC,kBAAkB,CAAE,CAAC,CAC5FvD,SAAS,cAAGR,IAAA,CAACH,OAAO,GAAE,CAAC,CACpBQ,WAAW,eAAIL,IAAA,CAACb,cAAc,EAAC6E,UAAU,CAAEhD,UAAW,CAACP,EAAE,CAAEA,EAAG,CAACH,SAAS,CAAEA,SAAU,CAACC,UAAU,CAAEA,UAAW,CAAE,CAAC,EACzG,CAAC,CAEvB,CAAC,CAED,KAAM,CAAA0D,eAAe,CAAKC,KAAK,EAAM,CACjC,KAAM,CAAE7D,WAAW,CAAEC,SAAS,CAAEC,UAAU,CAAEC,SAAU,CAAC,CAAG0D,KAAK,CAC/D,MAAO,CAAE7D,WAAW,CAAEC,SAAS,CAAEC,UAAU,CAAEC,SAAU,CAAC,CAC5D,CAAC,CAED,cAAe,CAAAlB,OAAO,CAAE2E,eAAe,CAAE,CAAEvE,eAAe,CAAEF,gBAAgB,CAAED,kBAAmB,CAAE,CAAC,CAAEY,cAAe,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}