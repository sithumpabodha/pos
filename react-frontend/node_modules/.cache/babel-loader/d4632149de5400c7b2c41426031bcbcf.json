{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import{currencySymbolHandling,getFormattedMessage,placeholderText}from\"../../../shared/sharedMethod\";import{fetchFrontSetting}from\"../../../store/action/frontSettingAction\";import{fetchTopSellingReport}from\"../../../store/action/topSellingReportAction\";import ReactDataTable from\"../../../shared/table/ReactDataTable\";import TabTitle from\"../../../shared/tab-title/TabTitle\";import MasterLayout from\"../../MasterLayout\";import{fetchTopSellingExcel}from\"../../../store/action/topSellingExcelAction\";import TopProgressBar from\"../../../shared/components/loaders/TopProgressBar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const TopSellingProductsReport=props=>{const{isLoading,totalRecord,fetchTopSellingReport,frontSetting,fetchFrontSetting,topSellingReport,fetchTopSellingExcel,dates,allConfigData}=props;const currencySymbol=frontSetting&&frontSetting.value&&frontSetting.value.currency_symbol;const[isWarehouseValue,setIsWarehouseValue]=useState(false);useEffect(()=>{fetchFrontSetting();},[]);const itemsValue=currencySymbol&&topSellingReport.length>=0&&topSellingReport.map(top=>({code:top.code,product:top.name,price:top.price,quantity:top.total_quantity,grand_total:top.grand_total,sale_unit:top.sale_unit,currency:currencySymbol}));useEffect(()=>{if(isWarehouseValue===true){fetchTopSellingExcel(dates,setIsWarehouseValue);}},[isWarehouseValue]);const columns=[{name:getFormattedMessage(\"dashboard.stockAlert.code.label\"),sortField:\"code\",sortable:false,cell:row=>{return/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-light-danger\",children:/*#__PURE__*/_jsx(\"span\",{children:row.code})});}},{name:getFormattedMessage(\"dashboard.stockAlert.product.label\"),selector:row=>row.product,sortField:\"product\",sortable:false},{name:getFormattedMessage(\"product.table.price.column.label\"),selector:row=>currencySymbolHandling(allConfigData,row.currency,row.price),sortField:\"price\",sortable:false},{name:getFormattedMessage(\"dashboard.stockAlert.quantity.label\"),selector:row=>row.quantity+\" \"+row.sale_unit,sortField:\"quantity\",sortable:false,cell:row=>{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-light-danger me-2\",children:/*#__PURE__*/_jsx(\"span\",{children:row.quantity})}),/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-light-primary me-2\",children:/*#__PURE__*/_jsx(\"span\",{children:row.sale_unit})})]});}},{name:getFormattedMessage(\"purchase.grant-total.label\"),selector:row=>currencySymbolHandling(allConfigData,row.currency,row.grand_total),sortField:\"grand_total\",sortable:false}];const onChange=dates=>{fetchTopSellingReport(dates);};const onExcelClick=()=>{setIsWarehouseValue(true);};return/*#__PURE__*/_jsxs(MasterLayout,{children:[/*#__PURE__*/_jsx(TopProgressBar,{}),/*#__PURE__*/_jsx(TabTitle,{title:placeholderText(\"top-selling-product.reports.title\")}),/*#__PURE__*/_jsx(ReactDataTable,{columns:columns,items:itemsValue,isShowDateRangeField:true,onChange:onChange,isShowSearch:true,isLoading:isLoading,totalRows:totalRecord,isEXCEL:true,onExcelClick:onExcelClick})]});};const mapStateToProps=state=>{const{isLoading,totalRecord,frontSetting,dates,topSellingReport,allConfigData}=state;return{isLoading,totalRecord,frontSetting,dates,topSellingReport,allConfigData};};export default connect(mapStateToProps,{fetchFrontSetting,fetchTopSellingReport,fetchTopSellingExcel})(TopSellingProductsReport);","map":{"version":3,"names":["React","useEffect","useState","connect","currencySymbolHandling","getFormattedMessage","placeholderText","fetchFrontSetting","fetchTopSellingReport","ReactDataTable","TabTitle","MasterLayout","fetchTopSellingExcel","TopProgressBar","jsx","_jsx","jsxs","_jsxs","TopSellingProductsReport","props","isLoading","totalRecord","frontSetting","topSellingReport","dates","allConfigData","currencySymbol","value","currency_symbol","isWarehouseValue","setIsWarehouseValue","itemsValue","length","map","top","code","product","name","price","quantity","total_quantity","grand_total","sale_unit","currency","columns","sortField","sortable","cell","row","className","children","selector","onChange","onExcelClick","title","items","isShowDateRangeField","isShowSearch","totalRows","isEXCEL","mapStateToProps","state"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/report/topSellingReport/TopSellingProductsReport.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n    currencySymbolHandling,\n    getFormattedMessage,\n    placeholderText,\n} from \"../../../shared/sharedMethod\";\nimport { fetchFrontSetting } from \"../../../store/action/frontSettingAction\";\nimport { fetchTopSellingReport } from \"../../../store/action/topSellingReportAction\";\nimport ReactDataTable from \"../../../shared/table/ReactDataTable\";\nimport TabTitle from \"../../../shared/tab-title/TabTitle\";\nimport MasterLayout from \"../../MasterLayout\";\nimport { fetchTopSellingExcel } from \"../../../store/action/topSellingExcelAction\";\nimport TopProgressBar from \"../../../shared/components/loaders/TopProgressBar\";\n\nconst TopSellingProductsReport = (props) => {\n    const {\n        isLoading,\n        totalRecord,\n        fetchTopSellingReport,\n        frontSetting,\n        fetchFrontSetting,\n        topSellingReport,\n        fetchTopSellingExcel,\n        dates,\n        allConfigData,\n    } = props;\n    const currencySymbol =\n        frontSetting &&\n        frontSetting.value &&\n        frontSetting.value.currency_symbol;\n    const [isWarehouseValue, setIsWarehouseValue] = useState(false);\n\n    useEffect(() => {\n        fetchFrontSetting();\n    }, []);\n\n    const itemsValue =\n        currencySymbol &&\n        topSellingReport.length >= 0 &&\n        topSellingReport.map((top) => ({\n            code: top.code,\n            product: top.name,\n            price: top.price,\n            quantity: top.total_quantity,\n            grand_total: top.grand_total,\n            sale_unit: top.sale_unit,\n            currency: currencySymbol,\n        }));\n\n    useEffect(() => {\n        if (isWarehouseValue === true) {\n            fetchTopSellingExcel(dates, setIsWarehouseValue);\n        }\n    }, [isWarehouseValue]);\n\n    const columns = [\n        {\n            name: getFormattedMessage(\"dashboard.stockAlert.code.label\"),\n            sortField: \"code\",\n            sortable: false,\n            cell: (row) => {\n                return (\n                    <span className=\"badge bg-light-danger\">\n                        <span>{row.code}</span>\n                    </span>\n                );\n            },\n        },\n        {\n            name: getFormattedMessage(\"dashboard.stockAlert.product.label\"),\n            selector: (row) => row.product,\n            sortField: \"product\",\n            sortable: false,\n        },\n        {\n            name: getFormattedMessage(\"product.table.price.column.label\"),\n            selector: (row) =>\n                currencySymbolHandling(allConfigData, row.currency, row.price),\n            sortField: \"price\",\n            sortable: false,\n        },\n        {\n            name: getFormattedMessage(\"dashboard.stockAlert.quantity.label\"),\n            selector: (row) => row.quantity + \" \" + row.sale_unit,\n            sortField: \"quantity\",\n            sortable: false,\n            cell: (row) => {\n                return (\n                    <div>\n                        <span className=\"badge bg-light-danger me-2\">\n                            <span>{row.quantity}</span>\n                        </span>\n                        <span className=\"badge bg-light-primary me-2\">\n                            <span>{row.sale_unit}</span>\n                        </span>\n                    </div>\n                );\n            },\n        },\n        {\n            name: getFormattedMessage(\"purchase.grant-total.label\"),\n            selector: (row) =>\n                currencySymbolHandling(\n                    allConfigData,\n                    row.currency,\n                    row.grand_total\n                ),\n            sortField: \"grand_total\",\n            sortable: false,\n        },\n    ];\n\n    const onChange = (dates) => {\n        fetchTopSellingReport(dates);\n    };\n\n    const onExcelClick = () => {\n        setIsWarehouseValue(true);\n    };\n\n    return (\n        <MasterLayout>\n            <TopProgressBar />\n            <TabTitle\n                title={placeholderText(\"top-selling-product.reports.title\")}\n            />\n            <ReactDataTable\n                columns={columns}\n                items={itemsValue}\n                isShowDateRangeField\n                onChange={onChange}\n                isShowSearch\n                isLoading={isLoading}\n                totalRows={totalRecord}\n                isEXCEL\n                onExcelClick={onExcelClick}\n            />\n        </MasterLayout>\n    );\n};\n\nconst mapStateToProps = (state) => {\n    const {\n        isLoading,\n        totalRecord,\n        frontSetting,\n        dates,\n        topSellingReport,\n        allConfigData,\n    } = state;\n    return {\n        isLoading,\n        totalRecord,\n        frontSetting,\n        dates,\n        topSellingReport,\n        allConfigData,\n    };\n};\n\nexport default connect(mapStateToProps, {\n    fetchFrontSetting,\n    fetchTopSellingReport,\n    fetchTopSellingExcel,\n})(TopSellingProductsReport);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}