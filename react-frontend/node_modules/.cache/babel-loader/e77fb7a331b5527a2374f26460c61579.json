{"ast":null,"code":"import React,{useEffect,useState}from'react';import TabTitle from'../../shared/tab-title/TabTitle';import*as EmailValidator from'email-validator';import{forgotPassword}from'../../store/action/authAction';import{useDispatch,useSelector}from'react-redux';import{fetchFrontSetting}from'../../store/action/frontSettingAction';import{getFormattedMessage,placeholderText}from'../../shared/sharedMethod';import{Image}from\"react-bootstrap-v5\";import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ForgotPassword=()=>{const{loginUser,frontSetting}=useSelector(state=>state);const[disable,setDisable]=useState(true);const Dispatch=useDispatch();const[forgotValue,setForgotValue]=useState({email:''});const[errors,setErrors]=useState({email:''});const[loading,setLoading]=useState(false);useEffect(()=>{clearEmail();Dispatch(fetchFrontSetting());if(!loginUser.errorMessage){if(loginUser){setLoading(false);setForgotValue({email:''});}}else{setLoading(false);}},[loginUser,forgotPassword]);const handleChange=e=>{e.persist();setForgotValue(inputs=>({...inputs,[e.target.name]:e.target.value}));setDisable(false);setErrors('');};const prepareFormData=()=>{const formData=new FormData();formData.append('email',forgotValue.email);return formData;};const handleValidation=()=>{let errorss={};let isValid=false;if(!EmailValidator.validate(forgotValue['email'])){if(!forgotValue['email']){errorss['email']=getFormattedMessage('globally.input.email.validate.label');}else{errorss['email']=getFormattedMessage('globally.input.email.valid.validate.label');}}else{isValid=true;}setErrors(errorss);return isValid;};const clearEmail=()=>{if(loginUser&&loginUser==='We have emailed your password reset link!'){setForgotValue({email:''});}};const onSubmit=e=>{e.preventDefault();setLoading(true);const valid=handleValidation();!valid&&setLoading(false);if(valid){Dispatch(forgotPassword(prepareFormData(forgotValue)));setDisable(true);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column flex-column-fluid align-items-center justify-content-center p-4\",children:[/*#__PURE__*/_jsx(TabTitle,{title:\"Forgot Password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 text-center align-items-center justify-content-center\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"image\",children:/*#__PURE__*/_jsx(Image,{className:\"logo-height image login-company-logo mb-7 mb-sm-10\",src:frontSetting&&frontSetting.value&&frontSetting.value.logo})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-theme-white rounded-15 shadow-md width-540 px-5 px-sm-7 py-10 mx-auto\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"form w-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-7\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-dark mb-3\",children:getFormattedMessage('login-form.forgot-password.label')})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-between mt-n5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between w-100\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[getFormattedMessage('globally.input.email.label'),\":\",/*#__PURE__*/_jsx(\"span\",{className:\"required\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"link-info fs-6 text-decoration-none\",children:getFormattedMessage('login-form.go-to-sign-in.label')})]})}),/*#__PURE__*/_jsx(\"input\",{placeholder:placeholderText('globally.input.email.placeholder.label'),required:true,value:forgotValue.email,type:\"text\",name:\"email\",autoComplete:\"on\",className:\"form-control\",onChange:e=>handleChange(e)}),/*#__PURE__*/_jsx(\"span\",{className:\"text-danger d-block fw-400 fs-small mt-2\",children:errors['email']?errors['email']:null})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center pb-lg-0\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"submit\",onClick:e=>onSubmit(e),disabled:disable,children:loading?/*#__PURE__*/_jsx(\"span\",{children:getFormattedMessage('globally.loading.label')}):/*#__PURE__*/_jsx(\"span\",{children:getFormattedMessage('forgot-password-form.reset-link-btn.label')})})})]})})]});};export default ForgotPassword;","map":{"version":3,"names":["React","useEffect","useState","TabTitle","EmailValidator","forgotPassword","useDispatch","useSelector","fetchFrontSetting","getFormattedMessage","placeholderText","Image","Link","jsx","_jsx","jsxs","_jsxs","ForgotPassword","loginUser","frontSetting","state","disable","setDisable","Dispatch","forgotValue","setForgotValue","email","errors","setErrors","loading","setLoading","clearEmail","errorMessage","handleChange","e","persist","inputs","target","name","value","prepareFormData","formData","FormData","append","handleValidation","errorss","isValid","validate","onSubmit","preventDefault","valid","className","children","title","href","src","logo","to","placeholder","required","type","autoComplete","onChange","onClick","disabled"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/auth/ForgotPassword.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport TabTitle from '../../shared/tab-title/TabTitle';\nimport * as EmailValidator from 'email-validator';\nimport { forgotPassword } from '../../store/action/authAction';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchFrontSetting } from '../../store/action/frontSettingAction';\nimport { getFormattedMessage, placeholderText } from '../../shared/sharedMethod';\nimport { Image } from \"react-bootstrap-v5\";\nimport { Link } from 'react-router-dom';\n\nconst ForgotPassword = () => {\n    const { loginUser, frontSetting } = useSelector(state => state)\n    const [disable, setDisable] = useState(true);\n    const Dispatch = useDispatch()\n    const [forgotValue, setForgotValue] = useState({ email: '' });\n    const [errors, setErrors] = useState({ email: '' });\n    const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        clearEmail();\n        Dispatch(fetchFrontSetting());\n        if (!loginUser.errorMessage) {\n            if (loginUser) {\n                setLoading(false);\n                setForgotValue({ email: '' })\n            }\n        } else {\n            setLoading(false);\n        }\n    }, [loginUser, forgotPassword]);\n\n    const handleChange = (e) => {\n        e.persist();\n        setForgotValue(inputs => ({ ...inputs, [e.target.name]: e.target.value }));\n        setDisable(false);\n        setErrors('');\n    };\n\n    const prepareFormData = () => {\n        const formData = new FormData();\n        formData.append('email', forgotValue.email);\n        return formData;\n    };\n\n    const handleValidation = () => {\n        let errorss = {};\n        let isValid = false;\n        if (!EmailValidator.validate(forgotValue['email'])) {\n            if (!forgotValue['email']) {\n                errorss['email'] = getFormattedMessage('globally.input.email.validate.label');\n            } else {\n                errorss['email'] = getFormattedMessage('globally.input.email.valid.validate.label');\n            }\n        } else {\n            isValid = true;\n        }\n        setErrors(errorss);\n        return isValid;\n    };\n\n    const clearEmail = () => {\n        if (loginUser && loginUser === 'We have emailed your password reset link!') {\n            setForgotValue({ email: '' });\n        }\n    };\n\n    const onSubmit = (e) => {\n        e.preventDefault();\n        setLoading(true)\n        const valid = handleValidation();\n        !valid && setLoading(false);\n        if (valid) {\n            Dispatch(forgotPassword(prepareFormData(forgotValue)));\n            setDisable(true);\n        }\n    };\n\n    return (\n        <div className='d-flex flex-column flex-column-fluid align-items-center justify-content-center p-4'>\n            <TabTitle title='Forgot Password' />\n            <div className=\"col-12 text-center align-items-center justify-content-center\">\n                <a href=\"#\" className=\"image\">\n                    <Image className='logo-height image login-company-logo mb-7 mb-sm-10'\n                        src={frontSetting && frontSetting.value && frontSetting.value.logo} />\n                </a>\n            </div>\n            <div className='bg-theme-white rounded-15 shadow-md width-540 px-5 px-sm-7 py-10 mx-auto'>\n                <form className='form w-100'>\n                    <div className='text-center mb-7'>\n                        <h1 className='text-dark mb-3'>{getFormattedMessage('login-form.forgot-password.label')}</h1>\n                    </div>\n                    <div className='mb-10'>\n                        <div className='d-flex justify-content-between mt-n5'>\n                            <div className='d-flex justify-content-between w-100'>\n                                <label\n                                    className='form-label'>{getFormattedMessage('globally.input.email.label')}:\n                                    <span className='required' /></label>\n                                <Link\n                                    to='/login'\n                                    className='link-info fs-6 text-decoration-none'\n                                >\n                                    {getFormattedMessage('login-form.go-to-sign-in.label')}\n                                </Link>\n                            </div>\n                        </div>\n                        <input\n                            placeholder={placeholderText('globally.input.email.placeholder.label')} required\n                            value={forgotValue.email} type='text' name='email' autoComplete='on'\n                            className='form-control'\n                            onChange={(e) => handleChange(e)}\n                        />\n                        <span className='text-danger d-block fw-400 fs-small mt-2'>{errors['email'] ? errors['email'] : null}</span>\n                    </div>\n                    <div className='d-flex justify-content-center pb-lg-0'>\n                        <button className='btn btn-primary' type='submit'\n                            onClick={(e) => onSubmit(e)} disabled={disable}>\n                            {loading ?\n                                <span>\n                                    {getFormattedMessage('globally.loading.label')}\n                                </span> :\n                                <span>\n                                    {getFormattedMessage('forgot-password-form.reset-link-btn.label')}\n                                </span>\n                            }\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    )\n};\n\nexport default ForgotPassword;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}