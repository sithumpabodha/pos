{"ast":null,"code":"import React,{useEffect}from\"react\";import MasterLayout from\"../../MasterLayout\";import TabTitle from\"../../../shared/tab-title/TabTitle\";import{currencySymbolHandling,getFormattedMessage,placeholderText}from\"../../../shared/sharedMethod\";import ReactDataTable from\"../../../shared/table/ReactDataTable\";import{connect}from\"react-redux\";import{fetchFrontSetting}from\"../../../store/action/frontSettingAction\";import TopProgressBar from\"../../../shared/components/loaders/TopProgressBar\";import{bestCustomerReportAction,bestCustomerPdfAction}from\"../../../store/action/bestCustomerReport\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const BestCustomerReport=props=>{var _bestCustomer$top_cus,_bestCustomer$top_cus2;const{isLoading,totalRecord,fetchFrontSetting,frontSetting,bestCustomerReportAction,bestCustomer,bestCustomerPdfAction,allConfigData}=props;useEffect(()=>{fetchFrontSetting();},[]);const currencySymbol=frontSetting&&frontSetting.value&&frontSetting.value.currency_symbol;const itemsValue=(bestCustomer===null||bestCustomer===void 0?void 0:bestCustomer.top_customers)&&(bestCustomer===null||bestCustomer===void 0?void 0:(_bestCustomer$top_cus=bestCustomer.top_customers)===null||_bestCustomer$top_cus===void 0?void 0:_bestCustomer$top_cus.length)>=0&&(bestCustomer===null||bestCustomer===void 0?void 0:(_bestCustomer$top_cus2=bestCustomer.top_customers)===null||_bestCustomer$top_cus2===void 0?void 0:_bestCustomer$top_cus2.map(report=>({name:report&&report.name,phone:report&&report.phone,email:report&&report.email,grand_total:report&&report.grand_total,sales_count:report&&report.sales_count,currency:currencySymbol})));const onChange=filter=>{bestCustomerReportAction(filter,true);};// onClick pdf function\nconst onReportPdfClick=()=>{bestCustomerPdfAction();};const columns=[{name:getFormattedMessage(\"supplier.table.name.column.title\"),sortField:\"name\",sortable:false,cell:row=>{return/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-light-danger\",children:/*#__PURE__*/_jsx(\"span\",{children:row.name})});}},{name:getFormattedMessage(\"pos-sale.detail.Phone.info\"),selector:row=>row.phone,sortField:\"phone\",sortable:false},{name:getFormattedMessage(\"user.input.email.label\"),selector:row=>row.email,sortField:\"email\",sortable:false},{name:getFormattedMessage(\"total.sales.title\"),sortField:\"sales\",sortable:false,selector:row=>row.sales_count},{name:getFormattedMessage(\"pos-total-amount.title\"),selector:row=>currencySymbolHandling(allConfigData,row.currency,row.grand_total),sortField:\"grand_total\",sortable:false}];return/*#__PURE__*/_jsxs(MasterLayout,{children:[/*#__PURE__*/_jsx(TopProgressBar,{}),/*#__PURE__*/_jsx(TabTitle,{title:placeholderText(\"best-customer.report.title\")}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-md-7\",children:/*#__PURE__*/_jsx(ReactDataTable,{subHeader:true,isShowSearch:true,items:itemsValue,columns:columns,onChange:onChange,isLoading:isLoading,totalRows:totalRecord,isReportPdf:true,onReportPdfClick:onReportPdfClick})})]});};const mapStateToProps=state=>{const{isLoading,totalRecord,frontSetting,bestCustomer,allConfigData}=state;return{isLoading,totalRecord,frontSetting,bestCustomer,allConfigData};};export default connect(mapStateToProps,{fetchFrontSetting,bestCustomerReportAction,bestCustomerPdfAction})(BestCustomerReport);","map":{"version":3,"names":["React","useEffect","MasterLayout","TabTitle","currencySymbolHandling","getFormattedMessage","placeholderText","ReactDataTable","connect","fetchFrontSetting","TopProgressBar","bestCustomerReportAction","bestCustomerPdfAction","jsx","_jsx","jsxs","_jsxs","BestCustomerReport","props","_bestCustomer$top_cus","_bestCustomer$top_cus2","isLoading","totalRecord","frontSetting","bestCustomer","allConfigData","currencySymbol","value","currency_symbol","itemsValue","top_customers","length","map","report","name","phone","email","grand_total","sales_count","currency","onChange","filter","onReportPdfClick","columns","sortField","sortable","cell","row","className","children","selector","title","subHeader","isShowSearch","items","totalRows","isReportPdf","mapStateToProps","state"],"sources":["C:/Users/Sithu/Music/react-frontend/src/components/report/best-customerReport/BestCustomerReport.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport MasterLayout from \"../../MasterLayout\";\nimport TabTitle from \"../../../shared/tab-title/TabTitle\";\nimport {\n    currencySymbolHandling,\n    getFormattedMessage,\n    placeholderText,\n} from \"../../../shared/sharedMethod\";\nimport ReactDataTable from \"../../../shared/table/ReactDataTable\";\nimport { connect } from \"react-redux\";\nimport { fetchFrontSetting } from \"../../../store/action/frontSettingAction\";\nimport TopProgressBar from \"../../../shared/components/loaders/TopProgressBar\";\nimport {\n    bestCustomerReportAction,\n    bestCustomerPdfAction,\n} from \"../../../store/action/bestCustomerReport\";\n\nconst BestCustomerReport = (props) => {\n    const {\n        isLoading,\n        totalRecord,\n        fetchFrontSetting,\n        frontSetting,\n        bestCustomerReportAction,\n        bestCustomer,\n        bestCustomerPdfAction,\n        allConfigData,\n    } = props;\n\n    useEffect(() => {\n        fetchFrontSetting();\n    }, []);\n\n    const currencySymbol =\n        frontSetting &&\n        frontSetting.value &&\n        frontSetting.value.currency_symbol;\n\n    const itemsValue =\n        bestCustomer?.top_customers &&\n        bestCustomer?.top_customers?.length >= 0 &&\n        bestCustomer?.top_customers?.map((report) => ({\n            name: report && report.name,\n            phone: report && report.phone,\n            email: report && report.email,\n            grand_total: report && report.grand_total,\n            sales_count: report && report.sales_count,\n            currency: currencySymbol,\n        }));\n\n    const onChange = (filter) => {\n        bestCustomerReportAction(filter, true);\n    };\n\n    // onClick pdf function\n    const onReportPdfClick = () => {\n        bestCustomerPdfAction();\n    };\n\n    const columns = [\n        {\n            name: getFormattedMessage(\"supplier.table.name.column.title\"),\n            sortField: \"name\",\n            sortable: false,\n            cell: (row) => {\n                return (\n                    <span className=\"badge bg-light-danger\">\n                        <span>{row.name}</span>\n                    </span>\n                );\n            },\n        },\n        {\n            name: getFormattedMessage(\"pos-sale.detail.Phone.info\"),\n            selector: (row) => row.phone,\n            sortField: \"phone\",\n            sortable: false,\n        },\n        {\n            name: getFormattedMessage(\"user.input.email.label\"),\n            selector: (row) => row.email,\n            sortField: \"email\",\n            sortable: false,\n        },\n        {\n            name: getFormattedMessage(\"total.sales.title\"),\n            sortField: \"sales\",\n            sortable: false,\n            selector: (row) => row.sales_count,\n        },\n        {\n            name: getFormattedMessage(\"pos-total-amount.title\"),\n            selector: (row) =>\n                currencySymbolHandling(\n                    allConfigData,\n                    row.currency,\n                    row.grand_total\n                ),\n            sortField: \"grand_total\",\n            sortable: false,\n        },\n    ];\n\n    return (\n        <MasterLayout>\n            <TopProgressBar />\n            <TabTitle title={placeholderText(\"best-customer.report.title\")} />\n            <div className=\"pt-md-7\">\n                <ReactDataTable\n                    subHeader={true}\n                    isShowSearch={true}\n                    items={itemsValue}\n                    columns={columns}\n                    onChange={onChange}\n                    isLoading={isLoading}\n                    totalRows={totalRecord}\n                    isReportPdf\n                    onReportPdfClick={onReportPdfClick}\n                />\n            </div>\n        </MasterLayout>\n    );\n};\nconst mapStateToProps = (state) => {\n    const {\n        isLoading,\n        totalRecord,\n        frontSetting,\n        bestCustomer,\n        allConfigData,\n    } = state;\n    return {\n        isLoading,\n        totalRecord,\n        frontSetting,\n        bestCustomer,\n        allConfigData,\n    };\n};\n\nexport default connect(mapStateToProps, {\n    fetchFrontSetting,\n    bestCustomerReportAction,\n    bestCustomerPdfAction,\n})(BestCustomerReport);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}